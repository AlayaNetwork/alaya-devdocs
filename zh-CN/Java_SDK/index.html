<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="search" type="application/opensearchdescription+xml" title="PlatON" href="/alaya-devdocs/zh-CN/opensearch.xml">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.0/dist/mermaid.min.js"></script>
<script src="/alaya-devdocs/js/custom.js"></script><title data-react-helmet="true">Java SDK | PlatON</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://luo-dahui.github.io//alaya-devdocs/zh-CN/Java_SDK"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Java SDK | PlatON"><meta data-react-helmet="true" name="description" content="开发库导入"><meta data-react-helmet="true" property="og:description" content="开发库导入"><meta data-react-helmet="true" property="og:image" content="https://luo-dahui.github.io//alaya-devdocs/zh-CN/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://luo-dahui.github.io//alaya-devdocs/zh-CN/img/undraw_online.svg"><link data-react-helmet="true" rel="shortcut icon" href="/alaya-devdocs/zh-CN/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://luo-dahui.github.io//alaya-devdocs/zh-CN/Java_SDK"><link data-react-helmet="true" rel="alternate" href="https://luo-dahui.github.io//alaya-devdocs/Java_SDK" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://luo-dahui.github.io//alaya-devdocs/zh-CN/Java_SDK" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://luo-dahui.github.io//alaya-devdocs/Java_SDK" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/alaya-devdocs/zh-CN/assets/css/styles.ccba51f9.css">
<link rel="preload" href="/alaya-devdocs/zh-CN/assets/js/runtime~main.f76bcf49.js" as="script">
<link rel="preload" href="/alaya-devdocs/zh-CN/assets/js/main.b0254ba4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/alaya-devdocs/zh-CN/"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar__items navbar__items--right"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span></button><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span>中文</span></a><ul class="dropdown__menu"><li><a href="/alaya-devdocs/en/Java_SDK" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/alaya-devdocs/zh-CN/Java_SDK" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/alaya-devdocs/zh-CN/"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span>Languages</span></a><ul class="menu__list"><li class="menu__list-item"><a href="/alaya-devdocs/en/Java_SDK" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/alaya-devdocs/zh-CN/Java_SDK" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">中文</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="打开菜单" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/alaya-devdocs/zh-CN/">概述</a></li><li class="menu__list-item"><a class="menu__link" href="/alaya-devdocs/zh-CN/Glossary">术语表</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">初步了解</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Intro_to_Alaya">关于Alaya</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Intro_to_ATP">什么是ATP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/staking_and_delegation">质押&amp;委托</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Networks">网络说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Alaya_Account">Alaya账户</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">进阶了解</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Architecture">总体架构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Economic_model">经济模型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Consensus_mechanism">共识机制</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Governance_mechanism">治理机制</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Alaya节点</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Intro_to_validator">验证节点介绍</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Run_a_fullnode">全节点部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Become_Validator">成为验证节点</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Data_snapshot">数据快照</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">节点工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Online_MTool">MTool在线教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Offline_MTool">MTool离线教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Command_Line_Tools">Alaya命令行工具</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">开发者</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Development_guide">开发指南</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">设置开发环境</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Join_the_dev_network">开发网络</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Run_a_dev_node">成为开发网验证节点</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Private_network">私有网络</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">开发工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Alaya-Truffle">Alaya-Truffle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/IDE">IDE</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">智能合约</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Solidity合约</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Getting_started">入门指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Migration_tutorial">迁移教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Development_costs">合约开发成本</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Best_practices">最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Contract_security">安全指南</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Wasm合约</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Wasm_Getting_started">入门指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Wasm_Development_costs">开发成本</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Wasm_Best_practices">最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Wasm_API">合约API</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">API参考</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/JS_SDK">JS SDK</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/alaya-devdocs/zh-CN/Java_SDK">Java SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Json_Rpc">JSON RPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Explorer_API">Explorer API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Samurai_API">Samurai API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ARC Token</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/ARC20">ARC20</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/ARC721">ARC721</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据分析</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/AlayScan">AlayScan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/PlatEye">PlatEye</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">钱包</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Wallet_Guide">钱包指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/ATON_user_manual">ATON钱包</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Samurai_user_manual">Samurai</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">社区</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Join_the_Community">加入社区</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Ecosystem_Programs">生态发展计划</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Ways_to_contribute">贡献方式</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Contribution_Guidelines">贡献指南</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Java SDK</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="开发库导入"></a>开发库导入<a class="hash-link" href="#开发库导入" title="标题的直接链接">#</a></h2><p>根据构建工具的不同，使用以下方式将相关依赖项添加到项目中：</p><ul><li>使用要求 jdk1.8 以上.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="maven"></a>maven<a class="hash-link" href="#maven" title="标题的直接链接">#</a></h3><blockquote><p>项目配置:</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">repository</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">id</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">platon-public</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">id</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">url</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">https://sdk.platon.network/nexus/content/groups/public/</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">url</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">repository</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p>maven 引用方式:</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">com.platon.sdk</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">core</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">version</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">0.15.1.10</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">version</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gradle"></a>gradle<a class="hash-link" href="#gradle" title="标题的直接链接">#</a></h3><blockquote><p>项目配置:</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">repositories </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    maven </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> url </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://sdk.platon.network/nexus/content/groups/public/&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p>gradle 引用方式:</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">compile </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;com.platon.sdk:core:0.15.1.10&quot;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="基础-api-使用"></a>基础 api 使用<a class="hash-link" href="#基础-api-使用" title="标题的直接链接">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bech32-地址"></a>Bech32 地址<a class="hash-link" href="#bech32-地址" title="标题的直接链接">#</a></h3><ul><li><strong>0x 地址转 bech32 地址</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NetworkParameters.init(20000L, &quot;atx&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String hex = &quot;0x4f9c1a1efaa7d81ba1cabf07f2c3a5ac5cf4f818&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String bech32Address = Bech32.addressEncode(NetworkParameters.getHrp(), hex);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">assertThat(bech32Address, is(&quot;atx1f7wp58h65lvphgw2hurl9sa943w0f7qcdcev89&quot;));</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>bech32 address to 0x address</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NetworkParameters.init(20000L, &quot;atx&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String bech32Address = &quot;atx1f7wp58h65lvphgw2hurl9sa943w0f7qcdcev89&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String hex =  Bech32.addressDecodeHex(bech32Address);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">assertThat(hex, is(&quot;0x4f9c1a1efaa7d81ba1cabf07f2c3a5ac5cf4f818&quot;));</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="网络参数"></a>网络参数<a class="hash-link" href="#网络参数" title="标题的直接链接">#</a></h3><ul><li><strong>初始化网络</strong></li></ul><blockquote><p>SDK 已经内置 Alaya 网络。用户还可以初始化其它自定义网络，最后一个初始化的是当前网络.</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NetworkParameters.init(2000L, &quot;ABC&quot;);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>选择当前网络</strong><blockquote><p>如果用户初始化了多个网络，可以随时切换网络.</p></blockquote></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NetworkParameters.selectNetwork(2000L, &quot;ABC&quot;);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p>或者直接选择 Alaya 主网络</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NetworkParameters.selectAlaya();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="钱包相关"></a>钱包相关<a class="hash-link" href="#钱包相关" title="标题的直接链接">#</a></h3><ul><li><strong>生成一个 PlatON 标准的钱包 n=16384 p=1 r=8</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String fileName = WalletUtils.generatePlatONWalletFile(PASSWORD, tempDir);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>生成一个标准的钱包 n=262144 p=1 r=8</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String fileName = WalletUtils.generateNewWalletFile(PASSWORD, tempDir);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>生成一个轻量的钱包 n=4096 p=6 r=8</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String fileName = WalletUtils.generateLightNewWalletFile(PASSWORD, tempDir);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>加载钱包</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(PASSWORD, new File(tempDir, fileName));</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="凭证相关"></a>凭证相关<a class="hash-link" href="#凭证相关" title="标题的直接链接">#</a></h3><ul><li><strong>从钱包文件创建凭证</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(PASSWORD, new File(tempDir, fileName));</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>从私钥创建凭证</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = Credentials.create(&quot;0xXXXXXXXXXXXXXX...&quot;);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>获取不同网络的地址</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 100L;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String bech32Address = credentials.getAddress(chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>获取当前网络参数的地址</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String bech32Address = credentials.getAddress();  // NetworkParameters.CurrentNetwork</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="基础-rpc-接口"></a>基础 RPC 接口<a class="hash-link" href="#基础-rpc-接口" title="标题的直接链接">#</a></h2><p>基础<code>API</code>包括网络，交易，查询，节点信息，经济模型参数配置等相关的接口，具体参考如下<code>API</code>使用说明。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="web3clientversion"></a>web3ClientVersion<a class="hash-link" href="#web3clientversion" title="标题的直接链接">#</a></h3><blockquote><p>返回当前客户端版本</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, Web3ClientVersion&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>Web3ClientVersion 属性中的 string 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, Web3ClientVersion&gt; request = currentValidWeb3j.web3ClientVersion();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String version = request.send().getWeb3ClientVersion();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="web3sha3"></a>web3Sha3<a class="hash-link" href="#web3sha3" title="标题的直接链接">#</a></h3><blockquote><p>返回给定数据的 keccak-256（不是标准 sha3-256）</p></blockquote><ul><li><p><strong>参数</strong></p><p>String ：加密前的数据</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, Web3Sha3&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>Web3Sha3 属性中的 string 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String date = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, Web3Sha3&gt; request = currentValidWeb3j.web3Sha3(date);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String resDate = request.send().getWeb3ClientVersion();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="netversion"></a>netVersion<a class="hash-link" href="#netversion" title="标题的直接链接">#</a></h3><blockquote><p>返回当前网络 ID</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, NetVersion&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>NetVersion 属性中的 string 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, NetVersion&gt; request = currentValidWeb3j.netVersion();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String version = request.send().getNetVersion();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="netlistening"></a>netListening<a class="hash-link" href="#netlistening" title="标题的直接链接">#</a></h3><blockquote><p>如果客户端正在积极侦听网络连接，则返回 true</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, NetListening&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>NetListening 属性中的 boolean 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, NetListening&gt; request = currentValidWeb3j.netListening();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">boolean req = request.send().isListening();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="netpeercount"></a>netPeerCount<a class="hash-link" href="#netpeercount" title="标题的直接链接">#</a></h3><blockquote><p>返回当前连接到客户端的对等体的数量</p></blockquote><ul><li><p><strong>参数</strong></p><p>​ 无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, NetPeerCount&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>NetPeerCount 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, NetPeerCount&gt; request = currentValidWeb3j.netPeerCount();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getQuantity();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonprotocolversion"></a>platonProtocolVersion<a class="hash-link" href="#platonprotocolversion" title="标题的直接链接">#</a></h3><blockquote><p>返回当前 platon 协议版本</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonProtocolVersion&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonProtocolVersion 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonProtocolVersion&gt; request = currentValidWeb3j.platonProtocolVersion();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getProtocolVersion();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonsyncing"></a>platonSyncing<a class="hash-link" href="#platonsyncing" title="标题的直接链接">#</a></h3><blockquote><p>返回一个对象，其中包含有关同步状态的数据或 false</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonSyncing&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonSyncing 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonSyncing&gt; request = currentValidWeb3j.platonSyncing();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">boolean req = request.send().isSyncing();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongasprice"></a>platonGasPrice<a class="hash-link" href="#platongasprice" title="标题的直接链接">#</a></h3><blockquote><p>返回 gas 当前价格</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGasPrice&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGasPrice 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGasPrice&gt; request = currentValidWeb3j.platonGasPrice();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getGasPrice();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonaccounts"></a>platonAccounts<a class="hash-link" href="#platonaccounts" title="标题的直接链接">#</a></h3><blockquote><p>返回客户端拥有的地址列表</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonAccounts&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonAccounts 属性中的 String 数组即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonAccounts&gt; request = currentValidWeb3j.platonAccounts();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;String&gt; req = request.send().getAccounts();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonblocknumber"></a>platonBlockNumber<a class="hash-link" href="#platonblocknumber" title="标题的直接链接">#</a></h3><blockquote><p>返回当前最高块高</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonBlockNumber&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonBlockNumber 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonBlockNumber&gt; request = currentValidWeb3j.platonBlockNumber();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getBlockNumber();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetbalance"></a>platonGetBalance<a class="hash-link" href="#platongetbalance" title="标题的直接链接">#</a></h3><blockquote><p>返回查询地址余额</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String ： address 需要查询的地址</li><li>DefaultBlockParameter:<ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetBalance&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetBalance 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String address = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetBalance&gt; request = web3j.platonGetBalance(address,DefaultBlockParameterName.LATEST);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getBalance();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetstorageat"></a>platonGetStorageAt<a class="hash-link" href="#platongetstorageat" title="标题的直接链接">#</a></h3><blockquote><p>从给定地址的存储位置返回值</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : address 存储地址</li><li>BigInteger: position 存储器中位置的整数</li><li>DefaultBlockParameter:<ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetStorageAt&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetStorageAt 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String address = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGetStorageAt&gt; request = currentValidWeb3j.platonGetStorageAt(address ,BigInteger.ZERO,DefaultBlockParameterName.LATEST );</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getData();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetblocktransactioncountbyhash"></a>platonGetBlockTransactionCountByHash<a class="hash-link" href="#platongetblocktransactioncountbyhash" title="标题的直接链接">#</a></h3><blockquote><p>根据区块 hash 查询区块中交易个数</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : blockHash 区块 hash</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetBlockTransactionCountByHash&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetBlockTransactionCountByHash 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String blockhash = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGetBlockTransactionCountByHash&gt; request = currentValidWeb3j.platonGetBlockTransactionCountByHash(blockhash);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getTransactionCount();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongettransactioncount"></a>platonGetTransactionCount<a class="hash-link" href="#platongettransactioncount" title="标题的直接链接">#</a></h3><blockquote><p>根据地址查询该地址发送的交易个数</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : address 查询地址</li><li>DefaultBlockParameter:<ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetTransactionCount&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetTransactionCount 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String address = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGetTransactionCount&gt; request = currentValidWeb3j.platonGetTransactionCount(address,DefaultBlockParameterName.LATEST);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getTransactionCount();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetblocktransactioncountbynumber"></a>platonGetBlockTransactionCountByNumber<a class="hash-link" href="#platongetblocktransactioncountbynumber" title="标题的直接链接">#</a></h3><blockquote><p>根据区块块高，返回块高中的交易总数</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>DefaultBlockParameter:<ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetBlockTransactionCountByNumber&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetBlockTransactionCountByNumber 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGetBlockTransactionCountByNumber&gt; request = currentValidWeb3j.platonGetBlockTransactionCountByNumber(DefaultBlockParameterName.LATEST);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getTransactionCount();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetcode"></a>platonGetCode<a class="hash-link" href="#platongetcode" title="标题的直接链接">#</a></h3><blockquote><p>返回给定地址的代码</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li><p>String ： address 地址/合约</p></li><li><p>DefaultBlockParameter:</p><ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetCode&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetCode 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String address = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGetCode&gt; request = currentValidWeb3j.platonGetCode(address,DefaultBlockParameterName.LATEST);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getCode();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonsign"></a>platonSign<a class="hash-link" href="#platonsign" title="标题的直接链接">#</a></h3><blockquote><p>数据签名</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String ： address 地址</li><li>String : sha3HashOfDataToSign 待签名数据</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonSign&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonSign 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String address = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String sha3HashOfDataToSign   = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonSign&gt; request = currentValidWeb3j.platonSign(address,DefaultBlockParameterName.LATEST);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getSignature();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>备注：地址必须提前先解锁</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonsendtransaction"></a>platonSendTransaction<a class="hash-link" href="#platonsendtransaction" title="标题的直接链接">#</a></h3><blockquote><p>发送服务代签名交易</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>Transaction : Transaction: 交易结构<ul><li>String : from : 交易发送地址</li><li>String : to : 交易接收方地址</li><li>BigInteger ： gas ： 本次交易 gas 用量上限</li><li>BigInteger ： gasPrice ： gas 价格</li><li>BigInteger ：value ： 转账金额</li><li>String ：data ： 上链数据</li><li>BigInteger ：nonce ： 交易唯一性标识<ul><li>调用 platonGetTransactionCount，获取 from 地址作为参数，获取到该地址的已发送交易总数</li><li>每次使用该地址 nonce +1</li></ul></li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonSendTransaction&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonSendTransaction 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Transaction transaction = new Transaction(&quot;from&quot;,&quot;to&quot;,BigInteger.ZERO,BigInteger.ZERO,BigInteger.ZERO,&quot;data &quot;,BigInteger.ONE);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonSendTransaction&gt; request = currentValidWeb3j.platonSendTransaction(transaction);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getTransactionHash();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonsendrawtransaction"></a>platonSendRawTransaction<a class="hash-link" href="#platonsendrawtransaction" title="标题的直接链接">#</a></h3><blockquote><p>发送交易</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : data : 钱包签名后数据</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonSendTransaction&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonSendTransaction 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String  data = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonSendTransaction&gt; request = currentValidWeb3j.platonSendRawTransaction(data);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getTransactionHash();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platoncall"></a>platonCall<a class="hash-link" href="#platoncall" title="标题的直接链接">#</a></h3><blockquote><p>执行一个消息调用交易，消息调用交易直接在节点旳 VM 中执行而 不需要通过区块链的挖矿来执行</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>Transaction : Transaction: 交易结构<ul><li>String : from : 交易发送地址</li><li>String : to : 交易接收方地址</li><li>BigInteger ： gas ： 本次交易 gas 用量上限</li><li>BigInteger ： gasPrice ： gas 价格</li><li>BigInteger ：value ： 转账金额</li><li>String ：data ： 上链数据</li><li>BigInteger ：nonce ： 交易唯一性标识<ul><li>调用 platonGetTransactionCount，获取 from 地址作为参数，获取到该地址的已发送交易总数</li><li>每次使用该地址 nonce +1</li></ul></li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonCall&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonCall 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javas"><pre tabindex="0" class="prism-code language-javas codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Transaction transaction = new Transaction(&quot;from&quot;,&quot;to&quot;,BigInteger.ZERO,BigInteger.ZERO,BigInteger.ZERO,&quot;data &quot;,BigInteger.ONE);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonSendTransaction&gt; request = currentValidWeb3j.platonCall(transaction);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req = request.send().getValue();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonestimategas"></a>platonEstimateGas<a class="hash-link" href="#platonestimategas" title="标题的直接链接">#</a></h3><blockquote><p>估算合约方法 gas 用量</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>Transaction : Transaction: 交易结构<ul><li>String : from : 交易发送地址</li><li>String : to : 交易接收方地址</li><li>BigInteger ： gas ： 本次交易 gas 用量上限</li><li>BigInteger ： gasPrice ： gas 价格</li><li>BigInteger ：value ： 转账金额</li><li>String ：data ： 上链数据</li><li>BigInteger ：nonce ： 交易唯一性标识<ul><li>调用 platonGetTransactionCount，获取 from 地址作为参数，获取到该地址的已发送交易总数</li><li>每次使用该地址 nonce +1</li></ul></li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonEstimateGas&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonEstimateGas 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Transaction transaction = new Transaction(&quot;from&quot;,&quot;to&quot;,BigInteger.ZERO,BigInteger.ZERO,BigInteger.ZERO,&quot;data &quot;,BigInteger.ONE);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonEstimateGas&gt; request = currentValidWeb3j.platonEstimateGas(transaction);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getAmountUsed();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetblockbyhash"></a>platonGetBlockByHash<a class="hash-link" href="#platongetblockbyhash" title="标题的直接链接">#</a></h3><blockquote><p>根据区块 hash 查询区块信息</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String ： blockHash 区块 hash</li><li>boolean :<ul><li>true ： 区块中带有完整的交易列表</li><li>false： 区块中只带交易 hash 列表</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonBlock&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonBlock 属性中的 Block 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String blockHash  = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonBlock&gt; request = currentValidWeb3j.platonGetBlockByHash(blockHash,true);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Block req = request.send().getBlock();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetblockbynumber"></a>platonGetBlockByNumber<a class="hash-link" href="#platongetblockbynumber" title="标题的直接链接">#</a></h3><blockquote><p>根据区块高度查询区块信息</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>DefaultBlockParameter:<ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li><li>boolean :<ul><li>true ： 区块中带有完整的交易列表</li><li>false： 区块中只带交易 hash 列表</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonBlock&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonBlock 属性中的 Block 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonBlock&gt; request = currentValidWeb3j.platonGetBlockByNumber(DefaultBlockParameter.valueOf(BigInteger.ZERO) ,true);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Block req = request.send().getBlock();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongettransactionbyblockhashandindex"></a>platonGetTransactionByBlockHashAndIndex<a class="hash-link" href="#platongettransactionbyblockhashandindex" title="标题的直接链接">#</a></h3><blockquote><p>根据区块 hash 查询区块中指定序号的交易</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : blockHash 区块 hash</li><li>BigInteger ： transactionIndex 交易在区块中的序号</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonTransaction&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonTransaction 属性中的 Transaction 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String blockHash    = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonTransaction&gt; request = currentValidWeb3j.platonGetTransactionByHash(blockHash,BigInteger.ZERO);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Optional&lt;Transaction&gt; req = request.send().getTransaction();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongettransactionbyblocknumberandindex"></a>platonGetTransactionByBlockNumberAndIndex<a class="hash-link" href="#platongettransactionbyblocknumberandindex" title="标题的直接链接">#</a></h3><blockquote><p>根据区块高度查询区块中指定序号的交易</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>DefaultBlockParameter:<ul><li>DefaultBlockParameterName.LATEST 最新块高(默认)</li><li>DefaultBlockParameterName.EARLIEST 最低块高</li><li>DefaultBlockParameterName.PENDING 未打包交易</li><li>DefaultBlockParameter.valueOf(BigInteger blockNumber) 指定块高</li></ul></li><li>BigInteger ： transactionIndex 交易在区块中的序号</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonTransaction&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonTransaction 属性中的 Transaction 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String blockHash    = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonTransaction&gt; request = currentValidWeb3j.platonGetTransactionByHash(DefaultBlockParameter.valueOf(BigInteger.ZERO) ,BigInteger.ZERO);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Optional&lt;Transaction&gt; req = request.send().getTransaction();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongettransactionreceipt"></a>platonGetTransactionReceipt<a class="hash-link" href="#platongettransactionreceipt" title="标题的直接链接">#</a></h3><blockquote><p>根据交易 hash 查询交易回执</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : transactionHash 交易 hash</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonGetTransactionReceipt&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonGetTransactionReceipt 属性中的 Transaction 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String blockHash    = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonGetTransactionReceipt&gt; request = currentValidWeb3j.platonGetTransactionReceipt(DefaultBlockParameter.valueOf(BigInteger.ZERO) ,BigInteger.ZERO);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Optional&lt;TransactionReceipt&gt; req = request.send().getTransactionReceipt();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonnewfilter"></a>platonNewFilter<a class="hash-link" href="#platonnewfilter" title="标题的直接链接">#</a></h3><blockquote><p>创建一个过滤器，以便在客户端接收到匹配的 whisper 消息时进行通知</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>PlatonFilter: PlatonFilter :<ul><li>SingleTopic :</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonFilter&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonFilter 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonFilter filter = new PlatonFilter();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">filter.addSingleTopic(&quot;&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonFilter&gt; request = currentValidWeb3j.platonNewFilter(filter);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getFilterId();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonnewblockfilter"></a>platonNewBlockFilter<a class="hash-link" href="#platonnewblockfilter" title="标题的直接链接">#</a></h3><blockquote><p>在节点中创建一个过滤器，以便当新块生成时进行通知。要检查状态是否变化</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonFilter&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonFilter 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonFilter&gt; request = currentValidWeb3j.platonNewBlockFilter();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getFilterId();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonnewpendingtransactionfilter"></a>platonNewPendingTransactionFilter<a class="hash-link" href="#platonnewpendingtransactionfilter" title="标题的直接链接">#</a></h3><blockquote><p>在节点中创建一个过滤器，以便当产生挂起交易时进行通知。 要检查状态是否发生变化</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonFilter&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonFilter 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonFilter&gt; request = currentValidWeb3j.platonNewPendingTransactionFilter();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getFilterId();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonnewpendingtransactionfilter-1"></a>platonNewPendingTransactionFilter<a class="hash-link" href="#platonnewpendingtransactionfilter-1" title="标题的直接链接">#</a></h3><blockquote><p>写在具有指定编号的过滤器。当不在需要监听时，总是需要执行该调用</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonFilter&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonFilter 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonFilter&gt; request = currentValidWeb3j.platonNewPendingTransactionFilter();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger req = request.send().getFilterId();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonuninstallfilter"></a>platonUninstallFilter<a class="hash-link" href="#platonuninstallfilter" title="标题的直接链接">#</a></h3><blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">写在具有指定编号的过滤器。当不在需要监听时，总是需要执行该调用</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></blockquote><ul><li><p><strong>参数</strong></p><ul><li>BigInteger : filterId : 过滤器编号</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonUninstallFilter&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonUninstallFilter 属性中的 boolean 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonUninstallFilter&gt; request = currentValidWeb3j.platonNewPendingTransactionFilter(BigInteger.ZERO);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">boolean req = request.send().isUninstalled();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetfilterchanges"></a>platonGetFilterChanges<a class="hash-link" href="#platongetfilterchanges" title="标题的直接链接">#</a></h3><blockquote><p>轮询指定的过滤器，并返回自上次轮询之后新生成的日志数组</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>BigInteger : filterId : 过滤器编号</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonLog&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonLog 属性中的 LogResult 数组即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonLog&gt; request = currentValidWeb3j.platonGetFilterChanges(BigInteger.ZERO);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;PlatonLog.LogResult&gt; req = request.send().getLogs();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetfilterlogs"></a>platonGetFilterLogs<a class="hash-link" href="#platongetfilterlogs" title="标题的直接链接">#</a></h3><blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">轮询指定的过滤器，并返回自上次轮询之后新生成的日志数组。</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></blockquote><ul><li><p><strong>参数</strong></p><ul><li>BigInteger : filterId : 过滤器编号</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonLog&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonLog 属性中的 LogResult 数组即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonLog&gt; request = currentValidWeb3j.platonGetFilterLogs(BigInteger.ZERO);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;PlatonLog.LogResult&gt; req = request.send().getLogs();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platongetlogs"></a>platonGetLogs<a class="hash-link" href="#platongetlogs" title="标题的直接链接">#</a></h3><blockquote><p>返回指定过滤器中的所有日志</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>PlatonFilter: PlatonFilter :<ul><li>SingleTopic :</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonLog&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonLog 属性中的 BigInteger 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonFilter filter = new PlatonFilter();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">filter.addSingleTopic(&quot;&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, PlatonLog&gt; request = currentValidWeb3j.platonGetLogs(filter);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;LogResult&gt; = request.send().getLogs();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonpendingtransactions"></a>platonPendingTransactions<a class="hash-link" href="#platonpendingtransactions" title="标题的直接链接">#</a></h3><blockquote><p>查询待处理交易</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonPendingTransactions&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonPendingTransactions 属性中的 transactions 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonPendingTransactions&gt; req = currentValidWeb3j.platonPendingTx();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EthPendingTransactions res = req.send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;Transaction&gt; transactions = res.getTransactions();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dbputstring"></a>dbPutString<a class="hash-link" href="#dbputstring" title="标题的直接链接">#</a></h3><blockquote><p>在本地数据库中存入字符串。</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : databaseName : 数据库名称</li><li>String : keyName : 键名</li><li>String : stringToStore : 要存入的字符串</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, DbPutString&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>DbPutString 属性中的 boolean 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String databaseName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String keyName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String stringToStore;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, DbPutString&gt; request = currentValidWeb3j.dbPutString(databaseName,keyName,stringToStore);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;DbPutString&gt; = request.send().valueStored();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dbgetstring"></a>dbGetString<a class="hash-link" href="#dbgetstring" title="标题的直接链接">#</a></h3><blockquote><p>从本地数据库读取字符串</p></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : databaseName : 数据库名称</li><li>String : keyName : 键名</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, DbGetString&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>DbGetString 属性中的 String 即为对应存储数据</p><p><strong>示例</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String databaseName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String keyName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, DbGetString&gt; request = currentValidWeb3j.dbGetString(databaseName,keyName);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req  = request.send().getStoredValue();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dbputhex"></a>dbPutHex<a class="hash-link" href="#dbputhex" title="标题的直接链接">#</a></h3><blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">将二进制数据写入本地数据库</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : databaseName : 数据库名称</li><li>String : keyName : 键名</li><li>String : dataToStore : 要存入的二进制数据</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, DbPutHex&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>DbPutHex 属性中的 boolean 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String databaseName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String keyName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String dataToStore;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, DbPutHex&gt; request = currentValidWeb3j.dbPutHex(databaseName,keyName,dataToStore);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">boolean req  = request.send().valueStored();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dbgethex"></a>dbGetHex<a class="hash-link" href="#dbgethex" title="标题的直接链接">#</a></h3><blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">从本地数据库中读取二进制数据</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></blockquote><ul><li><p><strong>参数</strong></p><ul><li>String : databaseName : 数据库名称</li><li>String : keyName : 键名</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, DbGetHex&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>DbGetHex 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String databaseName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String keyName;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request &lt;?, DbGetHex&gt; request = currentValidWeb3j.dbGetHex(databaseName,keyName);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String req  = request.send().getStoredValue();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonevidences"></a>platonEvidences<a class="hash-link" href="#platonevidences" title="标题的直接链接">#</a></h3><blockquote><p>返回双签举报数据</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>出参</strong></p></li></ul><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>jsonrpc</td><td>string</td><td>rpc 版本号</td></tr><tr><td>id</td><td>int</td><td>id 序号</td></tr><tr><td>result</td><td>string</td><td>证据字符串</td></tr></tbody></table><p>result 为证据字符串，包含 3 种证据类型，分别是：duplicatePrepare、duplicateVote、duplicateViewchange
每种类型包含多个证据，所以是数组结构，解析时需注意。</p><ul><li><strong>duplicatePrepare</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;prepareA&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;epoch&quot;: 0,            //共识轮epoch值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;viewNumber&quot;: 0,       //共识轮view值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x06abdbaf7a0a5cb1deddf69de5b23d6bc3506fdadbdcfc32333a1220da1361ba&quot;,    //区块hash</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 16013,       //区块number</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockIndex&quot;: 0,        //区块在一轮view中的索引值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockData&quot;: &quot;0xe1a507a57c1e9d8cade361fefa725d7a271869aea7fd923165c872e7c0c2b3f2&quot;,     //区块rlp编码值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;validateNode&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;index&quot;: 0,     //验证人在一轮epoch中的索引值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;address&quot;: &quot;0xc30671be006dcbfd6d36bdf0dfdf95c62c23fad4&quot;,    //验证人地址</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;nodeId&quot;: &quot;19f1c9aa5140bd1304a3260de640a521c33015da86b88cd2ecc83339b558a4d4afa4bd0555d3fa16ae43043aeb4fbd32c92b34de1af437811de51d966dc64365&quot;,    //验证人nodeID</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;blsPubKey&quot;: &quot;f93a2381b4cbb719a83d80a4feb93663c7aa026c99f64704d6cc464ae1239d3486d0cf6e0b257ac02d5dd3f5b4389907e9d1d5b434d784bfd7b89e0822148c7f5b8e1d90057a5bbf4a0abf88bbb12902b32c94ca390a2e16eea8132bf8c2ed8f&quot;    //验证人bls公钥</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x1afdf43596e07d0f5b59ae8f45d30d21a9c5ac793071bfb6382ae151081a901fd3215e0b9645040c9071d0be08eb200900000000000000000000000000000000&quot;     //消息签名</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;prepareB&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;epoch&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;viewNumber&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x74e3744545e95f4defc82d731504a39994b8013575491f83f7520cf796347b8f&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 16013,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockIndex&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockData&quot;: &quot;0xb11be0a3634e29281403d690c1a0bc38e96ea34b3aea0b0da2883800f610c3b7&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;validateNode&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;index&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;address&quot;: &quot;0xc30671be006dcbfd6d36bdf0dfdf95c62c23fad4&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;nodeId&quot;: &quot;19f1c9aa5140bd1304a3260de640a521c33015da86b88cd2ecc83339b558a4d4afa4bd0555d3fa16ae43043aeb4fbd32c92b34de1af437811de51d966dc64365&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;blsPubKey&quot;: &quot;f93a2381b4cbb719a83d80a4feb93663c7aa026c99f64704d6cc464ae1239d3486d0cf6e0b257ac02d5dd3f5b4389907e9d1d5b434d784bfd7b89e0822148c7f5b8e1d90057a5bbf4a0abf88bbb12902b32c94ca390a2e16eea8132bf8c2ed8f&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x16795379ca8e28953e74b23d1c384dda760579ad70c5e490225403664a8d4490cabb1dc64a2e0967b5f0c1e9dbd6578c00000000000000000000000000000000&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>duplicateVote</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;voteA&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;epoch&quot;: 0,   //共识轮epoch值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;viewNumber&quot;: 0,    //共识轮view值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x58b5976a471f86c4bd198984827bd594dce6ac861ef15bbbb1555e7b2edc2fc9&quot;,   //区块hash</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 16013,   //区块number</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockIndex&quot;: 0,    //区块在一轮view中的索引值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;validateNode&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;index&quot;: 0,    //验证人在一轮epoch中的索引值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;address&quot;: &quot;0xc30671be006dcbfd6d36bdf0dfdf95c62c23fad4&quot;,  //验证人地址</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;nodeId&quot;: &quot;19f1c9aa5140bd1304a3260de640a521c33015da86b88cd2ecc83339b558a4d4afa4bd0555d3fa16ae43043aeb4fbd32c92b34de1af437811de51d966dc64365&quot;,   //验证人nodeID</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;blsPubKey&quot;: &quot;f93a2381b4cbb719a83d80a4feb93663c7aa026c99f64704d6cc464ae1239d3486d0cf6e0b257ac02d5dd3f5b4389907e9d1d5b434d784bfd7b89e0822148c7f5b8e1d90057a5bbf4a0abf88bbb12902b32c94ca390a2e16eea8132bf8c2ed8f&quot;    //验证人bls公钥</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x071350aed09f226e218715357ffb7523ba41271dd1d82d4dded451ee6509cd71f6888263b0b14bdfb33f88c04f76790d00000000000000000000000000000000&quot;    //消息签名</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;voteB&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;epoch&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;viewNumber&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x422515ca50b9aa01c46dffee53f3bef0ef29884bfd014c3b6170c05d5cf67696&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 16013,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockIndex&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;validateNode&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;index&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;address&quot;: &quot;0xc30671be006dcbfd6d36bdf0dfdf95c62c23fad4&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;nodeId&quot;: &quot;19f1c9aa5140bd1304a3260de640a521c33015da86b88cd2ecc83339b558a4d4afa4bd0555d3fa16ae43043aeb4fbd32c92b34de1af437811de51d966dc64365&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;blsPubKey&quot;: &quot;f93a2381b4cbb719a83d80a4feb93663c7aa026c99f64704d6cc464ae1239d3486d0cf6e0b257ac02d5dd3f5b4389907e9d1d5b434d784bfd7b89e0822148c7f5b8e1d90057a5bbf4a0abf88bbb12902b32c94ca390a2e16eea8132bf8c2ed8f&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x9bf6c01643058c0c828c35dc3277666edd087cb439c5f6a78ba065d619f812fb42c5ee881400a7a42dd8366bc0c5c88100000000000000000000000000000000&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>duplicateViewchange</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;viewA&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;epoch&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;viewNumber&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0xb84a40bb954e579716e7a6b9021618f6b25cdb0e0dd3d8c2c0419fe835640f36&quot;,  //区块hash</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 16013,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;validateNode&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;index&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;address&quot;: &quot;0xc30671be006dcbfd6d36bdf0dfdf95c62c23fad4&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;nodeId&quot;: &quot;19f1c9aa5140bd1304a3260de640a521c33015da86b88cd2ecc83339b558a4d4afa4bd0555d3fa16ae43043aeb4fbd32c92b34de1af437811de51d966dc64365&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;blsPubKey&quot;: &quot;f93a2381b4cbb719a83d80a4feb93663c7aa026c99f64704d6cc464ae1239d3486d0cf6e0b257ac02d5dd3f5b4389907e9d1d5b434d784bfd7b89e0822148c7f5b8e1d90057a5bbf4a0abf88bbb12902b32c94ca390a2e16eea8132bf8c2ed8f&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x9c8ba2654c6b8334b1b94d3b421c5901242973afcb9d87c4ab6d82c2aee8e212a08f2ae000c9203f05f414ca578cda9000000000000000000000000000000000&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockEpoch&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockView&quot;: 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;viewB&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;epoch&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;viewNumber&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x2a60ed6f04ccb9e468fbbfdda98b535653c42a16f1d7ccdfbd5d73ae1a2f4bf1&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 16013,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;validateNode&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;index&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;address&quot;: &quot;0xc30671be006dcbfd6d36bdf0dfdf95c62c23fad4&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;nodeId&quot;: &quot;19f1c9aa5140bd1304a3260de640a521c33015da86b88cd2ecc83339b558a4d4afa4bd0555d3fa16ae43043aeb4fbd32c92b34de1af437811de51d966dc64365&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;blsPubKey&quot;: &quot;f93a2381b4cbb719a83d80a4feb93663c7aa026c99f64704d6cc464ae1239d3486d0cf6e0b257ac02d5dd3f5b4389907e9d1d5b434d784bfd7b89e0822148c7f5b8e1d90057a5bbf4a0abf88bbb12902b32c94ca390a2e16eea8132bf8c2ed8f&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0xed69663fb943ce0e0dd90df1b65e96514051e82df48b3867516cc7e505234b9ca707fe43651870d9141354a7a993e09000000000000000000000000000000000&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockEpoch&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockView&quot;: 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>返回值</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonEvidences&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>PlatonEvidences 属性中的 Evidences 对象即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, PlatonEvidences&gt; req = currentValidWeb3j.platonEvidences();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Evidences evidences = req.send().getEvidences();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getprogramversion"></a>getProgramVersion<a class="hash-link" href="#getprogramversion" title="标题的直接链接">#</a></h3><blockquote><p>获取代码版本</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, AdminProgramVersion&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>AdminProgramVersion 属性中的 ProgramVersion 对象即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, AdminProgramVersion&gt; req = currentValidWeb3j.getProgramVersion();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ProgramVersion programVersion = req.send().getAdminProgramVersion();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><strong>ProgramVersion 对象解析</strong><ul><li>BigInteger ： version ： 代码版本</li><li>String ： sign ： 代码版本签名</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getschnorrnizkprove"></a>getSchnorrNIZKProve<a class="hash-link" href="#getschnorrnizkprove" title="标题的直接链接">#</a></h3><blockquote><p>获取 bls 的证明</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, AdminSchnorrNIZKProve&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>AdminSchnorrNIZKProve 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, AdminProgramVersion&gt; req = currentValidWeb3j.getSchnorrNIZKProve();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String res = req.send().getAdminSchnorrNIZKProve();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="geteconomicconfig"></a>getEconomicConfig<a class="hash-link" href="#geteconomicconfig" title="标题的直接链接">#</a></h3><blockquote><p>获取 PlatON 参数配置</p></blockquote><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, DebugEconomicConfig&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>DebugEconomicConfig 属性中的 String 即为对应存储数据</p><ul><li><strong>示例</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j platonWeb3j = Web3j.build(new HttpService(&quot;http://127.0.0.1:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Request&lt;?, DebugEconomicConfig&gt; req = currentValidWeb3j.getEconomicConfig();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String debugEconomicConfig = req.send().getEconomicConfigStr();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="系统合约调用"></a>系统合约调用<a class="hash-link" href="#系统合约调用" title="标题的直接链接">#</a></h2><p>系统接口主要包含经济模型和治理相关的合约接口：</p><ul><li>质押相关接口</li><li>委托相关接口</li><li>奖励相关接口</li><li>节点相关接口</li><li>治理相关接口</li><li>举报相关接口</li><li>锁仓相关接口</li></ul><p>如上接口的介绍和使用，请参考如下接口说明。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="质押相关接口"></a>质押相关接口<a class="hash-link" href="#质押相关接口" title="标题的直接链接">#</a></h3><blockquote><p>质押相关的接口：主要包括节点质押、修改质押信息、解除质押、查询质押信息等接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载质押合约"></a>加载质押合约<a class="hash-link" href="#加载质押合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//Java 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 201018;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(&quot;password&quot;, &quot;/path/to/walletfile&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">StakingContract stakingContract = StakingContract.load(web3j, credentials, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明"></a>接口说明<a class="hash-link" href="#接口说明" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="staking"></a><strong>staking</strong><a class="hash-link" href="#staking" title="标题的直接链接">#</a></h5><blockquote><p>节点质押：适用于矿工，节点质押后才有机会参与共识，获得收益。质押前需要自己的节点接入网络，质押时 rpc 链接地址必须是当前需要质押的节点。如果质押成功，节点会出现在候选人列表中。</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</li><li>BigInteger：stakingAmount 质押的金额，单位 VON，默认质押金额必须大于等于 1000000LAT，该大小限制可以通过治理参数动态调整，可通过治理接口获得当前值（proposalContract.getGovernParamValue(&quot;staking&quot;, &quot;stakeThreshold&quot;)）。</li><li>StakingAmountType：stakingAmountType 表示使用账户自由金额还是账户的锁仓金额做质押，StakingAmountType.FREE_AMOUNT_TYPE：自由金额，StakingAmountType.RESTRICTING_AMOUNT_TYPE：锁仓金额</li><li>String：benifitAddress 收益账户，用于接收出块奖励和质押奖励的收益账户。</li><li>String：nodeName 节点的名称</li><li>String：externalId 外部 Id(有长度限制，给第三方拉取节点描述的 Id)，目前为 keybase 账户公钥，节点图标是通过该公钥获取。</li><li>String：webSite 节点的第三方主页(有长度限制，表示该节点的主页)</li><li>String：details 节点的描述(有长度限制，表示该节点的描述)</li><li>ProgramVersion：processVersion 程序的真实版本，通过治理 rpc 获取</li><li>String：blsPubKey bls 的公钥</li><li>String：blsProof bls 的证明，通过治理 rpc 获取</li><li>BigInteger：rewardPer 委托所得到的奖励分成比例，1=0.01% 10000=100%</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigDecimal stakingAmount = Convert.toVon(&quot;1000000&quot;, Convert.Unit.ATP);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">StakingAmountType stakingAmountType = StakingAmountType.FREE_AMOUNT_TYPE;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String benifitAddress = &quot;atp1qtp5fqtmudzge9aqt9rnzgdxv729pdq560vrat&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String externalId = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeName = &quot;integration-node1&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String webSite = &quot;https://www.platon.network/#/&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String details = &quot;integration-node1-details&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String blsPubKey = &quot;5ccd6b8c32f2713faa6c9a46e5fb61ad7b7400e53fabcbc56bdc0c16fbfffe09ad6256982c7059e7383a9187ad93a002a7cda7a75d569f591730481a8b91b5fad52ac26ac495522a069686df1061fc184c31771008c1fedfafd50ae794778811&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger rewardPer = BigInteger.valueOf(1000L);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = stakingContract.stakingReturnTransaction(new StakingParam.Builder()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setNodeId(nodeId)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setAmount(stakingAmount.toBigInteger())</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setStakingAmountType(stakingAmountType)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setBenifitAddress(benifitAddress)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setExternalId(externalId)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setNodeName(nodeName)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setWebSite(webSite)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setDetails(details)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setBlsPubKey(blsPubKey)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setProcessVersion(web3j.getProgramVersion().send().getAdminProgramVersion())</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setBlsProof(web3j.getSchnorrNIZKProve().send().getAdminSchnorrNIZKProve())</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setRewardPer(rewardPer)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .build()).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = stakingContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unstaking"></a><strong>unStaking</strong><a class="hash-link" href="#unstaking" title="标题的直接链接">#</a></h5><blockquote><p>节点撤销质押(一次性发起全部撤销，多次到账)，成功后节点会从候选人列表移除。只能由该节点的质押钱包地址发起交易。</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = stakingContract.unStakingReturnTransaction(nodeId).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = stakingContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updatestaking"></a><strong>updateStaking</strong><a class="hash-link" href="#updatestaking" title="标题的直接链接">#</a></h5><blockquote><p>修改质押信息，只能由该节点的质押钱包地址发起交易。</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</li><li>String：benifitAddress 收益账户，用于接收出块奖励和质押奖励的收益账户。</li><li>String：nodeName 节点的名称</li><li>String：externalId 外部 Id(有长度限制，给第三方拉取节点描述的 Id)，目前为 keybase 账户公钥，节点图标是通过该公钥获取。</li><li>String：webSite 节点的第三方主页(有长度限制，表示该节点的主页)</li><li>String：details 节点的描述(有长度限制，表示该节点的描述)</li><li>BigInteger：rewardPer 委托所得到的奖励分成比例，1=0.01% 10000=100%</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String benifitAddress = &quot;atp1qtp5fqtmudzge9aqt9rnzgdxv729pdq560vrat&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String externalId = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeName = &quot;integration-node1-u&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String webSite = &quot;https://www.platon.network/#/&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String details = &quot;integration-node1-details-u&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger rewardPer = BigInteger.valueOf(1000L);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = stakingContract.updateStakingInfoReturnTransaction(new UpdateStakingParam.Builder()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setBenifitAddress(benifitAddress)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setExternalId(externalId)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setNodeId(nodeId)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setNodeName(nodeName)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setWebSite(webSite)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setDetails(details)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .setRewardPer(rewardPer)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .build()).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = stakingContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="addstaking"></a><strong>addStaking</strong><a class="hash-link" href="#addstaking" title="标题的直接链接">#</a></h5><blockquote><p>增持质押，增加已质押节点质押金，只能由该节点的质押钱包地址发起交易。</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</li><li>StakingAmountType：stakingAmountType 表示使用账户自由金额还是账户的锁仓金额做质押，StakingAmountType.FREE_AMOUNT_TYPE：自由金额，StakingAmountType.RESTRICTING_AMOUNT_TYPE：锁仓金额</li><li>BigInteger：addStakingAmount 增持的金额，单位 VON</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">StakingAmountType stakingAmountType = StakingAmountType.FREE_AMOUNT_TYPE;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigDecimal addStakingAmount = Convert.toVon(&quot;4000000&quot;, Convert.Unit.ATP);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = stakingContract.addStakingReturnTransaction(nodeId, stakingAmountType, addStakingAmount.toBigInteger()).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = stakingContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getstakinginfo"></a><strong>getStakingInfo</strong><a class="hash-link" href="#getstakinginfo" title="标题的直接链接">#</a></h5><blockquote><p>查询当前节点的质押信息</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;Node&gt; baseRespons</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;Node&gt;描述<ul><li>int： code 结果标识，0 为成功</li><li>Node：data Node 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Node</strong>：保存当前节点质押信息的对象</p><ul><li><p>String：benifitAddress 收益账户，用于接收出块奖励和质押奖励的收益账户。</p></li><li><p>String：details 节点的描述(有长度限制，表示该节点的描述)</p></li><li><p>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</p></li><li><p>String：nodeName 节点的名称</p></li><li><p>BigInteger：programVersion 程序的真实版本，通过治理 rpc 获取</p></li><li><p>BigInteger：released 发起质押账户的自由金额的锁定期质押的 VON</p></li><li><p>BigInteger：releasedHes 发起质押账户的自由金额的犹豫期质押的 VON</p></li><li><p>BigInteger：restrictingPlan 发起质押账户的锁仓金额的锁定期质押的 VON</p></li><li><p>BigInteger：restrictingPlanHes 发起质押账户的锁仓金额的犹豫期质押的 VON</p></li><li><p>BigInteger：shares 当前候选人总共质押加被委托的 VON 数目</p></li><li><p>String：stakingAddress 发起质押时使用的账户(撤销质押时，VON 会被退回该账户或者该账户的锁仓信息中)</p></li><li><p>BigInteger：stakingBlockNum 发起质押时的区块高度</p></li><li><p>BigInteger：stakingEpoch 当前变更质押金额时的结算周期</p></li><li><p>BigInteger：stakingTxIndex 发起质押时的交易索引</p></li><li><p>BigInteger：status 候选人的状态，0: 节点可用，1: 节点不可用 ，2:节点出块率低但没有达到移除条件的，4:节点的 VON 不足最低质押门槛，8:节点被举报双签，16:节点出块率低且达到移除条件, 32: 节点主动发起撤销</p></li><li><p>BigInteger：validatorTerm 验证人的任期</p></li><li><p>String：website 节点的第三方主页(有长度限制，表示该节点的主页)</p></li><li><p>BigInteger：delegateEpoch 节点最后一次被委托的结算周期</p></li><li><p>BigInteger：delegateTotal 节点被委托的生效总数量</p></li><li><p>BigInteger：delegateTotalHes 节点被委托的未生效总数量</p></li><li><p>BigInteger：delegateRewardTotal 候选人当前发放的总委托奖励</p></li><li><p>BigInteger：nextRewardPer 下一个结算周期奖励分成比例，1=0.01% 10000=100%</p></li><li><p>BigInteger：rewardPer 当前结算周期奖励分成比例，1=0.01% 10000=100%</p></li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;Node&gt; baseResponse = stakingContract.getStakingInfo(nodeId).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getpackagereward"></a><strong>getPackageReward</strong><a class="hash-link" href="#getpackagereward" title="标题的直接链接">#</a></h5><blockquote><p>查询当前结算周期的区块奖励</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;BigInteger&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>BigInteger：reward 当前结算周期的区块奖励</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><strong>Java SDK 合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; response = stakingContract.getPackageReward().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getstakingreward"></a><strong>getStakingReward</strong><a class="hash-link" href="#getstakingreward" title="标题的直接链接">#</a></h5><blockquote><p>查询当前结算周期的质押奖励</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;Node&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>BigInteger：reward 当前结算周期的质押奖励</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><strong>Java SDK 合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; response = stakingContract.getStakingReward().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getavgpacktime"></a><strong>getAvgPackTime</strong><a class="hash-link" href="#getavgpacktime" title="标题的直接链接">#</a></h5><blockquote><p>查询打包区块的平均时间</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;BigInteger&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>BigInteger：data 打包区块的平均时间（单位为毫秒）</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><strong>Java SDK 合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; response = stakingContract.getAvgPackTime().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="委托相关接口"></a>委托相关接口<a class="hash-link" href="#委托相关接口" title="标题的直接链接">#</a></h3><blockquote><p>PlatON 经济模型中委托人相关的合约接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载委托合约"></a>加载委托合约<a class="hash-link" href="#加载委托合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//Java 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 201018;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(&quot;password&quot;, &quot;/path/to/walletfile&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DelegateContract delegateContract = DelegateContract.load(web3j, credentials, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明-1"></a>接口说明<a class="hash-link" href="#接口说明-1" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="delegate"></a><strong>delegate</strong><a class="hash-link" href="#delegate" title="标题的直接链接">#</a></h5><blockquote><p>发起委托，委托已质押节点，委托给某个节点增加节点权重来获取收入</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，即节点公钥，可以通过管理台查询（platon attach <a href="http://127.0.0.1:6789" target="_blank" rel="noopener noreferrer">http://127.0.0.1:6789</a> --exec &quot;admin.nodeInfo.id&quot;）。</li><li>StakingAmountType：stakingAmountType 表示使用账户自由金额还是账户的锁仓金额做质押，StakingAmountType.FREE_AMOUNT_TYPE：自由金额，StakingAmountType.RESTRICTING_AMOUNT_TYPE：锁仓金额</li><li>BigInteger：amount 委托的金额，单位 VON，默认委托金额必须大于等于 10LAT，该大小限制可以通过治理参数动态调整，可通过治理接口获得当前值（proposalContract.getGovernParamValue(&quot;staking&quot;, &quot;operatingThreshold&quot;)）。</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">StakingAmountType stakingAmountType = StakingAmountType.FREE_AMOUNT_TYPE;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigDecimal amount = Convert.toVon(&quot;500000&quot;, Convert.Unit.ATP);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = delegateContract.delegateReturnTransaction(nodeId, stakingAmountType, amount.toBigInteger()).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = delegateContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getrelatedlistbydeladdr"></a><strong>getRelatedListByDelAddr</strong><a class="hash-link" href="#getrelatedlistbydeladdr" title="标题的直接链接">#</a></h5><blockquote><p>查询当前账户地址所委托的节点的 NodeID 和质押 Id</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：address 委托人的账户地址</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;DelegationIdInfo&gt;&gt; baseRespons</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;DelegationIdInfo&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>List&lt;DelegationIdInfo&gt;：data DelegationIdInfo 对象列表</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>DelegationIdInfo</strong>：保存当前账户地址所委托的节点的 NodeID 和质押区块高度的对象</p><ul><li>String：address 委托人的账户地址</li><li>String：nodeId 验证人的节点 Id</li><li>BigInteger：stakingBlockNum 发起质押时的区块高度</li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;DelegationIdInfo&gt;&gt; baseResponse = delegateContract.getRelatedListByDelAddr(delegateCredentials.getAddress()).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getdelegateinfo"></a><strong>getDelegateInfo</strong><a class="hash-link" href="#getdelegateinfo" title="标题的直接链接">#</a></h5><blockquote><p>查询当前单个委托信息</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：address 委托人的账户地址</li><li>String：nodeId 节点 id，16 进制格式，0x 开头</li><li>BigInteger：stakingBlockNum 发起质押时的区块高度</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;Delegation&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;Delegation&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>Delegation：data Delegation 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Delegation</strong>：保存当前委托账户委托信息的对象</p><ul><li>String：delegateAddress 委托人的账户地址</li><li>String：nodeId 验证人的节点 Id</li><li>BigInteger：stakingBlockNum 发起质押时的区块高度</li><li>BigInteger：delegateEpoch 最近一次对该候选人发起的委托时的结算周期</li><li>BigInteger：delegateReleased 发起委托账户的自由金额的锁定期委托的 VON</li><li>BigInteger：delegateReleasedHes 发起委托账户的自由金额的犹豫期委托的 VON</li><li>BigInteger：delegateLocked 发起委托账户的锁仓金额的锁定期委托的 VON</li><li>BigInteger：delegateLockedHes 发起委托账户的锁仓金额的犹豫期质押的 VON</li><li>BigInteger：cumulativeIncome 待领取的委托收益</li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String address = &quot;atp1qtp5fqtmudzge9aqt9rnzgdxv729pdq560vrat&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger stakingBlockNum = new BigInteger(&quot;10888&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;Delegation&gt; baseResponse = delegateContract.getDelegateInfo(nodeId, address, stakingBlockNum).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="undelegate"></a><strong>unDelegate</strong><a class="hash-link" href="#undelegate" title="标题的直接链接">#</a></h5><blockquote><p>减持/撤销委托(全部减持就是撤销)</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：nodeId 节点 id，16 进制格式，0x 开头</li><li>BigInteger：stakingBlockNum 委托节点的质押块高，代表着某个 node 的某次质押的唯一标示</li><li>BigInteger：stakingAmount 减持的委托金额(按照最小单位算，1LAT = 10**18 VON)</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><p><strong>解交易回执</strong></p><ul><li>BigInteger：reward 获得解除委托时所提取的委托收益</li></ul></li><li><p><strong>合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String nodeId = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigDecimal stakingAmount = Convert.toVon(&quot;500000&quot;, Convert.Unit.ATP);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger stakingBlockNum = new BigInteger(&quot;12134&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = delegateContract.unDelegateReturnTransaction(nodeId, stakingBlockNum, stakingAmount.toBigInteger()).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = delegateContract.getTransactionResponse(platonSendTransaction).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(baseResponse.isStatusOk()){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    BigInteger reward = delegateContract.decodeUnDelegateLog(baseResponse.getTransactionReceipt());</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="奖励相关接口"></a>奖励相关接口<a class="hash-link" href="#奖励相关接口" title="标题的直接链接">#</a></h3><blockquote><p>PlatON 经济模型中奖励相关的合约接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载奖励合约"></a>加载奖励合约<a class="hash-link" href="#加载奖励合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//Java 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 201018;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(&quot;password&quot;, &quot;/path/to/walletfile&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RewardContract rewardContract = RewardContract.load(web3j, deleteCredentials, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明-2"></a>接口说明<a class="hash-link" href="#接口说明-2" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="withdrawdelegatereward"></a><strong>withdrawDelegateReward</strong><a class="hash-link" href="#withdrawdelegatereward" title="标题的直接链接">#</a></h5><blockquote><p>提取账户当前所有的可提取的委托奖励</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><p><strong>解交易回执</strong></p><ul><li>String：nodeId 节点 ID</li><li>BigInteger：stakingNum 节点的质押块高</li><li>BigInteger：reward 领取到的收益</li></ul></li><li><p><strong>合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = rewardContract.withdrawDelegateRewardReturnTransaction().send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = rewardContract.getTransactionResponse(platonSendTransaction).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(baseResponse.isStatusOk()){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    List&lt;Reward&gt; rewardList = rewardContract.decodeWithdrawDelegateRewardLog(baseResponse.getTransactionReceipt());</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getdelegatereward"></a><strong>getDelegateReward</strong><a class="hash-link" href="#getdelegatereward" title="标题的直接链接">#</a></h5><blockquote><p>查询当前账号可提取奖励明细</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：address 委托人的账户地址</li><li>List&lt;String&gt;： nodeList 节点列表，如果为空查全部</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Reward&gt;&gt; baseRespons</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;Reward&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>List&lt;Reward&gt;：data Reward 对象列表</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Reward</strong>：奖励明细</p><ul><li>String：nodeId 节点 ID</li><li>BigInteger：stakingNum 节点的质押块高</li><li>BigInteger：reward 领取到的收益</li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;String&gt; nodeList = new ArrayList&lt;&gt;();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nodeList.add(nodeId);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Reward&gt;&gt; baseResponse = rewardContract.getDelegateReward(delegateAddress, nodeList).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="节点相关合约"></a>节点相关合约<a class="hash-link" href="#节点相关合约" title="标题的直接链接">#</a></h3><blockquote><p>PlatON 经济模型中委托人相关的合约接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载节点合约"></a>加载节点合约<a class="hash-link" href="#加载节点合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//Java 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 201018;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(&quot;password&quot;, &quot;/path/to/walletfile&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NodeContract nodeContract = NodeContract.load(web3j, credentials, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明-3"></a>接口说明<a class="hash-link" href="#接口说明-3" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getverifierlist"></a><strong>getVerifierList</strong><a class="hash-link" href="#getverifierlist" title="标题的直接链接">#</a></h5><blockquote><p>查询当前结算周期的验证人队列</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Node&gt;&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;Node&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>List&lt;Node&gt;：data nodeList 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Node</strong>：保存单个当前结算周期验证节点信息的对象</p><ul><li><p>String：nodeId 被质押的节点 Id(也叫候选人的节点 Id)</p></li><li><p>String：stakingAddress 发起质押时使用的账户(撤销质押时，VON 会被退回该账户或者该账户的锁仓信息中)</p></li><li><p>String：benifitAddress 用于接受出块奖励和质押奖励的收益账户</p></li><li><p>BigInteger：rewardPer 当前结算周期奖励分成比例</p></li><li><p>BigInteger：nextRewardPer 下一个结算周期奖励分成比例</p></li><li><p>BigInteger：stakingTxIndex 发起质押时的交易索引</p></li><li><p>BigInteger：programVersion 被质押节点的 PlatON 进程的真实版本号(获取版本号的接口由治理提供)</p></li><li><p>BigInteger：stakingBlockNum 发起质押时的区块高度</p></li><li><p>BigInteger：shares 当前候选人总共质押加被委托的 VON 数目</p></li><li><p>String：externalId 外部 Id(有长度限制，给第三方拉取节点描述的 Id)，目前为 keybase 账户公钥，节点图标是通过该公钥获取。</p></li><li><p>String：nodeName 被质押节点的名称(有长度限制，表示该节点的名称)</p></li><li><p>String：website 节点的第三方主页(有长度限制，表示该节点的主页)</p></li><li><p>String：details 节点的描述(有长度限制，表示该节点的描述)</p></li><li><p>BigInteger：validatorTerm 验证人的任期</p></li><li><p>BigInteger：delegateTotal 节点被委托的生效总数量</p></li><li><p>BigInteger：delegateRewardTotal 候选人当前发放的总委托奖励</p></li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Node&gt;&gt; baseResponse = nodeContract.getVerifierList().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getvalidatorlist"></a><strong>getValidatorList</strong><a class="hash-link" href="#getvalidatorlist" title="标题的直接链接">#</a></h5><blockquote><p>查询当前共识周期的验证人列表</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Node&gt;&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;Node&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>List&lt;Node&gt;：data nodeList 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Node</strong>：保存单个当前共识周期验证节点信息的对象</p><ul><li><p>String：nodeId 被质押的节点 Id(也叫候选人的节点 Id)</p></li><li><p>String：stakingAddress 发起质押时使用的账户(撤销质押时，VON 会被退回该账户或者该账户的锁仓信息中)</p></li><li><p>String：benifitAddress 用于接受出块奖励和质押奖励的收益账户</p></li><li><p>BigInteger：rewardPer 当前结算周期奖励分成比例</p></li><li><p>BigInteger：nextRewardPer 下一个结算周期奖励分成比例</p></li><li><p>BigInteger：stakingTxIndex 发起质押时的交易索引</p></li><li><p>BigInteger：programVersion 被质押节点的 PlatON 进程的真实版本号(获取版本号的接口由治理提供)</p></li><li><p>BigInteger：stakingBlockNum 发起质押时的区块高度</p></li><li><p>BigInteger：shares 当前候选人总共质押加被委托的 VON 数目</p></li><li><p>String：externalId 外部 Id(有长度限制，给第三方拉取节点描述的 Id)，目前为 keybase 账户公钥，节点图标是通过该公钥获取。</p></li><li><p>String：nodeName 被质押节点的名称(有长度限制，表示该节点的名称)</p></li><li><p>String：website 节点的第三方主页(有长度限制，表示该节点的主页)</p></li><li><p>String：details 节点的描述(有长度限制，表示该节点的描述)</p></li><li><p>BigInteger：validatorTerm 验证人的任期</p></li><li><p>BigInteger：delegateTotal 节点被委托的生效总数量</p></li><li><p>BigInteger：delegateRewardTotal 候选人当前发放的总委托奖励</p></li><li><p>BigInteger：nextRewardPer 下一个结算周期奖励分成比例</p></li><li><p>BigInteger：rewardPer 当前结算周期奖励分成比例</p></li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Node&gt;&gt; baseResponse = nodeContract.getValidatorList().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getcandidatelist"></a><strong>getCandidateList</strong><a class="hash-link" href="#getcandidatelist" title="标题的直接链接">#</a></h5><blockquote><p>查询所有实时的候选人列表</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Node&gt;&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;Node&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>List&lt;Node&gt;：data nodeList 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Node</strong>：保存单个候选节点信息对象</p><ul><li><p>String：nodeId 被质押的节点 Id(也叫候选人的节点 Id)</p></li><li><p>String：stakingAddress 发起质押时使用的账户(撤销质押时，VON 会被退回该账户或者该账户的锁仓信息中)</p></li><li><p>String：benifitAddress 用于接受出块奖励和质押奖励的收益账户</p></li><li><p>BigInteger：rewardPer 当前结算周期奖励分成比例</p></li><li><p>BigInteger：nextRewardPer 下一个结算周期奖励分成比例</p></li><li><p>BigInteger：stakingTxIndex 发起质押时的交易索引</p></li><li><p>BigInteger：programVersion 被质押节点的 PlatON 进程的真实版本号(获取版本号的接口由治理提供)</p></li><li><p>BigInteger：status 候选人的状态，0: 节点可用，1: 节点不可用 ，2:节点出块率低但没有达到移除条件的，4:节点的 VON 不足最低质押门槛，8:节点被举报双签，16:节点出块率低且达到移除条件, 32: 节点主动发起撤销</p></li><li><p>BigInteger：stakingEpoch 当前变更质押金额时的结算周期</p></li><li><p>BigInteger：stakingBlockNum 发起质押时的区块高度</p></li><li><p>BigInteger：shares 当前候选人总共质押加被委托的 VON 数目</p></li><li><p>BigInteger：released 发起质押账户的自由金额的锁定期质押的 VON</p></li><li><p>BigInteger：releasedHes 发起质押账户的自由金额的犹豫期质押的 VON</p></li><li><p>BigInteger：restrictingPlan 发起质押账户的锁仓金额的锁定期质押的 VON</p></li><li><p>BigInteger：restrictingPlanHes 发起质押账户的锁仓金额的犹豫期质押的 VON</p></li><li><p>String：externalId 外部 Id(有长度限制，给第三方拉取节点描述的 Id)，目前为 keybase 账户公钥，节点图标是通过该公钥获取。</p></li><li><p>String：nodeName 被质押节点的名称(有长度限制，表示该节点的名称)</p></li><li><p>String：website 节点的第三方主页(有长度限制，表示该节点的主页)</p></li><li><p>String：details 节点的描述(有长度限制，表示该节点的描述)</p></li><li><p>BigInteger：delegateEpoch 节点最后一次被委托的结算周期</p></li><li><p>BigInteger：delegateTotal 节点被委托的生效总数量</p></li><li><p>BigInteger：delegateTotalHes 节点被委托的未生效总数量</p></li><li><p>BigInteger：delegateRewardTotal 候选人当前发放的总委托奖励</p></li></ul></li><li><p><strong>Java SDK 合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Node&gt;&gt; baseResponse = nodeContract.getCandidateList().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="治理相关合约"></a>治理相关合约<a class="hash-link" href="#治理相关合约" title="标题的直接链接">#</a></h3><blockquote><p>PlatON 治理相关的合约接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载治理合约"></a>加载治理合约<a class="hash-link" href="#加载治理合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//Java 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 201018;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(&quot;password&quot;, &quot;/path/to/walletfile&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ProposalContract proposalContract = ProposalContract.load(web3j, credentials, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明-4"></a>接口说明<a class="hash-link" href="#接口说明-4" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="submitproposal"></a><strong>submitProposal</strong><a class="hash-link" href="#submitproposal" title="标题的直接链接">#</a></h5><blockquote><p>提交提案</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>Proposal：提案对象</li></ul></li><li><p><strong>文本提案 Proposal.createSubmitTextProposalParam()</strong></p><ul><li>String：verifier 提交提案的验证人</li><li>String：pIDID PIPID</li></ul></li><li><p><strong>升级提案 Proposal.createSubmitVersionProposalParam()</strong></p><ul><li>String：verifier 提交提案的验证人</li><li>String：pIDID PIPID</li><li>BigInteger：newVersion 升级版本</li><li>BigInteger：endVotingRounds 投票共识轮数量。说明：假设提交提案的交易，被打包进块时的共识轮序号时 round1，则提案投票截止块高，就是 round1 + endVotingRounds 这个共识轮的第 230 个块高（假设一个共识轮出块 250，ppos 揭榜提前 20 个块高，250，20 都是可配置的 ），其中 0 &lt; endVotingRounds &lt;= 4840（约为 2 周，实际论述根据配置可计算），且为整数）</li></ul></li><li><p><strong>参数提案 Proposal.createSubmitParamProposalParam()</strong></p><ul><li>String：verifier 提交提案的验证人</li><li>String：pIDID PIPID</li><li>String：module 参数模块</li><li>String：name 参数名称</li><li>String：newValue 参数新值</li></ul></li><li><p><strong>取消提案 Proposal.createSubmitCancelProposalParam()</strong></p><ul><li>String：verifier 提交提案的验证人</li><li>String：pIDID PIPID</li><li>BigInteger：endVotingRounds 投票共识轮数量。参考提交升级提案的说明，同时，此接口中此参数的值不能大于对应升级提案中的</li><li>String：tobeCanceledProposalID 待取消的提案 ID</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Proposal proposal = Proposal.createSubmitTextProposalParam(proposalNodeId,&quot;1&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = proposalContract.submitProposalReturnTransaction(proposal).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = proposalContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="vote"></a><strong>vote</strong><a class="hash-link" href="#vote" title="标题的直接链接">#</a></h5><blockquote><p>给提案投票</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>ProgramVersion:ProgramVersion 程序的真实版本，治理 rpc 接口 admin_getProgramVersion 获取</li><li>VoteOption：voteOption 投票类型，YEAS 赞成票，NAYS 反对票，ABSTENTIONS 弃权票</li><li>String：proposalID 提案 ID</li><li>String：verifier 声明的节点，只能是验证人/候选人</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong>：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ProgramVersion programVersion = web3j.getProgramVersion().send().getAdminProgramVersion();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">VoteOption voteOption =  VoteOption.YEAS;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String proposalID = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String verifier = &quot;77fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c82055499050&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = proposalContract.voteReturnTransaction(programVersion, voteOption, proposalID, verifier).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = proposalContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getproposal"></a><strong>getProposal</strong><a class="hash-link" href="#getproposal" title="标题的直接链接">#</a></h5><blockquote><p>查询提案</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：proposalID 提案 id</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;Proposal&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;Proposal&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>Proposal：data Proposal 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Proposal</strong>：保存单个提案信息的对象</p><ul><li>String: proposalId 提案 ID</li><li>String: proposer 提案节点 ID</li><li>int: proposalType 提案类型， 0x01：文本提案； 0x02：升级提案；0x03 参数提案 0x04 取消提案</li><li>String: piPid 提案 PIPID</li><li>BigInteger: submitBlock 提交提案的块高</li><li>BigInteger: endVotingBlock 提案投票结束的块高</li><li>BigInteger: newVersion 升级版本</li><li>BigInteger: toBeCanceled 提案要取消的升级提案 ID</li><li>BigInteger: activeBlock 提案生效块高，系统根据 EndVotingBlock 算出</li><li>String: verifier 提交提案的验证人</li></ul></li><li><p><strong>合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//提案id</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String proposalID = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;Proposal&gt; baseResponse = proposalContract.getProposal(proposalID).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gettallyresult"></a><strong>getTallyResult</strong><a class="hash-link" href="#gettallyresult" title="标题的直接链接">#</a></h5><blockquote><p>查询提案结果</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：proposalID 提案 ID</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;TallyResult&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;TallyResult&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>TallyResult：data TallyResult 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>TallyResult</strong>：保存单个提案结果的对象</p><ul><li>String: proposalID 提案 ID</li><li>BigInteger: yeas 赞成票票数</li><li>BigInteger: nays 反对票票数</li><li>BigInteger: abstentions 弃权票票数</li><li>BigInteger: accuVerifiers 在整个投票期内有投票资格的验证人总数</li><li>int: status 提案状态</li></ul></li><li><p><strong>status</strong></p><ul><li>1 投票中</li><li>2 投票通过</li><li>3 投票失败</li><li>4 （升级提案）预生效</li><li>5 （升级提案）生效</li><li>6 被取消</li></ul></li><li><p><strong>合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//提案id</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String proposalID =&quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;TallyResult&gt; baseResponse = proposalContract.getTallyResult(proposalID).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getproposallist"></a><strong>getProposalList</strong><a class="hash-link" href="#getproposallist" title="标题的直接链接">#</a></h5><blockquote><p>查询提案列表</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Proposal&gt;&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;List&lt;Proposal&gt;&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>List&lt;Proposal&gt;：data ProposalList 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>Proposal</strong>：保存单个提案的对象</p><ul><li>String: proposalId 提案 ID</li><li>String: proposer 提案节点 ID</li><li>int: proposalType 提案类型， 0x01：文本提案； 0x02：升级提案；0x03 参数提案</li><li>String: piPid 提案 PIPID</li><li>BigInteger: submitBlock 提交提案的块高</li><li>BigInteger: endVotingBlock 提案投票结束的块高</li><li>BigInteger: newVersion 升级版本</li><li>String: toBeCanceled 提案要取消的升级提案 ID</li><li>BigInteger: activeBlock 提案生效块高，系统根据 EndVotingBlock 算出</li><li>String: verifier 提交提案的验证人</li></ul></li><li><p><strong>合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;List&lt;Proposal&gt;&gt; baseResponse = proposalContract.getProposalList().send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="declareversion"></a><strong>declareVersion</strong><a class="hash-link" href="#declareversion" title="标题的直接链接">#</a></h5><blockquote><p>版本声明</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>ProgramVersion:ProgramVersion 程序的真实版本，治理 rpc 接口 admin_getProgramVersion 获取</li><li>String：verifier 声明的节点，只能是验证人/候选人</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ProgramVersion programVersion = web3j.getProgramVersion().send().getAdminProgramVersion();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String verifier = &quot;&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = proposalContract.declareVersionReturnTransaction(programVersion,verifier).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = proposalContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getactiveversion"></a><strong>getActiveVersion</strong><a class="hash-link" href="#getactiveversion" title="标题的直接链接">#</a></h5><blockquote><p>查询节点的链生效版本</p></blockquote><ul><li><p><strong>入参</strong></p><p>无</p></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;BigInteger&gt;： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>BigInteger：data 版本信息</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;BigInteger&gt; baseResponse = proposalContract.getActiveVersion().send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ProposalUtils.versionInterToStr(baseResponse.getData());</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="双签举报相关接口"></a>双签举报相关接口<a class="hash-link" href="#双签举报相关接口" title="标题的直接链接">#</a></h3><blockquote><p>PlatON 举报惩罚相关的合约接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载举报合约"></a>加载举报合约<a class="hash-link" href="#加载举报合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Java 8</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Web3j</span><span class="token plain"> web3j </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Web3j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">HttpService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost:6789&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">201018</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Credentials</span><span class="token plain"> credentials </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">WalletUtils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">loadCredentials</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;password&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/path/to/walletfile&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">SlashContract</span><span class="token plain"> contract </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">SlashContract</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">load</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">web3j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> chainId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明-5"></a>接口说明<a class="hash-link" href="#接口说明-5" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reportdoublesign"></a><strong>reportDoubleSign</strong><a class="hash-link" href="#reportdoublesign" title="标题的直接链接">#</a></h5><blockquote><p>举报双签</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>DuplicateSignType：DuplicateSignType 枚举，代表双签类型：PREPARE_BLOCK，PREPARE_VOTE，VIEW_CHANGE</li><li>String：data 单个证据的 json 值，格式参照<a href="#evidences_interface">RPC 接口 Evidences</a></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String data = &quot;&quot;;   //举报证据</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = slashContract.reportDoubleSignReturnTransaction(DuplicateSignType.PREPARE_BLOCK, data).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = slashContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="checkduplicatesign"></a><strong>checkDuplicateSign</strong><a class="hash-link" href="#checkduplicatesign" title="标题的直接链接">#</a></h5><blockquote><p>查询节点是否已被举报过多签</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>DuplicateSignType：DuplicateSignType 枚举，代表双签类型：prepareBlock，EprepareVote，viewChange</li><li>String：address 举报的节点地址</li><li>BigInteger：blockNumber 多签的块高</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：data Y, 可能为零交易 Hash，即: 0x000...000</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;String&gt; baseResponse = slashContract.checkDoubleSign(DuplicateSignType.PREPARE_BLOCK, &quot;atp1qtp5fqtmudzge9aqt9rnzgdxv729pdq560vrat&quot;, BigInteger.valueOf(500L)).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="锁仓相关接口"></a>锁仓相关接口<a class="hash-link" href="#锁仓相关接口" title="标题的直接链接">#</a></h3><blockquote><p>PlatON 举报惩罚相关的合约接口</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="加载锁仓合约"></a>加载锁仓合约<a class="hash-link" href="#加载锁仓合约" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//Java 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Web3j web3j = Web3j.build(new HttpService(&quot;http://localhost:6789&quot;));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">long chainId = 201018;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Credentials credentials = WalletUtils.loadCredentials(&quot;password&quot;, &quot;/path/to/walletfile&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RestrictingPlanContract contract = RestrictingPlanContract.load(web3j, credentials, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口说明-6"></a>接口说明<a class="hash-link" href="#接口说明-6" title="标题的直接链接">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="createrestrictingplan"></a><strong>createRestrictingPlan</strong><a class="hash-link" href="#createrestrictingplan" title="标题的直接链接">#</a></h5><blockquote><p>创建锁仓计划</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：address 锁仓释放到账账户</li><li>List&lt;RestrictingPlan&gt;：plan 锁仓计划列表（数组）<ul><li>epoch：锁仓的周期，表示结算周期的倍数</li><li>amount：表示目标区块上待释放的金额。</li></ul></li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>TransactionResponse： 通用应答包<ul><li>int：code 结果标识，0 为成功</li><li>String：errMsg 错误信息，失败时存在</li><li>TransactionReceipt：transactionReceipt 交易的回执</li></ul></li></ul><ul><li><strong>合约使用</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;RestrictingPlan&gt; restrictingPlans = new ArrayList&lt;&gt;();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">restrictingPlans.add(new RestrictingPlan(BigInteger.valueOf(100), new BigInteger(&quot;100000000000000000000&quot;)));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">restrictingPlans.add(new RestrictingPlan(BigInteger.valueOf(200), new BigInteger(&quot;200000000000000000000&quot;)));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PlatonSendTransaction platonSendTransaction = restrictingPlanContract.createRestrictingPlanReturnTransaction(restrictingRecvCredentials.getAddress(), restrictingPlans).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionResponse baseResponse = restrictingPlanContract.getTransactionResponse(platonSendTransaction).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getrestrictinginfo"></a><strong>getRestrictingInfo</strong><a class="hash-link" href="#getrestrictinginfo" title="标题的直接链接">#</a></h5><blockquote><p>获取锁仓计划</p></blockquote><ul><li><p><strong>入参</strong></p><ul><li>String：address 锁仓释放到账账户</li></ul></li><li><p><strong>返回值</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;RestrictingItem&gt; baseResponse</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>CallResponse&lt;RestrictingItem&gt;描述<ul><li>int：code 结果标识，0 为成功</li><li>RestrictingItem：Data RestrictingItem 对象数据</li><li>String：errMsg 错误信息，失败时存在</li></ul></li></ul><ul><li><p><strong>RestrictingItem</strong>：保存锁仓信息对象</p><ul><li>BigInteger：balance 锁仓余额</li><li>BigInteger：pledge 质押/抵押金额</li><li>BigInteger：debt 欠释放金额</li><li>List&lt;RestrictingInfo&gt;：info 锁仓分录信息</li></ul></li><li><p><strong>RestrictingInfo</strong>：保存单个锁仓分录信息的对象</p><ul><li>BigInteger：blockNumber 释放区块高度</li><li>BigInteger：amount 释放金额</li></ul></li><li><p><strong>合约使用</strong></p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CallResponse&lt;RestrictingItem&gt; baseResponse = restrictingPlanContract.getRestrictingInfo(restrictingRecvCredentials.getAddress()).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solidity-合约调用"></a>Solidity 合约调用<a class="hash-link" href="#solidity-合约调用" title="标题的直接链接">#</a></h2><p>将 Solidity 智能合约部署到区块链上时，必须先将其编译成字节码的格式，然后将其作为交易的一部分发送。Java SDK 将帮你生成 Solidity 智能合约对应的 Java 包装类，可以方便的部署 Solidity 智能合约以及调用 Solidity 智能合约中的交易方法、事件和常量方法。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="编译-solidity-源代码"></a>编译 solidity 源代码<a class="hash-link" href="#编译-solidity-源代码" title="标题的直接链接">#</a></h3><ul><li>通过<code>solc</code>编译器编译 solidity 源代码，请根据合约声明的编译器版本下载对应 solc 编译器版本(<a href="https://github.com/PlatONnetwork/solidity/releases" target="_blank" rel="noopener noreferrer">solc 下载</a>)：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ solc </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.sol --bin --abi --optimize -o </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">output-dir</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p><code>bin</code>，输出包含十六进制编码的 solidity 二进制文件以提供交易请求。
<code>abi</code>，输出一个 solidity 的应用程序二进制接口（<code>ABI</code>）文件，它详细描述了所有可公开访问的合约方法及其相关参数。<code>abi</code>文件也用于生成 solidity 智能合约对应的 Java 包装类。</p><ul><li>使用<code>platon-truffle</code>编译 solidity 源代码(<a href="https://platon-truffle.readthedocs.io/en/v0.13.2/getting-started/installation.html#" target="_blank" rel="noopener noreferrer">platon-truffle 开发工具安装参考</a>|<a href="https://platon-truffle.readthedocs.io/en/v0.13.2/" target="_blank" rel="noopener noreferrer">platon-truffle 开发工具使用手册</a>)：</li></ul><blockquote><p><strong>step1.</strong> 使用 platon-truffle 初始化项目</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">在安装有platon</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">truffle的服务器上面先初始化一个工程。</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir </span><span class="token maybe-class-name">HelloWorld</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd </span><span class="token maybe-class-name">HelloWorld</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">truffle init</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">提示如下表示成功：</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✔ </span><span class="token maybe-class-name">Preparing</span><span class="token plain"> to download</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✔ </span><span class="token maybe-class-name">Downloading</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✔ </span><span class="token maybe-class-name">Cleaning</span><span class="token plain"> up temporary files</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✔ </span><span class="token maybe-class-name">Setting</span><span class="token plain"> up box</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token maybe-class-name">Unbox</span><span class="token plain"> successful</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">Sweet</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token maybe-class-name">Commands</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token maybe-class-name">Compile</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">        truffle compile</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token maybe-class-name">Migrate</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">        truffle migrate</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token maybe-class-name">Test</span><span class="token plain"> contracts</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> truffle test</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p><strong>step2.</strong> 将 HelloWorld.sol 放入 HelloWorld/contracts 目录下</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">guest@guest</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">~</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">HelloWorld</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">contracts$ ls</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">HelloWorld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sol</span><span class="token plain">  </span><span class="token maybe-class-name">Migrations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sol</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p><strong>step3.</strong> 修改 truffle-config.js 文件，将编译器版本修改成“^0.5.13”</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">compilers</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    solc</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       version</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^0.5.13&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Fetch exact version from solc-bin (default: truffle&#x27;s version)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// docker: true,        // Use &quot;0.5.1&quot; you&#x27;ve installed locally with docker (default: false)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// settings: {          // See the solidity docs for advice about optimization and evmVersion</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//  optimizer: {</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//    enabled: false,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//    runs: 200</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//  },</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//  evmVersion: &quot;byzantium&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p><strong>step4.</strong> 执行 truffle compile 编译合约</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">guest@guest</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">~</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">HelloWorld$</span><span class="token plain"> truffle compile</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Compiling</span><span class="token plain"> your contracts</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token maybe-class-name">Compiling</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">contracts</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">HelloWorld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sol</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token maybe-class-name">Compiling</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">contracts</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">Migrations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sol</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> compilation warnings encountered</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Warning</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">This</span><span class="token plain"> is a pre</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">release compiler version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> please </span><span class="token keyword control-flow" style="font-style:italic">do</span><span class="token plain"> not use it </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> production</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token property-access maybe-class-name">Artifacts</span><span class="token plain"> written to </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">home</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">guest</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">hudenian</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">HelloWorld</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">build</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">contracts</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token maybe-class-name">Compiled</span><span class="token plain"> successfully using</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    solc</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token number" style="color:rgb(247, 140, 108)">.13</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">develop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">2020.1</span><span class="token number" style="color:rgb(247, 140, 108)">.2</span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain">commit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token plain">ff23752</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">mod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Emscripten</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">clang</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><blockquote><p><strong>step5.</strong> 提取 <code>abi</code> 和 <code>bin</code>文件</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">将 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">build</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">contracts</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">HelloWorld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">json中</span><span class="token plain"> abi属性放到HelloWorld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">abi文件中</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">将 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">build</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">contracts</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token maybe-class-name">HelloWorld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">json中</span><span class="token plain"> bytecode属性放到HelloWorld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bin文件中（需要去掉</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">x开头）</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solidity-智能合约-java-包装类"></a>Solidity 智能合约 Java 包装类<a class="hash-link" href="#solidity-智能合约-java-包装类" title="标题的直接链接">#</a></h3><p>Java SDK 支持从<code>abi</code>文件中自动生成 Solidity 智能合约对应的 Java 包装类。</p><ul><li>通过命令行工具生成 Java 包装类（<a href="http://download.alaya.network/alaya/sdk/0.13.2/alaya-web3j-0.13.2.1.zip" target="_blank" rel="noopener noreferrer">alaya-web3j 下载</a>）：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ alaya-web3j solidity generate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">--javaTypes</span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">--solidityTypes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> /path/to/</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">smart-contract</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.bin /path/to/</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">smart-contract</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.abi -o /path/to/src/main/java -p com.your.organisation.name</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>直接调用 Java SDK 中的工具类生成 Java 包装类：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 通过maven或gradle导入console模块</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">compile &quot;com.platon.client:console:{version}&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String args[] = {&quot;generate&quot;, &quot;/path/to/&lt;smart-contract&gt;.bin&quot;, &quot;/path/to/&lt;smart-contract&gt;.abi&quot;, &quot;-o&quot;, &quot;/path/to/src/main/java&quot;, &quot;-p&quot; , &quot;com.your.organisation.name&quot;};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SolidityFunctionWrapperGenerator.run(args);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>其中<code>bin</code>和<code>abi</code>文件是编译 solidity 源代码以后生成的。</p><p>Solidity 智能合约对应的 Java 包装类支持的主要功能：</p><ul><li>构建与部署</li><li>确定合约有效性</li><li>调用交易和事件</li><li>调用常量方法</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="构建与部署智能合约"></a>构建与部署智能合约<a class="hash-link" href="#构建与部署智能合约" title="标题的直接链接">#</a></h4><p>智能合约的构建和部署使用包装类中的 deploy 方法：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.deploy(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;web3j&gt;, &lt;transactionManager&gt;, contractGasProvider, chainId</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [&lt;initialValue&gt;,] &lt;param1&gt;, ..., &lt;paramN&gt;).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">or</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.deploy(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;web3j&gt;, &lt;Credentials&gt;, contractGasProvider, chainId</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [&lt;initialValue&gt;,] &lt;param1&gt;, ..., &lt;paramN&gt;).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>这个方法将在区块链上部署智能合约。部署成功以后，它将会返回一个智能合约的包装类实例，包含智能合约的地址。</p><p>如果你的智能合约在构造上接受 LAT 转账，则需要初始化参数值&lt;initialValue&gt;。</p><p>通过智能合约的地址也可以创建智能合约对应的 Java 包装类的实例：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.load(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;&lt;bech32Address&gt;&quot;, web3j, transactionManager, contractGasProvider, chainId);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">or</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.load(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;&lt;bech32Address&gt;&quot;, web3j, credentials, contractGasProvider, chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="智能合约有效性"></a>智能合约有效性<a class="hash-link" href="#智能合约有效性" title="标题的直接链接">#</a></h4><p>使用此方法，可以验证智能合约的有效性。只有在合约地址中部署的字节码与智能合约封装包中的字节码匹配时才会返回<code>true</code>。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">contract.isValid();  // returns false if the contract bytecode does not match what&#x27;s deployed</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     // at the provided address</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="交易管理器"></a>交易管理器<a class="hash-link" href="#交易管理器" title="标题的直接链接">#</a></h4><p>Java SDK 提供了一个交易管理器<code>TransactionManager</code>来控制你连接到 PlatON 客户端的方式。默认采用<code>RawTransactionManager</code>。
<code>RawTransactionManager</code>需要指定链 ID。防止一个链的交易被重新广播到另一个链上：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionManager transactionManager = new RawTransactionManager(web3j, credentials, 100L);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>除了<code>RawTransactionManager</code>之外，Java SDK 还提供了一个客户端交易管理器<code>ClientTransactionManager</code>，它将你的交易签名工作交给你正在连接的 PlatON 客户端。
此外，还有一个<code>ReadonlyTransactionManager</code>，用于只从智能合约中查询数据，而不与它进行交易。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gas-提供者"></a>gas 提供者<a class="hash-link" href="#gas-提供者" title="标题的直接链接">#</a></h4><p>合约的手续费是通过 <code>GasProvider</code> 设置，因为合约 gas 消耗为动态的，和合约的逻辑相关。建议首次部署调用时使用比较大的值，如 999999。后面根据实际情况调整。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger GAS_LIMIT = BigInteger.valueOf(999999);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger GAS_PRICE = BigInteger.valueOf(1000000000L);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GasProvider gasProvider  = new ContractGasProvider(GAS_PRICE, GAS_LIMIT);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="调用交易和事件"></a>调用交易和事件<a class="hash-link" href="#调用交易和事件" title="标题的直接链接">#</a></h4><p>对于所有交易的方法，只返回与交易关联的交易收据。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionReceipt transactionReceipt = contract.someMethod(&lt;param1&gt;, ...).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>通过交易收据，可以提取索引和非索引的事件参数。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;SomeEventResponse&gt; events = contract.getSomeEvents(transactionReceipt);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>或者，你可以使用可观察的过滤器 Observable filter，监听与智能合约相关联的事件：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">contract.someEventObservable(startBlock, endBlock).subscribe(event -&gt; ...);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="调用常量方法"></a>调用常量方法<a class="hash-link" href="#调用常量方法" title="标题的直接链接">#</a></h4><p>常量方法只做查询，而不改变智能合约的状态。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Type result = contract.someMethod(&lt;param1&gt;, ...).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wasm-合约调用"></a>Wasm 合约调用<a class="hash-link" href="#wasm-合约调用" title="标题的直接链接">#</a></h2><p>将 Wasm 智能合约部署到区块链上时，必须先将其编译成字节码的格式，然后将其作为交易的一部分发送。Java SDK 将帮你生成 Wasm 智能合约对应的 Java 包装类，可以方便的部署 Wasm 智能合约以及调用 Wasm 智能合约中的交易方法、事件和常量方法。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="编译-wasm-合约源代码"></a>编译 Wasm 合约源代码<a class="hash-link" href="#编译-wasm-合约源代码" title="标题的直接链接">#</a></h3><ul><li>通过<code>CDT</code>编译器编译 Wasm 合约源代码(<a href="https://github.com/PlatONnetwork/PlatON-CDT/releases" target="_blank" rel="noopener noreferrer">CDT 下载</a>)</li></ul><p>CDT 安装成功以后，可通过如下命令编译 Wasm 合约源代码：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ platon-cpp </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.cpp</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>编译成功以后，会生成<code>&lt;contract&gt;.wasm</code>和<code>&lt;contract&gt;.abi.json</code>文件</p><p><code>wasm</code>，输出 Wasm 合约的二进制文件以提供交易请求。
<code>abi.json</code>，详细描述了所有可公开访问的合约方法及其相关参数。<code>abi</code>文件也用于生成 Wasm 智能合约对应的 Java 包装类。</p><ul><li>使用<code>platon-truffle</code>编译 Wasm 合约源代码(<a href="https://platon-truffle.readthedocs.io/en/v0.13.2/getting-started/installation.html#" target="_blank" rel="noopener noreferrer">platon-truffle 开发工具安装参考</a>|<a href="https://platon-truffle.readthedocs.io/en/v0.13.2/" target="_blank" rel="noopener noreferrer">platon-truffle 开发工具使用手册</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wasm-智能合约-java-包装类"></a>Wasm 智能合约 Java 包装类<a class="hash-link" href="#wasm-智能合约-java-包装类" title="标题的直接链接">#</a></h3><p>Java SDK 支持从<code>abi.json</code>文件中自动生成 Wasm 智能合约对应的 Java 包装类。</p><ul><li>通过命令行工具生成 Java 包装类：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ alaya-web3j wasm generate /path/to/</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">smart-contract</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.wasm /path/to/</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">smart-contract</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.abi.json -o /path/to/src/main/java -p com.your.organisation.name</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li>直接调用 Java SDK 中的工具类生成 Java 包装类：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">String args[] = {&quot;generate&quot;, &quot;/path/to/&lt;smart-contract&gt;.wasm&quot;, &quot;/path/to/&lt;smart-contract&gt;.abi.json&quot;, &quot;-o&quot;, &quot;/path/to/src/main/java&quot;, &quot;-p&quot; , &quot;com.your.organisation.name&quot;};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WasmFunctionWrapperGenerator.run(args);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>其中<code>wasm</code>和<code>abi.json</code>文件是编译 wasm 源代码以后生成的。</p><p>Wasm 智能合约对应的 Java 包装类支持的主要功能：</p><ul><li>构建与部署</li><li>确定合约有效性</li><li>调用交易和事件</li><li>调用常量方法</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="构建与部署智能合约-1"></a>构建与部署智能合约<a class="hash-link" href="#构建与部署智能合约-1" title="标题的直接链接">#</a></h4><p>智能合约的构建和部署使用包装类中的 deploy 方法：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.deploy(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;web3j&gt;, &lt;transactionManager&gt;, contractGasProvider, chainId,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [&lt;initialValue&gt;,] &lt;param1&gt;, ..., &lt;paramN&gt;).send();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">or</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.deploy(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;web3j&gt;, &lt;Credentials&gt;, contractGasProvider, chainId,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [&lt;initialValue&gt;,] &lt;param1&gt;, ..., &lt;paramN&gt;).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>这个方法将在区块链上部署智能合约。部署成功以后，它将会返回一个智能合约的包装类实例，包含智能合约的地址。</p><p>如果你的智能合约在构造上接受 LAT 转账，则需要初始化参数值&lt;initialValue&gt;。</p><p>通过智能合约的地址也可以创建智能合约对应的 Java 包装类的实例：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.load(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;&lt;bech32Address&gt;&quot;, web3j, transactionManager, contractGasProvider,chainId);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">or</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">YourSmartContract contract = YourSmartContract.load(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;&lt;bech32Address&gt;&quot;, web3j, credentials, contractGasProvider,chainId);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="智能合约有效性-1"></a>智能合约有效性<a class="hash-link" href="#智能合约有效性-1" title="标题的直接链接">#</a></h4><p>使用此方法，可以验证智能合约的有效性。只有在合约地址中部署的字节码与智能合约封装包中的字节码匹配时才会返回<code>true</code>。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">contract.isValid();  // returns false if the contract bytecode does not match what&#x27;s deployed</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     // at the provided address</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="交易管理器-1"></a>交易管理器<a class="hash-link" href="#交易管理器-1" title="标题的直接链接">#</a></h4><p>Java SDK 提供了一个交易管理器<code>TransactionManager</code>来控制你连接到 PlatON 客户端的方式。默认采用<code>RawTransactionManager</code>。
<code>RawTransactionManager</code>需要指定链 ID。防止一个链的交易被重新广播到另一个链上：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionManager transactionManager = new RawTransactionManager(web3j, credentials, 100L);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>除了<code>RawTransactionManager</code>之外，Java SDK 还提供了一个客户端交易管理器<code>ClientTransactionManager</code>，它将你的交易签名工作交给你正在连接的 PlatON 客户端。
此外，还有一个<code>ReadonlyTransactionManager</code>，用于只从智能合约中查询数据，而不与它进行交易。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gas-提供者-1"></a>gas 提供者<a class="hash-link" href="#gas-提供者-1" title="标题的直接链接">#</a></h4><p>合约的手续费是通过 <code>GasProvider</code> 设置，因为合约 gas 消耗为动态的，和合约的逻辑相关。建议首次部署调用时使用比较大的值，如 999999。后面根据实际情况调整。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger GAS_LIMIT = BigInteger.valueOf(999999);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BigInteger GAS_PRICE = BigInteger.valueOf(1000000000L);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GasProvider gasProvider  = new ContractGasProvider(GAS_PRICE, GAS_LIMIT);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="调用交易和事件-1"></a>调用交易和事件<a class="hash-link" href="#调用交易和事件-1" title="标题的直接链接">#</a></h4><p>对于所有交易的方法，只返回与交易关联的交易收据。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TransactionReceipt transactionReceipt = contract.someMethod(&lt;param1&gt;, ...).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>通过交易收据，可以提取索引和非索引的事件参数。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">List&lt;SomeEventResponse&gt; events = contract.getSomeEvents(transactionReceipt);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>或者，你可以使用可观察的过滤器 Observable filter，监听与智能合约相关联的事件：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">contract.someEventObservable(startBlock, endBlock).subscribe(event -&gt; ...);</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="调用常量方法-1"></a>调用常量方法<a class="hash-link" href="#调用常量方法-1" title="标题的直接链接">#</a></h4><p>常量方法只做查询，而不改变智能合约的状态。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Type result = contract.someMethod(&lt;param1&gt;, ...).send();</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/AlayaNetwork/alaya-devdocs/tree/main/website/i18n/zh-CN/docusaurus-plugin-content-docs/current/Java-SDK.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/alaya-devdocs/zh-CN/JS_SDK"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« JS SDK</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/alaya-devdocs/zh-CN/Json_Rpc"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">JSON RPC »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#开发库导入" class="table-of-contents__link">开发库导入</a><ul><li><a href="#maven" class="table-of-contents__link">maven</a></li><li><a href="#gradle" class="table-of-contents__link">gradle</a></li></ul></li><li><a href="#基础-api-使用" class="table-of-contents__link">基础 api 使用</a><ul><li><a href="#bech32-地址" class="table-of-contents__link">Bech32 地址</a></li><li><a href="#网络参数" class="table-of-contents__link">网络参数</a></li><li><a href="#钱包相关" class="table-of-contents__link">钱包相关</a></li><li><a href="#凭证相关" class="table-of-contents__link">凭证相关</a></li></ul></li><li><a href="#基础-rpc-接口" class="table-of-contents__link">基础 RPC 接口</a><ul><li><a href="#web3clientversion" class="table-of-contents__link">web3ClientVersion</a></li><li><a href="#web3sha3" class="table-of-contents__link">web3Sha3</a></li><li><a href="#netversion" class="table-of-contents__link">netVersion</a></li><li><a href="#netlistening" class="table-of-contents__link">netListening</a></li><li><a href="#netpeercount" class="table-of-contents__link">netPeerCount</a></li><li><a href="#platonprotocolversion" class="table-of-contents__link">platonProtocolVersion</a></li><li><a href="#platonsyncing" class="table-of-contents__link">platonSyncing</a></li><li><a href="#platongasprice" class="table-of-contents__link">platonGasPrice</a></li><li><a href="#platonaccounts" class="table-of-contents__link">platonAccounts</a></li><li><a href="#platonblocknumber" class="table-of-contents__link">platonBlockNumber</a></li><li><a href="#platongetbalance" class="table-of-contents__link">platonGetBalance</a></li><li><a href="#platongetstorageat" class="table-of-contents__link">platonGetStorageAt</a></li><li><a href="#platongetblocktransactioncountbyhash" class="table-of-contents__link">platonGetBlockTransactionCountByHash</a></li><li><a href="#platongettransactioncount" class="table-of-contents__link">platonGetTransactionCount</a></li><li><a href="#platongetblocktransactioncountbynumber" class="table-of-contents__link">platonGetBlockTransactionCountByNumber</a></li><li><a href="#platongetcode" class="table-of-contents__link">platonGetCode</a></li><li><a href="#platonsign" class="table-of-contents__link">platonSign</a></li><li><a href="#platonsendtransaction" class="table-of-contents__link">platonSendTransaction</a></li><li><a href="#platonsendrawtransaction" class="table-of-contents__link">platonSendRawTransaction</a></li><li><a href="#platoncall" class="table-of-contents__link">platonCall</a></li><li><a href="#platonestimategas" class="table-of-contents__link">platonEstimateGas</a></li><li><a href="#platongetblockbyhash" class="table-of-contents__link">platonGetBlockByHash</a></li><li><a href="#platongetblockbynumber" class="table-of-contents__link">platonGetBlockByNumber</a></li><li><a href="#platongettransactionbyblockhashandindex" class="table-of-contents__link">platonGetTransactionByBlockHashAndIndex</a></li><li><a href="#platongettransactionbyblocknumberandindex" class="table-of-contents__link">platonGetTransactionByBlockNumberAndIndex</a></li><li><a href="#platongettransactionreceipt" class="table-of-contents__link">platonGetTransactionReceipt</a></li><li><a href="#platonnewfilter" class="table-of-contents__link">platonNewFilter</a></li><li><a href="#platonnewblockfilter" class="table-of-contents__link">platonNewBlockFilter</a></li><li><a href="#platonnewpendingtransactionfilter" class="table-of-contents__link">platonNewPendingTransactionFilter</a></li><li><a href="#platonnewpendingtransactionfilter-1" class="table-of-contents__link">platonNewPendingTransactionFilter</a></li><li><a href="#platonuninstallfilter" class="table-of-contents__link">platonUninstallFilter</a></li><li><a href="#platongetfilterchanges" class="table-of-contents__link">platonGetFilterChanges</a></li><li><a href="#platongetfilterlogs" class="table-of-contents__link">platonGetFilterLogs</a></li><li><a href="#platongetlogs" class="table-of-contents__link">platonGetLogs</a></li><li><a href="#platonpendingtransactions" class="table-of-contents__link">platonPendingTransactions</a></li><li><a href="#dbputstring" class="table-of-contents__link">dbPutString</a></li><li><a href="#dbgetstring" class="table-of-contents__link">dbGetString</a></li><li><a href="#dbputhex" class="table-of-contents__link">dbPutHex</a></li><li><a href="#dbgethex" class="table-of-contents__link">dbGetHex</a></li><li><a href="#platonevidences" class="table-of-contents__link">platonEvidences</a></li><li><a href="#getprogramversion" class="table-of-contents__link">getProgramVersion</a></li><li><a href="#getschnorrnizkprove" class="table-of-contents__link">getSchnorrNIZKProve</a></li><li><a href="#geteconomicconfig" class="table-of-contents__link">getEconomicConfig</a></li></ul></li><li><a href="#系统合约调用" class="table-of-contents__link">系统合约调用</a><ul><li><a href="#质押相关接口" class="table-of-contents__link">质押相关接口</a></li><li><a href="#委托相关接口" class="table-of-contents__link">委托相关接口</a></li><li><a href="#奖励相关接口" class="table-of-contents__link">奖励相关接口</a></li><li><a href="#节点相关合约" class="table-of-contents__link">节点相关合约</a></li><li><a href="#治理相关合约" class="table-of-contents__link">治理相关合约</a></li><li><a href="#双签举报相关接口" class="table-of-contents__link">双签举报相关接口</a></li><li><a href="#锁仓相关接口" class="table-of-contents__link">锁仓相关接口</a></li></ul></li><li><a href="#solidity-合约调用" class="table-of-contents__link">Solidity 合约调用</a><ul><li><a href="#编译-solidity-源代码" class="table-of-contents__link">编译 solidity 源代码</a></li><li><a href="#solidity-智能合约-java-包装类" class="table-of-contents__link">Solidity 智能合约 Java 包装类</a></li></ul></li><li><a href="#wasm-合约调用" class="table-of-contents__link">Wasm 合约调用</a><ul><li><a href="#编译-wasm-合约源代码" class="table-of-contents__link">编译 Wasm 合约源代码</a></li><li><a href="#wasm-智能合约-java-包装类" class="table-of-contents__link">Wasm 智能合约 Java 包装类</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.alaya.network/" target="_blank" class="footer-logo-home" rel="noreferrer noopener"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" width="66" height="58"></a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.alaya.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item" hrefzh="https://www.alaya.network/">Alaya network</a></li><li class="footer__item"><a href="https://latticex.foundation/home" target="_blank" rel="noopener noreferrer" class="footer__link-item" hrefzh="https://latticex.foundation/home">LatticeX.Foundation</a></li><li class="footer__item"><a href="https://forum.latticex.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item" hrefzh="https://forum.latticex.foundation/">Forum</a></li></ul></div><div class="gitstar"><a class="github-button" href="https://github.com/PlatONnetwork/PlatON-Go" data-color-scheme="no-preference: light; light: light; dark: light;" data-icon="octicon-star" data-size="small" data-show-count="true" aria-label="Star PlatONnetwork/PlatON-Go on GitHub">Star</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">COPYRIGHT  © 2021 Alaya NETWORK.</div></div></div></footer></div>
<script src="/alaya-devdocs/zh-CN/assets/js/runtime~main.f76bcf49.js"></script>
<script src="/alaya-devdocs/zh-CN/assets/js/main.b0254ba4.js"></script>
</body>
</html>