<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="search" type="application/opensearchdescription+xml" title="PlatON" href="/alaya-devdocs/zh-CN/opensearch.xml">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.0/dist/mermaid.min.js"></script>
<script src="/alaya-devdocs/js/custom.js"></script><title data-react-helmet="true">合约API | PlatON</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://luo-dahui.github.io//alaya-devdocs/zh-CN/Wasm_API"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="合约API | PlatON"><meta data-react-helmet="true" name="description" content="API"><meta data-react-helmet="true" property="og:description" content="API"><meta data-react-helmet="true" property="og:image" content="https://luo-dahui.github.io//alaya-devdocs/zh-CN/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://luo-dahui.github.io//alaya-devdocs/zh-CN/img/undraw_online.svg"><link data-react-helmet="true" rel="shortcut icon" href="/alaya-devdocs/zh-CN/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://luo-dahui.github.io//alaya-devdocs/zh-CN/Wasm_API"><link data-react-helmet="true" rel="alternate" href="https://luo-dahui.github.io//alaya-devdocs/Wasm_API" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://luo-dahui.github.io//alaya-devdocs/zh-CN/Wasm_API" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://luo-dahui.github.io//alaya-devdocs/Wasm_API" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/alaya-devdocs/zh-CN/assets/css/styles.ccba51f9.css">
<link rel="preload" href="/alaya-devdocs/zh-CN/assets/js/runtime~main.7472df77.js" as="script">
<link rel="preload" href="/alaya-devdocs/zh-CN/assets/js/main.6d5741b0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/alaya-devdocs/zh-CN/"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar__items navbar__items--right"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span></button><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span>中文</span></a><ul class="dropdown__menu"><li><a href="/alaya-devdocs/en/Wasm_API" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/alaya-devdocs/zh-CN/Wasm_API" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/alaya-devdocs/zh-CN/"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" alt="PlatON" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span>Languages</span></a><ul class="menu__list"><li class="menu__list-item"><a href="/alaya-devdocs/en/Wasm_API" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/alaya-devdocs/zh-CN/Wasm_API" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">中文</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="打开菜单" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/alaya-devdocs/zh-CN/">概述</a></li><li class="menu__list-item"><a class="menu__link" href="/alaya-devdocs/zh-CN/Glossary">术语表</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">初步了解</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Intro_to_Alaya">关于Alaya</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Intro_to_ATP">什么是ATP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/staking_and_delegation">质押&amp;委托</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Networks">网络说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Alaya_Account">Alaya账户</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">进阶了解</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Architecture">总体架构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Economic_model">经济模型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Consensus_mechanism">共识机制</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Governance_mechanism">治理机制</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Alaya节点</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Intro_to_validator">验证节点介绍</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Run_a_fullnode">全节点部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Become_Validator">成为验证节点</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Data_snapshot">数据快照</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">节点工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Online_MTool">MTool在线教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Offline_MTool">MTool离线教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Command_Line_Tools">Alaya命令行工具</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">开发者</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Development_guide">开发指南</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">设置开发环境</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Join_the_dev_network">开发网络</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Run_a_dev_node">成为开发网验证节点</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Private_network">私有网络</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">开发工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Alaya-Truffle">Alaya-Truffle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/IDE">IDE</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">智能合约</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Solidity合约</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Getting_started">入门指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Migration_tutorial">迁移教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Development_costs">合约开发成本</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Best_practices">最佳实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Solidity_Contract_security">安全指南</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Wasm合约</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Wasm_Getting_started">入门指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Wasm_Development_costs">开发成本</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/alaya-devdocs/zh-CN/Wasm_Best_practices">最佳实践</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/alaya-devdocs/zh-CN/Wasm_API">合约API</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">API参考</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/JS_SDK">JS SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Java_SDK">Java SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Python_SDK">Python SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Json_Rpc">JSON RPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Explorer_API">Explorer API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Samurai_API">Samurai API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ARC Token</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/ARC20">ARC20</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/ARC721">ARC721</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">示例教程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/JS-Tutorials">JS SDK快速入门教程</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据分析</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/AlayScan">AlayScan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/PlatEye">PlatEye</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">钱包</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Wallet_Guide">钱包指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/ATON_user_manual">ATON钱包</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Samurai_user_manual">Samurai</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">社区</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Join_the_Community">加入社区</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Ecosystem_Programs">生态发展计划</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Ways_to_contribute">贡献方式</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/alaya-devdocs/zh-CN/Contribution_Guidelines">贡献指南</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">合约API</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="api"></a>API<a class="hash-link" href="#api" title="标题的直接链接">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="区块-api"></a>区块 Api<a class="hash-link" href="#区块-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_block_hash"></a>platon_block_hash()<a class="hash-link" href="#platon_block_hash" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">h256 platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_block_hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int64_t</span><span class="token plain"> num</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>根据区块高度获取区块哈希。</p><ul><li><strong>参数</strong><ul><li><code>num：</code>块的高度</li></ul></li><li><strong>返回值</strong><ul><li>哈希值</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_block_number"></a>platon_block_number()<a class="hash-link" href="#platon_block_number" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">uint64_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_block_number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取当前块的高度。</p><ul><li><strong>返回值</strong><ul><li>当前块的高度</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_coinbase"></a>platon_coinbase()<a class="hash-link" href="#platon_coinbase" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Address platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_coinbase</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取矿工节点的哈希值。</p><ul><li><strong>返回值</strong><ul><li>矿工节点的哈希</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_unix_timestamp"></a>platon_unix_timestamp()<a class="hash-link" href="#platon_unix_timestamp" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int64_t</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_unix_timestamp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取当前块的 Unix 时间戳。</p><ul><li><strong>返回值</strong><ul><li>当前块的 Unix 时间戳（秒）</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_gas_limit"></a>platon_gas_limit()<a class="hash-link" href="#platon_gas_limit" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">uint64_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_gas_limit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取当前区块的 gas limit</p><ul><li><strong>返回值</strong><ul><li>当前区块的 gas limit</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="交易-api"></a>交易 API<a class="hash-link" href="#交易-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_gas_price"></a>platon_gas_price()<a class="hash-link" href="#platon_gas_price" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">u128 platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_gas_price</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取交易的 gas price.</p><ul><li><strong>返回值</strong><ul><li>交易的 gas price</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_gas"></a>platon_gas()<a class="hash-link" href="#platon_gas" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">uint64_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取交易的 gas 值</p><ul><li><strong>返回值</strong><ul><li>交易的 gas 值</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_caller_nonce"></a>platon_caller_nonce<a class="hash-link" href="#platon_caller_nonce" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">uint64_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_caller_nonce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取交易的 nonce 值</p><ul><li><strong>返回值</strong><ul><li>交易的 nonce 值</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_call_value"></a>platon_call_value()<a class="hash-link" href="#platon_call_value" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">u128 platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_call_value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取当前交易的 value 值。</p><ul><li><strong>返回值</strong><ul><li>当前交易的 value 值</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_caller"></a>platon_caller()<a class="hash-link" href="#platon_caller" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Address platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取交易的发起者</p><ul><li><strong>返回值</strong><ul><li>交易发起者地址</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_origin"></a>platon_origin()<a class="hash-link" href="#platon_origin" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Address platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_origin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取交易的原始发起者</p><ul><li><strong>返回值</strong><ul><li>交易原始发起者的地址</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_address"></a>platon_address()<a class="hash-link" href="#platon_address" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Address platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取交易的合约地址</p><ul><li><strong>返回值</strong><ul><li>合约地址</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="帐户-api"></a>帐户 Api<a class="hash-link" href="#帐户-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="make_address-12"></a>make_address() 1/2<a class="hash-link" href="#make_address-12" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">size_t M</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">pair</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">bool</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">M</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>CDT 默认识别的地址是主网地址也就是地址前缀为 atp，如果要识别测试网地址前缀为 atx，需要定义宏 TESTNET，在合约第一行加上#define TESTNET 即可。</p><p>将 C 风格字符串转换为地址对象。</p><ul><li><strong>参数</strong><ul><li><code>str：</code> C 风格字符串</li></ul></li><li><strong>返回值</strong><ul><li>返回值为 pair，pair 的 second 表示成功或者失败，first 表示 Address 类型的地址。</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="make_address-22"></a>make_address() 2/2<a class="hash-link" href="#make_address-22" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">pair</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">bool</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">str_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>CDT 默认识别的地址是主网地址也就是地址前缀为 atp，如果要识别测试网地址前缀为 atx，需要定义宏 TESTNET，在合约第一行加上#define TESTNET 即可。</p><p>将字符串转换为地址对象。</p><ul><li><strong>参数</strong><ul><li><code>str：</code> 字符串</li></ul></li><li><strong>返回值</strong><ul><li>返回值为 pair，pair 的 second 表示成功或者失败，first 表示 Address 类型的地址</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_balance"></a>platon_balance()<a class="hash-link" href="#platon_balance" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Energon platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_balance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>根据地址获取余额。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>地址</li></ul></li><li><strong>返回值</strong><ul><li>地址余额</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_transfer"></a>platon_transfer()<a class="hash-link" href="#platon_transfer" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_transfer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Energon </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>将 Energon 的金额转移到地址。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li><li><code>amount：</code>Energon 的数量</li></ul></li><li><strong>返回值</strong><ul><li>如果传输成功则为 true，否则为 false</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonenergon-class"></a>platon::Energon Class<a class="hash-link" href="#platonenergon-class" title="标题的直接链接">#</a></h4><p>Energo 是货币相关操作类</p><ul><li><p><strong>公共成员函数</strong></p><ul><li><p><code>Energon (u128 n)</code>
构造一个新的 Energon。</p></li><li><p><code>const u128 Get () const</code>
获得一定量的 Von。</p></li><li><p><code>const bytes Bytes () const</code>
获取值的字节，字节使用大端表示。</p></li><li><p><code>Energon &amp; Add (const u128 &amp;v)</code>
添加量的 Von。</p></li><li><p><code>Energon &amp; Add (const Energon &amp;rhs)</code>
两个 Energon 对象相加</p></li><li><p><code>Energon &amp; operator+= (const Energon &amp;rhs)</code>
实现运算符+ =</p></li></ul></li><li><p><strong>构造函数和析构函数</strong></p><ul><li><code>platon::Energon::Energon(u128 n)</code>
构造一个新的 Energon。<ul><li><strong>参数</strong><ul><li><code>n：</code> Von 数量</li></ul></li></ul></li></ul></li><li><p><strong>成员函数功能</strong></p><ul><li><p><code>Energon&amp; platon::Energon::Add(const Energon &amp; rhs)</code>
添加量的 Von。</p><ul><li><strong>参数</strong><ul><li><code>rhs：</code>Von 的数量</li></ul></li><li><strong>返回值</strong><ul><li>Energon 的引用</li></ul></li></ul></li><li><p><code>Energon&amp; platon::Energon::Add(const u128 &amp; v)</code>
添加量的 Von。</p><ul><li><strong>参数</strong><ul><li><code>v：</code>Von 的数量</li></ul></li><li><strong>返回值</strong><ul><li>Energon 的引用</li></ul></li></ul></li><li><p><code>const bytes platon::Energon::Bytes() const</code>
获取值的字节，字节使用大端表示。</p><ul><li><strong>返回值</strong><ul><li>值的字节</li></ul></li></ul></li><li><p><code>const u128 platon::Energon::Get() const</code>
获得一定量的 Von。</p><ul><li><strong>返回值</strong><ul><li>Von 量</li></ul></li></ul></li><li><p><code>Energon&amp; platon::Energon::operator+= ( const Energon &amp; rhs)</code>
实现运算符+ =</p><ul><li><strong>参数</strong><ul><li><code>rhs：</code>Energon 对象</li></ul></li><li><strong>返回值</strong><ul><li>Energon 的引用</li></ul></li></ul></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonwhitelist-tablename--class"></a>platon::WhiteList&lt; TableName &gt; Class<a class="hash-link" href="#platonwhitelist-tablename--class" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Name</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Raw TableName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">WhiteList</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> TableName </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>持久存储白名单工具。</p><ul><li><p><strong>模板参数</strong></p><ul><li><code>Name：</code>白名单名称，在同一合约中，该名称应唯一</li></ul></li><li><p><strong>构造函数和析构函数</strong></p><ul><li><code>template&lt;Name::Raw TableName&gt; platon::WhiteList&lt; TableName &gt;::WhiteList ()</code></li></ul></li></ul><p>构造一个新的清单。</p><ul><li><p><strong>公共成员函数</strong></p><ul><li><p><code>WhiteList ()</code>
构造一个新的清单。</p></li><li><p><code>void Add (const std::string &amp;addr)</code>
将地址添加到白名单。</p></li><li><p><code>void Add (const Address &amp;addr)</code>
将地址添加到白名单。</p></li><li><p><code>void Delete (const std::string &amp;addr)</code>
从白名单中删除地址。</p></li><li><p><code>void Delete (const Address &amp;addr)</code>
从白名单中删除地址。</p></li><li><p><code>bool Exists (const std::string &amp;addr)</code>
该地址是否存在于白名单中。</p></li><li><p><code>bool Exists (const Address &amp;addr)</code>
该地址是否存在于白名单中。</p></li></ul></li><li><p><strong>成员函数功能</strong></p><ul><li><p><code>template&lt;Name::Raw TableName&gt; void platon::WhiteList&lt; TableName &gt;::Add ( const Address &amp; addr)</code>
将地址添加到白名单。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li></ul></li></ul></li><li><p><code>template&lt;Name::Raw TableName&gt; void platon::WhiteList&lt; TableName &gt;::Add ( const std::string &amp; addr)</code>
将地址添加到白名单。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li></ul></li></ul></li><li><p><code>template&lt;Name::Raw TableName&gt; void platon::WhiteList&lt; TableName &gt;::Delete ( const Address &amp; addr)</code>
从白名单中删除地址。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li></ul></li></ul></li><li><p><code>template&lt;Name::Raw TableName&gt; void platon::WhiteList&lt; TableName &gt;::Delete ( const std::string &amp; addr)</code>
从白名单中删除地址。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li></ul></li></ul></li><li><p><code>template&lt;Name::Raw TableName&gt; bool platon::WhiteList&lt; TableName &gt;::Exists ( const Address &amp; addr)</code>
该地址是否存在于白名单中。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li></ul></li><li><strong>返回值</strong><ul><li>如果存在则为 true，否则为 false</li></ul></li></ul></li><li><p><code>template&lt;Name::Raw TableName&gt; bool platon::WhiteList&lt; TableName &gt;::Exists ( const std::string &amp; addr)</code>
该地址是否存在于白名单中。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>帐户地址</li></ul></li><li><strong>返回值</strong><ul><li>如果存在则为 true，否则为 false</li></ul></li></ul></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="存储-api"></a>存储 API<a class="hash-link" href="#存储-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_set_state"></a>platon_set_state()<a class="hash-link" href="#platon_set_state" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_set_state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size_t klen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size_t vlen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>设置状态对象</p><ul><li><strong>参数</strong><ul><li><code>key：</code>键</li><li><code>Klen：</code>键的长度</li><li><code>value：</code>值</li><li><code>vlen：</code>值的长度</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_get_state_length"></a>platon_get_state_length()<a class="hash-link" href="#platon_get_state_length" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">size_t </span><span class="token function" style="color:rgb(130, 170, 255)">platon_get_state_length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size_t klen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取键对应的值的长度</p><ul><li><p><strong>参数</strong></p><ul><li><code>key：</code>键</li><li><code>Klen：</code>键的长度</li></ul></li><li><p><strong>返回值</strong></p><ul><li>键对应的值的长度</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_get_state"></a>platon_get_state()<a class="hash-link" href="#platon_get_state" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">size_t </span><span class="token function" style="color:rgb(130, 170, 255)">platon_get_state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size_t klen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size_t vlen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取状态对象</p><ul><li><p><strong>参数</strong></p><ul><li><code>key：</code>键</li><li><code>Klen：</code>密钥的长度</li><li><code>value：</code>值</li><li><code>vlen：</code>价值的长度</li></ul></li><li><p><strong>返回值</strong></p><ul><li>值的长度</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platonstoragetype-storagename-t--模板类"></a>platon::StorageType&lt; StorageName, T &gt; 模板类<a class="hash-link" href="#platonstoragetype-storagename-t--模板类" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Name</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Raw StorageName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">StorageType</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> StorageName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><p><strong>模板参数</strong></p><ul><li><code>StorageName：</code>元素值名称，在同一合约中，该名称必须唯一</li><li><code>T：</code>元素类型</li></ul></li><li><p><strong>公共成员功能</strong></p><ul><li><p><code>StorageType ()</code>
构造一个新的存储类型对象</p></li><li><p><code>StorageType (const T &amp;d)</code>
构造一个新的存储类型对象</p></li><li><p><code>StorageType (const StorageType&lt; StorageName, T &gt; &amp;)=delete</code></p></li><li><p><code>StorageType (const StorageType&lt; StorageName, T &gt; &amp;&amp;)=delete</code></p></li><li><p><code>~StorageType ()</code>
销毁存储类型对象。刷新到区块链。</p></li><li><p><code>T &amp; operator= (const T &amp;t)</code></p></li><li><p><code>template&lt;typename P&gt; bool operator== (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; bool operator!= (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; bool operator&lt; (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; bool operator&gt;= (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; bool operator&lt;= (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; bool operator&gt; (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; T &amp; operator^= (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; T operator^ (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; T &amp; operator|= (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; T operator| (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; T &amp; operator&amp;= (const P &amp;t) const</code></p></li><li><p><code>template&lt;typename P&gt; T operator&amp; (const P &amp;t) const</code></p></li><li><p><code>T operator~ () const</code></p></li><li><p><code>T &amp; operator&lt;&lt; (int offset)</code></p></li><li><p><code>T &amp; operator&gt;&gt; (int offset)</code></p></li><li><p><code>T &amp; operator++ ()</code></p></li><li><p><code>T operator++ (int)</code></p></li><li><p><code>T &amp; operator[] (int i)</code></p></li><li><p><code>template&lt;typename P&gt; T &amp; operator+= (const P &amp;p)</code></p></li><li><p><code>template&lt;typename P&gt; T &amp; operator-= (const P &amp;p)</code></p></li><li><p><code>T &amp; operator* ()</code></p></li><li><p><code>T * operator-&gt; ()</code></p></li><li><p><code>operator bool () const</code></p></li><li><p><code>T get () const</code></p></li><li><p><code>T &amp; self ()</code></p></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platondbarray-tablename-key-n--模板类"></a>platon::db::Array&lt; TableName, Key, N &gt; 模板类<a class="hash-link" href="#platondbarray-tablename-key-n--模板类" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Name</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Raw TableName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">unsigned</span><span class="token plain"> N</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Array</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> TableName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> N </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><ul><li><p><strong>成员类</strong></p><ul><li><p><code>class const_iterator Constant iterator.</code></p></li><li><p><code>class const_reverse_iterator Constant reverse iterator.</code></p></li><li><p><code>class iterator Iterator.</code></p></li></ul></li><li><p><strong>Public Types</strong></p><ul><li><code>typedef std::reverse_iterator&lt; iterator &gt; reverse_iterator</code></li></ul></li><li><p><strong>公共成员函数</strong></p><ul><li><p><code>Array ()</code></p></li><li><p><code>Array (const Array&lt; TableName, Key, N &gt; &amp;)=delete</code></p></li><li><p><code>Array (const Array&lt; TableName, Key, N &gt; &amp;&amp;)=delete</code></p></li><li><p><code>Array&lt; TableName, Key, N &gt; &amp; operator= (const Array&lt; TableName, Key, N &gt; &amp;)=delete</code></p></li><li><p><code>~Array ()</code></p></li><li><p><code>iterator begin ()</code>
迭代器开始位置</p></li><li><p><code>iterator end ()</code>
迭代器结束位置</p></li><li><p><code>reverse_iterator rbegin ()</code>
反向迭代器开始位置。</p></li><li><p><code>reverse_iterator rend ()</code>
反向迭代器结束位置。</p></li><li><p><code>const_iterator cbegin ()</code>
常量迭代器开始位置。</p></li><li><p><code>const_iterator cend ()</code>
常量迭代器最终位置。</p></li><li><p><code>const_reverse_iterator crbegin ()</code>
常数反向迭代器的起始位置。</p></li><li><p><code>const_reverse_iterator crend ()</code>
常数反向迭代器的最终位置。</p></li><li><p><code>Key &amp; at (size_t pos)</code>
获取指定的 position 元素。</p></li><li><p><code>Key &amp; operator[] (size_t pos)</code>
括号运算符。</p></li><li><p><code>size_t size ()</code>
数组大小</p></li><li><p><code>Key get_const (size_t pos)</code>
获取 Const 对象。不要刷新以缓存。</p></li><li><p><code>void set_const (size_t pos, const Key &amp;key)</code>
设置 Const 对象，请勿刷新以缓存。</p></li></ul></li><li><p><strong>静态公共属性</strong></p><ul><li><code>static const std::string kType = &quot;__array__&quot;</code></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platondbmap-tablename-key-value--模板类"></a>platon::db::Map&lt; TableName, Key, Value &gt; 模板类<a class="hash-link" href="#platondbmap-tablename-key-value--模板类" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Name</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Raw TableName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Value</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> TableName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Value </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>实现 map 操作，map 模板。</p><ul><li><strong>模板参数</strong><ul><li><code>TableName:</code> map 的名称，map 的名称在每个合约中应该是唯一的。</li><li><code>Key：</code>键类型</li><li><code>Value：</code>值类型</li></ul></li></ul><p>MapType::Traverse 默认值为 Traverse，当 Traverse 需要额外的数据结构进行操作时，当不需要遍历操作时，将其设置为 NoTraverse。</p><ul><li><p><strong>公共成员函数功能</strong></p><ul><li><p><code>Map ()</code></p></li><li><p><code>Map(const Map&lt; TableName, Key, Value &gt; &amp;)=delete</code></p></li><li><p><code>Map(const Map&lt; TableName, Key, Value &gt; &amp;&amp;)=delete</code></p></li><li><p><code>Map&lt; TableName, Key, Value &gt; &amp; operator= (const Map&lt; TableName, Key, Value &gt; &amp;)=delete</code></p></li><li><p><code>~Map ()</code>
销毁 Map 对象将数据刷新到区块链。</p></li><li><p><code>bool insert (const Key &amp;k, const Value &amp;v)</code>
插入新的键值对，更新为缓存。</p></li><li><p><code>bool insert_const (const Key &amp;k, const Value &amp;v)</code>
插入将不会更新到缓存的新键值对。适用于大量插入，插入后无需更新。</p></li><li><p><code>Value get_const (const Key &amp;k)</code>
获取 Const 对象，将不会加入缓存。</p></li><li><p><code>Value &amp; at (const Key &amp;k)</code>
获取值，将被添加到缓存中。</p></li><li><p><code>void erase (const Key &amp;k)</code>
删除键值对。</p></li><li><p><code>Value &amp; operator[] (const Key &amp;k)</code>
括号运算符。</p></li><li><p><code>boolcontains (const Key &amp;key)</code>
检查容器中是否存在具有与 key 等效的键的元素。</p></li><li><p><code>void flush ()</code>
将内存中的修改数据刷新到区块链。</p></li></ul></li><li><p><strong>静态公共属性</strong></p><ul><li><code>static const std::string kType = &quot;__map__&quot;</code></li></ul></li><li><p><strong>构造函数和析构函数</strong></p><ul><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; platon::db::Map&lt; TableName, Key, Value &gt;::Map ()</code></p></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; platon::db::Map&lt; TableName, Key, Value &gt;::Map (const Map&lt; TableName, Key, Value &gt; &amp; )</code></p></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; platon::db::Map&lt; TableName, Key, Value &gt;::Map (const Map&lt; TableName, Key, Value &gt; &amp;&amp; )</code></p></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; platon::db::Map&lt; TableName, Key, Value &gt;::~Map ()</code></p></li></ul></li></ul><p>销毁 Map 对象将数据刷新到区块链。</p><ul><li><p><strong>成员函数功能</strong></p><ul><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; Value&amp; platon::db::Map&lt; TableName, Key, Value &gt;::at ( const Key &amp; k )</code>
获取值，将被添加到缓存中。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li></ul></li><li><p><strong>返回值</strong></p></li><li><p>值的引用</p></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">at</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; bool platon::db::Map&lt; TableName, Key, Value &gt;::contains ( const Key &amp; key )</code>
检查容器中是否存在具有与 key 等效的键的元素。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li></ul></li><li><p><strong>返回值</strong></p></li><li><p>如果存在这样的元素，则为 true，否则为 false。</p></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">contains</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; void platon::db::Map&lt; TableName, Key, Value &gt;::erase ( const Key &amp; k )</code>
删除键值对。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li></ul></li></ul></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">erase</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; void platon::db::Map&lt; TableName, Key, Value &gt;::flush ()</code>
将内存中的修改数据刷新到区块链。</p></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; Value platon::db::Map&lt; TableName, Key, Value &gt;::get_const ( const Key &amp; k)</code>
获取 Const 对象，将不会加入缓存。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li></ul></li><li><p><strong>返回值</strong></p></li><li><p>价值</p></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_const</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; bool platon::db::Map&lt; TableName, Key, Value &gt;::insert ( const Key &amp; k, const Value &amp; v)</code>
插入新的键值对，更新为缓存。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li><li><code>v：</code>值</li></ul></li><li><p><strong>返回值</strong></p><ul><li>true 插入成功，false 插入失败</li></ul></li></ul></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; bool platon::db::Map&lt; TableName, Key, Value &gt;::insert_const ( const Key &amp; k, const Value &amp; v)</code>
插入将不会更新到缓存的新键值对。适用于大量插入，插入后无需更新。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li><li><code>v：</code>值</li></ul></li><li><p><strong>返回值</strong></p><ul><li>true 插入成功，false 插入失败</li></ul></li></ul></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">insert_const</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; Map&lt;TableName, Key, Value&gt;&amp; platon::db::Map&lt; TableName, Key, Value &gt;::operator= ( const Map&lt; TableName, Key, Value &gt; &amp; )</code></p></li><li><p><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; Value&amp; platon::db::Map&lt; TableName, Key, Value &gt;::operator[] ( const Key &amp; k)</code>
括号运算符。</p><ul><li><p><strong>参数</strong></p><ul><li><code>k：</code>键</li></ul></li><li><p><strong>返回值</strong></p></li><li><p>价值与获取价值</p></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">db</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Map</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;map_str&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MapStr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MapStr map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul></li></ul></li><li><p><strong>成员变量</strong></p><ul><li><code>template&lt;Name::Raw TableName, typename Key , typename Value &gt; const std::string platon::db::Map&lt; TableName, Key, Value &gt;::kType = &quot;__map__&quot;</code></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="templatenameraw-tablename-typename-t-typename-indices-class-platondbmultiindex-tablename-t-indices-"></a>template&lt;Name::Raw TableName, typename T, typename... Indices&gt; class platon::db::MultiIndex&lt; TableName, T, Indices &gt;<a class="hash-link" href="#templatenameraw-tablename-typename-t-typename-indices-class-platondbmultiindex-tablename-t-indices-" title="标题的直接链接">#</a></h4><p>MultiIndex 支持惟一索引和普通索引。惟一索引应该放在参数的第一个位置。结构需要提供与 index 字段对应的 get 函数。</p><ul><li><p><strong>成员函数功能</strong></p><ul><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt;const_iterator platon::db::MultiIndex&lt; TableName, T, Indices &gt;::cbegin()</code>
开始迭代器</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">返回值</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> const_iterator</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">示例：</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">cpp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  struct Member {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  std::string name;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint8_t age;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint8_t sex;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint64_t $seq_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  std::string Name() const { return name; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint8_t Age() const { return age; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  PLATON_SERIALIZE(Member, (name)(age)(sex))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">MultiIndex&lt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  &quot;table&quot;_n, Member,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index&quot;_n, IndexMemberFun&lt;Member, std::string, &amp;Member::Name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::UniqueIndex&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index2&quot;_n, IndexMemberFun&lt;Member, uint8_t, &amp;Member::Age,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::NormalIndex&gt;&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  member_table;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">for (auto it = member_table.cbegin(); it != it_end; ++it){}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; const_iterator platon::db::MultiIndex&lt; TableName, T, Indices &gt;::cend()</code>
结束迭代器</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">返回值</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> const_iterator</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">示例：</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">cpp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  struct Member {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  std::string name;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint8_t age;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint8_t sex;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint64_t $seq_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  std::string Name() const { return name; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  uint8_t Age() const { return age; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  PLATON_SERIALIZE(Member, (name)(age)(sex))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">MultiIndex&lt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  &quot;table&quot;_n, Member,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index&quot;_n, IndexMemberFun&lt;Member, std::string, &amp;Member::Name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::UniqueIndex&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index2&quot;_n, IndexMemberFun&lt;Member, uint8_t, &amp;Member::Age,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::NormalIndex&gt;&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  member_table;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">for (auto it = member_table.cbegin(); it != it_end; ++it){}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; template&lt;Name::Raw IndexName, typename KEY &gt; size_t platon::db::MultiIndex&lt; TableName, T, Indices &gt;::count(const KEY &amp;key)</code></p><ul><li><strong>返回值</strong><ul><li>获取与索引值对应的数据的数量</li></ul></li><li><strong>示例：</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Member</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> sex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint64_t</span><span class="token plain"> $seq_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string </span><span class="token function" style="color:rgb(130, 170, 255)">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">PLATON_SERIALIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MultiIndex</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&quot;table&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  IndexedBy</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> IndexMemberFun</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Member</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                    IndexType</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">UniqueIndex</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IndexedBy</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index2&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> IndexMemberFun</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Member</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                      IndexType</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">NormalIndex</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">member_table</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> member_table</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index2&quot;</span><span class="token plain">_n</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; template&lt;typename Lambda&gt; std::pair&lt;const_iterator, bool&gt; platon::db::MultiIndex&lt; TableName, T, Indices &gt;::emplace(Lambda &amp;constructor)</code></p><ul><li><strong>参数</strong><ul><li>数据项处理函数</li></ul></li><li><strong>返回值</strong><ul><li>返回一个迭代器，该迭代器指示使用 bool 类型的插入是否成功。如果惟一索引冲突，则插入失败</li></ul></li><li><strong>示例：</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Member</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> sex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">uint64_t</span><span class="token plain"> $seq_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string </span><span class="token function" style="color:rgb(130, 170, 255)">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">PLATON_SERIALIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MultiIndex</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;table&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  IndexedBy</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> IndexMemberFun</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Member</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                      IndexType</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">UniqueIndex</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  IndexedBy</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index2&quot;</span><span class="token plain">_n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> IndexMemberFun</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Member</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">Age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                      IndexType</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">NormalIndex</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  member_table</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">member_table</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">emplace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">age </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sex </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; void platon::db::MultiIndex&lt; TableName, T, Indices &gt;::erase(const_iterator position)</code>
基于迭代器删除数据</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">参数</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">position：</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain">迭代器</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">示例：</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">cpp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">struct Member {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string name;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t age;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t sex;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint64_t $seq_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string Name() const { return name; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t Age() const { return age; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">PLATON_SERIALIZE(Member, (name)(age)(sex))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">MultiIndex&lt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">&quot;table&quot;_n, Member,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">IndexedBy&lt;&quot;index&quot;_n, IndexMemberFun&lt;Member, std::string, &amp;Member::Name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                  IndexType::UniqueIndex&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">IndexedBy&lt;&quot;index2&quot;_n, IndexMemberFun&lt;Member, uint8_t, &amp;Member::Age,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                    IndexType::NormalIndex&gt;&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">member_table;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">auto vect_iter = member_table.find&lt;&quot;index2&quot;_n&gt;(uint8_t(10));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">member_table.erase(vect_iter[0]);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; template&lt;Name::Raw IndexName, typename KEY &gt; const_iterator platon::db::MultiIndex&lt; TableName, T, Indices &gt;::find(const KEY &amp; key)</code>
找到数据，只有一个唯一的索引是可用的。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">参数</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">key：</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain">索引值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">返回值</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">结果迭代器。如果没有找到值为cend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">。</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">示例：</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">cpp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">struct Member {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string name;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t age;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t sex;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint64_t $seq_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string Name() const { return name; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t Age() const { return age; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">PLATON_SERIALIZE(Member, (name)(age)(sex))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">MultiIndex&lt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">&quot;table&quot;_n, Member,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index&quot;_n, IndexMemberFun&lt;Member, std::string, &amp;Member::Name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                    IndexType::UniqueIndex&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">IndexedBy&lt;&quot;index2&quot;_n, IndexMemberFun&lt;Member, uint8_t, &amp;Member::Age,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::NormalIndex&gt;&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">member_table;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">auto vect_iter = member_table.find&lt;&quot;index2&quot;_n&gt;(uint8_t(10));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; template&lt;Name::Raw IndexName&gt;auto platon::db::MultiIndex&lt; TableName, T, Indices &gt;::get_index()</code>
获取非唯一索引的索引对象。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">返回值</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> 索引对象</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">示例：</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">cpp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">struct Member {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string name;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t age;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t sex;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint64_t $seq_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string Name() const { return name; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t Age() const { return age; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">PLATON_SERIALIZE(Member, (name)(age)(sex))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">MultiIndex&lt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">&quot;table&quot;_n, Member,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index&quot;_n, IndexMemberFun&lt;Member, std::string, &amp;Member::Name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                    IndexType::UniqueIndex&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">IndexedBy&lt;&quot;index2&quot;_n, IndexMemberFun&lt;Member, uint8_t, &amp;Member::Age,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::NormalIndex&gt;&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">member_table;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">auto index = member_table.get_index&lt;&quot;index2&quot;_n&gt;();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li><li><p><code>template&lt;Name::Raw TableName, typename T , typename... Indices&gt; template&lt;typename Lambda &gt;void platon::db::MultiIndex&lt; TableName, T, Indices &gt;::modify(const_iterator position,Lambda &amp;&amp; constructor)</code>
基于迭代器修改数据，但不能修改所有与索引相关的字段。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">参数</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">position：</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain">迭代器</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">constructor：</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain">更新目标对象的lambda函数</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">示例：</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">cpp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">struct Member {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string name;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t age;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t sex;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint64_t $seq_;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">std::string Name() const { return name; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">uint8_t Age() const { return age; }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">PLATON_SERIALIZE(Member, (name)(age)(sex))</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">};</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">MultiIndex&lt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">&quot;table&quot;_n, Member,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  IndexedBy&lt;&quot;index&quot;_n, IndexMemberFun&lt;Member, std::string, &amp;Member::Name,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                    IndexType::UniqueIndex&gt;&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">IndexedBy&lt;&quot;index2&quot;_n, IndexMemberFun&lt;Member, uint8_t, &amp;Member::Age,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">                                      IndexType::NormalIndex&gt;&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">member_table;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">member_table.modify(r.first, [&amp;](auto &amp;m) { m.sex = 15; });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)"></span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="合约-api"></a>合约 API<a class="hash-link" href="#合约-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_destroy"></a>platon_destroy()<a class="hash-link" href="#platon_destroy" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_destroy</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>销毁合约。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>合约地址</li></ul></li><li><strong>返回值</strong><ul><li>如果销毁成功，则为 true，否则为 false</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_migrate_contract"></a>platon_migrate_contract()<a class="hash-link" href="#platon_migrate_contract" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">value_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">gas_type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_migrate_contract</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> init_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">value_type  value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gas_type  gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>迁移合约。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>新合约的地址</li><li><code>init_args：</code>输入参数</li><li><code>value：</code>转账金额</li><li><code>gas：</code>支付此交易的 gas 金额</li></ul></li><li><strong>返回值</strong><ul><li>如果迁移成功，则为 true，否则为 false</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cross_call_args"></a>cross_call_args()<a class="hash-link" href="#cross_call_args" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> Args</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">bytes platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">cross_call_args</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Args </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">  args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>构造跨合约调用参数。</p><ul><li><strong>参数</strong><ul><li><code>method：</code>被调用合约的方法名称</li><li><code>args：</code>对应于合约方法的参数</li></ul></li><li><strong>返回值</strong><ul><li>参数字节数组</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_call-12"></a>platon_call() 1/2<a class="hash-link" href="#platon_call-12" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">value_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">gas_type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_call</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> paras</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> value_type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gas_type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>正常的跨合约调用。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>要调用的合约地址</li><li><code>paras：</code>使用函数 cross_call_args 构造的合约参数</li><li><code>gas：</code>对应的合约方法估计消耗的 gas</li><li><code>value：</code>转移到合约的金额</li></ul></li><li><strong>返回值</strong><ul><li>调用成功或失败</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_call-22"></a>platon_call() 2/2<a class="hash-link" href="#platon_call-22" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">return_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">value_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">gas_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> Args</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">auto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_call</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> value_type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gas_type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Args </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">  args</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>正常的跨合约调用。</p><ul><li><p><strong>参数</strong></p><ul><li><code>addr：</code>要调用的合约地址</li><li><code>value：</code>转移到合约的金额</li><li><code>gas：</code>对应的合约方法估计消耗的 gas</li><li><code>method：</code>被调用合约的方法名称</li><li><code>args：</code>对应于合约方法的参数</li></ul></li><li><p><strong>返回值</strong></p><ul><li>合约方法* <strong>返回值</strong>值以及执行是否成功</li></ul></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">platon_call</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xEC081ab45BE978A4A630eB8cbcBffA50E747971B&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint32_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint32_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;add&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">secod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">platon_throw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cross call fail&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_delegate_call-12"></a>platon_delegate_call() 1/2<a class="hash-link" href="#platon_delegate_call-12" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">gas_type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_delegate_call</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> paras</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gas_type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> gas</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>跨合约代理调用。</p><ul><li><strong>参数</strong><ul><li><code>addr：</code>要调用的合约地址</li><li><code>paras：</code>使用函数 cross_call_args 构造的合约参数</li><li><code>gas：</code>对应的合约方法估计消耗的 gas</li></ul></li><li><strong>返回值</strong><ul><li>调用成功或失败</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_delegate_call-22"></a>platon_delegate_call() 2/2<a class="hash-link" href="#platon_delegate_call-22" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">return_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">gas_type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> Args</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">auto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_delegate_call</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Address </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gas_type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> gas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Args </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">  args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>跨合约代理调用。</p><ul><li><p><strong>参数</strong></p><ul><li><code>addr：</code>要调用的合约地址</li><li><code>gas：</code>对应的合约方法估计消耗的 gas</li><li><code>method：</code>被调用合约的方法名称</li><li><code>args：</code>对应于合约方法的参数</li></ul></li><li><p><strong>返回值</strong></p><ul><li>合约方法* <strong>返回值</strong>值以及执行是否成功</li></ul></li><li><p><strong>示例：</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">platon_delegate_call</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xEC081ab45BE978A4A630eB8cbcBffA50E747971B&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint32_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;add&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">secod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">platon_throw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cross call fail&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get_call_output"></a>get_call_output()<a class="hash-link" href="#get_call_output" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">get_call_output</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>获取跨合约调用合约方法的返回值。</p><ul><li><strong>模板参数</strong><ul><li><code>T：</code>输出值类型</li></ul></li><li><strong>参数</strong><ul><li><code>t：</code>合约方法返回的值</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_event"></a>platon_event<a class="hash-link" href="#platon_event" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">topic</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size_t topic_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  size_t args_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>发布事件</p><ul><li><strong>参数</strong><ul><li><code>topic：</code>事件的主题</li><li><code>topic_len：</code>主题的长度</li><li><code>args：</code>参数</li><li><code>args_len：</code>参数的长度</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="异常-api"></a>异常 API<a class="hash-link" href="#异常-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_panic"></a>platon_panic<a class="hash-link" href="#platon_panic" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_panic</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>终止交易，扣除交易的所有 gas</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_revert"></a>platon_revert<a class="hash-link" href="#platon_revert" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">platon_revert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>终止交易并扣除消耗的 gas</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="其他-api"></a>其他 API<a class="hash-link" href="#其他-api" title="标题的直接链接">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="platon_sha3"></a>platon_sha3()<a class="hash-link" href="#platon_sha3" title="标题的直接链接">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">h256 platon</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">platon_sha3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><p>Sh3 算法。</p><ul><li><strong>参数</strong><ul><li><code>data：</code>二进制数据</li></ul></li><li><strong>返回</strong><ul><li>数据哈希</li></ul></li></ul><hr></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/AlayaNetwork/alaya-devdocs/tree/main/website/i18n/zh-CN/docusaurus-plugin-content-docs/current/Wasm_API.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/alaya-devdocs/zh-CN/Wasm_Best_practices"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« 最佳实践</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/alaya-devdocs/zh-CN/JS_SDK"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">JS SDK »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#api" class="table-of-contents__link">API</a><ul><li><a href="#区块-api" class="table-of-contents__link">区块 Api</a></li><li><a href="#交易-api" class="table-of-contents__link">交易 API</a></li><li><a href="#帐户-api" class="table-of-contents__link">帐户 Api</a></li><li><a href="#存储-api" class="table-of-contents__link">存储 API</a></li><li><a href="#合约-api" class="table-of-contents__link">合约 API</a></li><li><a href="#异常-api" class="table-of-contents__link">异常 API</a></li><li><a href="#其他-api" class="table-of-contents__link">其他 API</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.alaya.network/" target="_blank" class="footer-logo-home" rel="noreferrer noopener"><img src="/alaya-devdocs/zh-CN/img/alaya-logo.svg" width="66" height="58"></a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.alaya.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item" hrefzh="https://www.alaya.network/">Alaya network</a></li><li class="footer__item"><a href="https://latticex.foundation/home" target="_blank" rel="noopener noreferrer" class="footer__link-item" hrefzh="https://latticex.foundation/home">LatticeX.Foundation</a></li><li class="footer__item"><a href="https://forum.latticex.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item" hrefzh="https://forum.latticex.foundation/">Forum</a></li></ul></div><div class="gitstar"><a class="github-button" href="https://github.com/PlatONnetwork/PlatON-Go" data-color-scheme="no-preference: light; light: light; dark: light;" data-icon="octicon-star" data-size="small" data-show-count="true" aria-label="Star PlatONnetwork/PlatON-Go on GitHub">Star</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">COPYRIGHT  © 2021 Alaya NETWORK.</div></div></div></footer></div>
<script src="/alaya-devdocs/zh-CN/assets/js/runtime~main.7472df77.js"></script>
<script src="/alaya-devdocs/zh-CN/assets/js/main.6d5741b0.js"></script>
</body>
</html>