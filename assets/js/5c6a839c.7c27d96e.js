(self.webpackChunkalaya_docs=self.webpackChunkalaya_docs||[]).push([[9173],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(a),m=l,k=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return a?n.createElement(k,i(i({ref:t},c),{},{components:a})):n.createElement(k,i({ref:t},c))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6302:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return o},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var n=a(2122),l=a(9756),r=(a(7294),a(3905)),i={id:"Python_SDK",title:"Python SDK",sidebar_label:"Python SDK"},o=void 0,s={unversionedId:"Python_SDK",id:"Python_SDK",isDocsHomePage:!1,title:"Python SDK",description:"Client-sdk-python is a python sdk that serves the underlying chain of Alaya, and it interacts with the underlying chain through the web3 object. At the bottom level, it communicates with local nodes through RPC calls. Client-sdk-python can connect to any Alaya node that exposes the RPC interface.",source:"@site/docs/alaya-python-sdk.md",sourceDirName:".",slug:"/Python_SDK",permalink:"/alaya-devdocs/Python_SDK",editUrl:"https://github.com/AlayaNetwork/alaya-devdocs/tree/main/website/docs/alaya-python-sdk.md",version:"current",frontMatter:{id:"Python_SDK",title:"Python SDK",sidebar_label:"Python SDK"},sidebar:"docs",previous:{title:"Java SDK",permalink:"/alaya-devdocs/Java_SDK"},next:{title:"Go SDK",permalink:"/alaya-devdocs/Go_SDK"}},p=[{value:"Getting Started",id:"getting-started",children:[{value:"Usage",id:"usage",children:[]},{value:"Contract",id:"contract",children:[]},{value:"Built-in Contracts",id:"built-in-contracts",children:[]}]}],c={toc:p};function d(e){var t=e.components,a=(0,l.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Client-sdk-python is a python sdk that serves the underlying chain of Alaya, and it interacts with the underlying chain through the web3 object. At the bottom level, it communicates with local nodes through RPC calls. Client-sdk-python can connect to any Alaya node that exposes the RPC interface."),(0,r.kt)("p",null,"It is mainly used to obtain block data, send transactions, interact with smart contracts, etc."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/AlayaNetwork/client-sdk-python"},"Download client-sdk-python")),(0,r.kt)("h2",{id:"getting-started"},"Getting Started"),(0,r.kt)("h4",{id:"python-environment-requirements"},"Python Environment Requirements"),(0,r.kt)("p",null,"Python 3.6+ version is supported."),(0,r.kt)("h4",{id:"installation"},"Installation"),(0,r.kt)("p",null,"You can either use pip to install or download the source code."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Directly install with pip"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"}," pip install client-sdk-python\n")),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"The currently compiled version of client-sdk-python is the alaya branch, and the version number is: 1.0.0.2")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Download the source code"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"git clone -b develop https://github.com/AlayaNetwork/client-sdk-python.git\n")),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"develop")," is the currently used branch.")))),(0,r.kt)("h3",{id:"usage"},"Usage"),(0,r.kt)("h4",{id:"web3-module"},"Web3 Module"),(0,r.kt)("p",null,"Alaya nodes communicate with each other through P2PMessage. In the case of the communication between nodes and python sdk, the built-in Web3 module is used to send JSON-RPC requests and connect to the node through HTTP, websocket, IPC and other methods. ",(0,r.kt)("strong",{parentName:"p"},"ChainID of the mainnet is 201018, and the ChainID of Alaya development network open to developers is 201030.")),(0,r.kt)("h4",{id:"node-connection"},"Node Connection"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Take HTTP connection as an example to connect to an Alaya node. For details, see ",(0,r.kt)("a",{parentName:"p",href:"https://devdocs.alaya.network/alaya-devdocs/en/Join_Alaya_NetWork/"},"Join Alaya Network"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'w3 = Web3(HTTPProvider("http://47.241.91.2:6789"),chain_id = 201030)\n// alaya is an instance of the PlatON class\nalaya = PlatON(w3)\nprint(w3.isConnected())\n')),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"}," http://47.241.91.2:6789")," is a node Url of Alaya. Please enter the Url of the accessible Alaya node.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Take Websocket connection as an example."),(0,r.kt)("p",{parentName:"li"},"Code is shown as below:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# websockets Versions>= 8.0\n  w3 = Web3(WebsocketProvider("ws://47.241.91.2:6790"),chain_id =201030)\n  alaya = PlatON(w3)\n  print(w3.isConnected())\n')))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Take IPC connection as an example."),(0,r.kt)("p",{parentName:"li"},"Code is shown as below:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# platon.ipc in the node directory ~/platon-node/data/ \u4e0b\n  w3 = Web3(IPCProvider("./platon.ipc"),chain_id = 201030)\n  alaya = PlatON(w3)\n  print(w3.isConnected())\n')))),(0,r.kt)("h4",{id:"basic-api"},"Basic API"),(0,r.kt)("h5",{id:"basic-types-of-coding-and-encoding"},"Basic Types of Coding and Encoding"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.toBytes()")),(0,r.kt)("p",{parentName:"li"},"It converts the input parameters to Bytes."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.toBytes(0)\nb'\\x00'\n>>> Web3.toBytes(0x000F)\nb'\\x0f'\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.toHex()")),(0,r.kt)("p",{parentName:"li"},"It converts the input parameter to a hexadecimal parameter."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.toHex(b'\\x00\\x0F')\n'0x000f'\n>>> Web3.toHex(False)\n'0x0'\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.toInt()")),(0,r.kt)("p",{parentName:"li"},"It converts the input parameter to an integer."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.toInt(0x000F)\n15\n>>> Web3.toInt(b'\\x00\\x0F')\n15\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.toJSON()")),(0,r.kt)("p",{parentName:"li"},"It converts the input parameter to an integer."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.toJSON(3)\n'3'\n>>> Web3.toJSON({'one': 1})\n'{\"one\": 1}'\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.toText()")),(0,r.kt)("p",{parentName:"li"},"It converts the input parameters to json format."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.toText(b'cowm\\xc3\\xb6')\n'cowm\xf6'\n>>> Web3.toText(hexstr='0x636f776dc3b6')\n'cowm\xf6'\n")))),(0,r.kt)("h5",{id:"address-detection"},"Address Detection"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.isAddress()")),(0,r.kt)("p",{parentName:"li"},"It checks whether the input parameter is an approved address format."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.isAddress('0xd3CdA913deB6f67967B99D67aCDFa1712C293601')\nTrue\n")))),(0,r.kt)("h5",{id:"hash-encryption"},"Hash Encryption"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.sha3()")),(0,r.kt)("p",{parentName:"li"},"It compiles the input parameters to Keccak-256."),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> Web3.sha3(0x678901)\n    HexBytes('0x77cf3b4c68ccdb65991397e7b93111e0f7d863df3b26ebb053d0857e26486e6a')\n>>> Web3.sha3(text='txt')\n    HexBytes('0xd7278090a36507640ea6b7a0034b69b0d240766fa3f98e3722be93c613b29d2e')\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Web3.soliditySha3()")),(0,r.kt)("p",{parentName:"li"},"It compiles the input abi_type and value into Keccak-256."),(0,r.kt)("p",{parentName:"li"},"Parameters:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"value: the true value."),(0,r.kt)("li",{parentName:"ul"},"abi_type: A string list in solidity format equal to value.")),(0,r.kt)("p",{parentName:"li"},"Method:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'>>> Web3.solidityKeccak([\'uint8[]\'], [[97, 98, 99]])\nHexBytes("0x233002c671295529bcc50b76a2ef2b0de2dac2d93945fca745255de1a9e4017e")\n\n>>> Web3.solidityKeccak([\'address\'], ["0x49EdDD3769c0712032808D86597B84ac5c2F5614"])\nHexBytes("0x2ff37b5607484cd4eecf6d13292e22bd6e5401eaffcc07e279583bc742c68882")\n')))),(0,r.kt)("h4",{id:"query-api-on-chain"},"Query API on Chain"),(0,r.kt)("p",null,"After successfully connecting with the nodes on the Alaya chain, you can query the relevant information of the nodes on the chain through the api in ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya"),"."),(0,r.kt)("h5",{id:"alayablocknumber"},"alaya.blockNumber"),(0,r.kt)("p",null,"It returns the current block number."),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is the number of the most recent block, in the type of ",(0,r.kt)("inlineCode",{parentName:"p"},"Number"),"."),(0,r.kt)("h5",{id:"alayasyncing"},"alaya.syncing"),(0,r.kt)("p",null,"It checks whether the node is currently synchronized with the network."),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object with a resolved value of ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Bool"),". If the node has not been synchronized with the network, it returns ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),"; otherwise it returns a synchronization object with the following properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"startingBlock"),"-Number: Number of starting block in synchronization"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"currentBlock"),"-Number: Number of the currently synchronized block"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"highestBlock"),"-Number: Estimated number of the target synchronization block"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"knownStates"),"-Number: Estimated state to be downloaded."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pulledStates"),"-Number: The states that have been downloaded.")),(0,r.kt)("h5",{id:"alayagasprice"},"alaya.gasPrice"),(0,r.kt)("p",null,"It gets the current gas price, which is determined by the median gas price of several recent blocks."),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is a string representing the current gas price, in VON."),(0,r.kt)("h5",{id:"alayaaccounts"},"alaya.accounts"),(0,r.kt)("p",null,"It returns the list of accounts controlled by the current node."),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is an array of account addresses."),(0,r.kt)("h5",{id:"alayaevidences"},"alaya.evidences"),(0,r.kt)("p",null,"It returns the storage content at the specified location of the account address."),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is the stored content of an account address."),(0,r.kt)("h5",{id:"alayaconsensusstatus"},"alaya.consensusStatus"),(0,r.kt)("p",null,"It returns the consensus state information of the block tree where the current node is located."),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose value is the public state information of all the blocks in the block tree."),(0,r.kt)("h5",{id:"alayagetbalanceaddress"},"alaya.getBalance(address)"),(0,r.kt)("p",null,"To get the balance of a specific account address in the specified block."),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address"),": String-The address of the account whose balance is to be checked, in bech32 address format. In the Alaya network, addresses starting with ",(0,r.kt)("inlineCode",{parentName:"li"},"atx")," are on the testnest, and those starting with ",(0,r.kt)("inlineCode",{parentName:"li"},"atp")," are on the mainnet (ChainID: 201018) or the development network (ChainID: 201030). In the PlatON network, the ones starting with ",(0,r.kt)("inlineCode",{parentName:"li"},"lax")," are on the testnet, and those starting with ",(0,r.kt)("inlineCode",{parentName:"li"},"lat")," are on the mainnet (ChainID: 100) or the development network (ChainID: 210309).")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is the balance string of the specified account address, in the unit of ",(0,r.kt)("inlineCode",{parentName:"p"},"VON"),"."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from client_sdk_python import Web3, HTTPProvider\nfrom client_sdk_python.eth import PlatON\nfrom hexbytes import HexBytes\n\n# get blockNumber syncing gasPrice accounts evidences consensusStatus\n\nw3 = Web3(HTTPProvider(\"http://47.241.91.2:6789\"),chain_id = 201030)\nalaya = PlatON(w3)\nblock_number = alaya.blockNumber\nprint(block_number)\nprint(alaya.syncing)a\nprint(alaya.gasPrice)\nprint(alaya.accounts)\nprint(alaya.evidences)\nprint(alaya.consensusStatus)\n\n# get Balance\n\naddress = 'atp1ft2fuhh6q8pvpwe4jl3vqc2qhmhqs6ktl7e7g5'\nbalance = alaya.getBalance(address)\nprint(balance)\n\n#Output\n11524411\nFalse\n1000000000\n[]\n{}\nAttributeDict({'blockTree': AttributeDict({'root': AttributeDict({'viewNumber': 16, 'blockHash': '0x5070404fbfaeb199ed29aee0723bb8f0de12391606235d4bfe61865bd8fa994e', 'blockNumber': 11524412, 'receiveTime': '2021-08-04T04:02:29.295222897Z', 'qc': AttributeDict({'epoch': 46098, 'viewNumber': 16, 'blockHash': '0x5070404fbfaeb199ed29aee0723bb8f0de12391606235d4bfe61865bd8fa994e', 'blockNumber': 11524412, 'blockIndex': 1, 'signature': '0x4da9acd9b911905d4f9275b7256a76aa254bfc5930903b015e05de6af48e021c8a49d5bd430dc27073d13c246c31b90100000000000000000000000000000000', 'validatorSet': 'xxx_xx'}), 'parentHash': '0x0000000000000000000000000000000000000000000000000000000000000000', 'childrenHash': ['0x83d225f2f00bce603ee85b7b963c31ceefe6df131c232e2ef12c40ca58496119']}), 'blocks': AttributeDict({'11524412': AttributeDict({'0x5070404fbfaeb199ed29aee0723bb8f0de12391606235d4bfe61865bd8fa994e': AttributeDict({'viewNumber': 16, 'blockHash': '0x5070404fbfaeb199ed29aee0723bb8f0de12391606235d4bfe61865bd8fa994e', 'blockNumber': 11524412, 'receiveTime': '2021-08-04T04:02:29.295222897Z'\n"))),(0,r.kt)("h5",{id:"alayagetstorageat"},"alaya.getStorageAt()"),(0,r.kt)("p",null,"It returns the storage content in the specified location of an address."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"  alaya.getStorageAt(address, position [, defaultBlock] )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address"),": String-The address to be read."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"position"),": Number-The index number in the storage."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"defaultBlock"),": Number|String-Optional. This parameter can be used to overwrite the value of ",(0,r.kt)("inlineCode",{parentName:"li"},"alaya.defaultBlock"),".")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is the content of the specified location in the storage."),(0,r.kt)("h5",{id:"alayagetcode"},"alaya.getCode()"),(0,r.kt)("p",null,"It returns the code at the specified address."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"  alaya.getCode(address [, defaultBlock] )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address"),": String-The address of the code to be read."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"defaultBlock"),": Number|String-Optional. This parameter can be used to overwrite the value of ",(0,r.kt)("inlineCode",{parentName:"li"},"alaya.defaultBlock"),".")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is the code string at the specified address."),(0,r.kt)("h5",{id:"alayagetblock"},"alaya.getBlock()"),(0,r.kt)("p",null,"It returns the block corresponding to the specified block number or block hash."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getBlock(blockHashOrBlockNumber [, returnTransactionObjects] )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockHashOrBlockNumber"),': String|Number-Block number or block hash value. Or you can use the following string: "genesis", "latest" or "pending".'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"returnTransactionObjects"),": Boolean-Optional. The default value is ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),". When it is set to ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),", all transaction details will be included in the return block; otherwise only the transaction hash will be returned.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is a block object that meets the search conditions and has the following fields:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"number"),"-Number: Block number, or ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," if it is a pending block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hash 32 Bytes"),"-String: Block hash, or ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," if it is a pending block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"parentHash 32 Bytes"),"-String: The hash of the parent block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nonce 8 Bytes"),"-String: The hash of the generated proof-of-work, or ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," if it is a pending block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sha3Uncles 32 Bytes"),"-String: ",(0,r.kt)("inlineCode",{parentName:"li"},"SHA3")," value of the uncle data in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"logsBloom 256 Bytes"),"-String: The bloom filter of the log in the block, ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," if it is a pending block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionsRoot 32 Bytes"),"-String: The root node of the transaction tree in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"stateRoot 32 Bytes"),"-String: The root node of the final state tree in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"miner"),"-String: The address of the miner who receives the reward."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"difficulty"),"-String: The difficulty value of the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"totalDifficulty"),"-String: The total difficulty value of the whole chain until this block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"extraData"),'-String: The "extra data" field of the block.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"size"),"-Number: The block size in bytes."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gasLimit"),"-Number: The maximum gas allowed in this block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gasUsed"),"-Number: The total amount of gas used by all transactions in this block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"timestamp"),"-Number: The unix timestamp at which the block was generated (millisecond)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactions"),"-Array: Transaction object array, or 32-byte transaction hash value, depending on the setting of ",(0,r.kt)("inlineCode",{parentName:"li"},"returnTransactionObjects"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"uncles"),"-Array: Array of uncle block hashes")),(0,r.kt)("h5",{id:"alayagetblocktransactioncount"},"alaya.getBlockTransactionCount()"),(0,r.kt)("p",null,"It returns the number of transaction in a given block."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getBlockTransactionCount(blockHashOrBlockNumber)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockHashOrBlockNumber")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String|Number"),': The block number or hash. Or the string "genesis", "latest", "earliest", or "pending" as in the default block parameter.')),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null," An AttributeDict object whose resolved value is the number of transactions in the specified block, in the type of Number."),(0,r.kt)("h5",{id:"alayagettransaction"},"alaya.getTransaction()"),(0,r.kt)("p",null,"It returns a transaction matching the given transaction hash."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"  alaya.getTransaction(transactionHash)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionHash")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": The transaction hash.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is a transaction object with a given hash value. For the specific description of this object, see: ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.waitForTransactionReceipt"),"."),(0,r.kt)("h5",{id:"alayagetrawtransaction"},"alaya.getRawTransaction()"),(0,r.kt)("p",null,"It returns the HexBytes value of the transaction object with the specified hash value."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"  alaya.getRawTransaction(transactionHash )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionHash")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": The transaction hash.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An object of HexBytes."),(0,r.kt)("h5",{id:"alayagettransactionfromblock"},"alaya.getTransactionFromBlock()"),(0,r.kt)("p",null,"It returns a transaction based on a block hash or number and the transactions index position."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"  getTransactionFromBlock(hashStringOrNumber, indexNumber )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hashStringOrNumber"),': String-Block number or hash value of the block. Or the string "genesis", "latest", "earliest", or "pending" as in the default block parameter.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"indexNumber"),": Number-Transaction index position.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"A Promise object whose resolved value is a transaction object. For a description of the specific content of the object, see alaya.getTransaction()"),(0,r.kt)("h4",{id:"sending-transactions-api-on-chain"},"Sending Transactions API on chain"),(0,r.kt)("h5",{id:"sendtransactiontransactionobject"},"sendTransaction(transactionObject)"),(0,r.kt)("p",null,"It submits a transaction to the Alaya chain (a transaction that has been signed by the node and has not yet been submitted)."),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionObject"),": Object-The transaction object to be sent, including the following fields:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from"),"-String|Number: The account address of the transaction sender. If this field is not set, the ",(0,r.kt)("inlineCode",{parentName:"li"},"platon.defaultAccount")," property will be used. It can be set to an address or the index number in the local wallet platon.accounts.wallet."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to"),"-String: Optional, the destination address of the message. For transactions to create a contract, this field is null."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"value"),"-Number|String|BN|BigNumber: (optional) The value transferred for the transaction in VON, also the endowment if it\u2019s a transaction to create a contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas"),"-Number: Optional, default value: to be determined. The total amount of gas used for the transaction (unused gas is refunded)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gasPrice"),"-Number|String|BN|BigNumber: Optional. The gas price of the transaction, in VON, defaulting to ",(0,r.kt)("inlineCode",{parentName:"li"},"platon.gasPrice"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),"-String: Optional. Either an ABI string containing the data of the function call on a contract, or the initialization code in the case of a transaction to create a contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nonce"),"-Number: Optional. This field allows overwriting the pending transactions that use the same nonce.")))),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"alaya.sendTransaction()")," returns the 32-byte transaction hash."),(0,r.kt)("h5",{id:"waitfortransactionreceipttransaction_hash-timeout"},"waitForTransactionReceipt(transaction_hash, timeout)"),(0,r.kt)("p",null,"It returns the receipt of a specific transaction within the specific time."),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hash"),"\uff1aString - The transaction hash."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"timeout"),": Number- Optional. The length of waiting time, in seconds. The default is 120.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is the receipt of the transaction or null. The receipt object has the following fields:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockHash")," 32 Bytes - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Hash of the block where this transaction is in."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockNumber")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": Block number where this transaction is in."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionHash")," 32 Bytes - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Hash of the transaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionIndex"),"- ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": Index position of the transaction in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Address of the sender."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Address of the receiver. null when it's a transaction to create a contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"contractAddress")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": The contract address created, if the transaction is to create a contract, or null otherwise."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cumulativeGasUsed")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": The total amount of gas used when this transaction is executed in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gasUsed")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": The amount of gas used by this specific transaction alone."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"logs")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Array"),": Array of log objects, which were generated by this transaction.")),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Examples of how to use `sendTransaction` and `waitForTransactionReceipt` are as follows:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# sendtransaction\nto = 'atp1ft2fuhh6q8pvpwe4jl3vqc2qhmhqs6ktl7e7g5'  #Address of the receiver\nw3.personal.unlockAccount(address, \"password\", 999999)\ndata = {\n    \"from\": address,\n    \"to\": to,\n    \"value\": 0x10909,\n    \"gas\": 1000000,\n    \"gasPrice\": 1000000000,\n}\ntransaction_hex = HexBytes(alaya.sendTransaction(data)).hex()\nresult = alaya.waitForTransactionReceipt(transaction_hex)\nprint(result)\n\n#Output\nAttributeDict({'blockHash': HexBytes('0x7bfe17689560c773b1cade579f1bd2cf85aeea9f75177e0e06bcdb4aeebd31a8'), 'blockNumber': 385507, 'contractAddress': None, 'cumulativeGasUsed': 21000, 'from': 'atp1ft2fuhh6q8pvpwe4jl3vqc2qhmhqs6ktl7e7g5', 'gasUsed': 21000, 'logs': [], 'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'), 'status': 1, 'to': 'atp1ft2fuhh6q8pvpwe4jl3vqc2qhmhqs6ktl7e7g5', 'transactionHash': HexBytes('0x377fcd0dfb5e294041fe4274175ed7fce253973fac7abf4e4ff808b5099a454c'), 'transactionIndex': 0})\n"))),(0,r.kt)("h5",{id:"alayagettransactionreceipt"},"alaya.getTransactionReceipt()"),(0,r.kt)("p",null,"It  returns the receipt of a transaction by transaction hash."),(0,r.kt)("p",null,"It returns ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," if the transaction is pending."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getTransactionReceipt(hash)\uff1a\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hash"),"\uff1aString - The transaction hash.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"A Promise object whose resolved value is the receipt object of the transaction or ",(0,r.kt)("inlineCode",{parentName:"p"},"null"),". For details of the object description, see ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.waitForTransactionReceipt"),"."),(0,r.kt)("h5",{id:"alayagettransactioncount"},"alaya.getTransactionCount()"),(0,r.kt)("p",null,"It returns the numbers of transactions sent from this address."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getTransactionCount(address [, defaultBlock] )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address"),"\uff1aString - The address to get the numbers of transactions from."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"defaultBlock"),"\uff1aNumber|String - (optional) Set this parameter to overwrite the alaya.defaultBlock property value.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"A Promise object whose resolved value is the number of transactions issued by the specified address."),(0,r.kt)("h5",{id:"alayasendrawtransaction"},"alaya.sendRawTransaction()"),(0,r.kt)("p",null,"It submits a signed serialized transaction to the alaya chain"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.sendRawTransaction(signTransaction\uff0cprivate_key)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionObject"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"Object")," - The transaction object to send, including the following fields:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String|Number"),": The address of the sending account, which uses the ",(0,r.kt)("inlineCode",{parentName:"li"},"alaya.defaultAccount")," property, if not specified; or an address or index of a local wallet in alaya.accounts.wallet."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": (optional) The destination address of the message, or ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," for a transaction to create a contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"value")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number|String|BN|BigNumber"),": (optional) The value transferred for the transaction in VON, also the endowment if it\u2019s a transaction to create a contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": (optional, default: to be determined) The amount of gas to use for the transaction (unused gas is refunded)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gasPrice")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number|String|BN|BigNumber"),": (optional) The price of gas for this transaction in ",(0,r.kt)("inlineCode",{parentName:"li"},"VON"),", defaulting to ",(0,r.kt)("inlineCode",{parentName:"li"},"alaya.gasPrice"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": (optional) Either an ABI byte string containing the data of the function call on a contract, or the initialisation code in the case of a transaction to create a contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nonce")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": (optional). This allows to overwrite the pending transactions that use the same nonce."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"private_key"),": The private key for signature.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"It returns the HexBytes of the 32-byte transaction hash."),(0,r.kt)("h5",{id:"alayareplacetransaction"},"alaya.replaceTransaction()"),(0,r.kt)("p",null,"It sends a new transaction ",(0,r.kt)("inlineCode",{parentName:"p"},"new_transaction")," to replace the original transaction ",(0,r.kt)("inlineCode",{parentName:"p"},"transaction_hash")," (in the pending state)."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.replaceTransaction`(transaction_hash,new_transaction)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"transaction_hash-string: The hash value of the transaction in the pending state."),(0,r.kt)("li",{parentName:"ul"},"new_transaction-dict: Transaction object, including fields consistent with transactionObject in sendTransaction.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"Hash of new_transaction."),(0,r.kt)("h5",{id:"alayagenerategasprice"},"alaya.generateGasPrice()"),(0,r.kt)("p",null,"It uses the selected gas price strategy to calculate a gas price."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.generateGasPrice(gas_price_strategy)\n")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"The value of gas price in wei."),(0,r.kt)("h5",{id:"alayasetgaspricestrategy"},"alaya.setGasPriceStrategy()"),(0,r.kt)("p",null,"It sets the selected gas price strategy."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.setGasPriceStrategy(gas_price_strategy)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"gas_price_strategy: (web3, transaction_params), which must be a signature method.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"The value of gas price in wei."),(0,r.kt)("h5",{id:"alayamodifytransaction"},"alaya.modifyTransaction()"),(0,r.kt)("p",null,"It sends new parameters to modify the transaction in the pending state."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.modifyTransaction(transaction_hash, **transaction_params)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"transaction_hash -string: The hash value of the transaction in the pending state."),(0,r.kt)("li",{parentName:"ul"},"transaction_params: Keyword statements corresponding to the parameters of transaction_hash. For example, if value=1000, change the value in the original transaction to 1000.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"The hash value of the modified transaction."),(0,r.kt)("h5",{id:"alayasign"},"alaya.sign()"),(0,r.kt)("p",null,"It signs data using a specific account. This account needs to be unlocked first."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.sign(dataToSign, address )\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dataToSign"),": String-The data to be signed. For the string, first use utils.utf8ToHex() to convert it to a hexadecimal"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address"),"\uff1aString|Number - Address to sign data. Or an address or index of a local wallet in alaya.accounts.wallet.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"The signature result string."),(0,r.kt)("h5",{id:"alayaestimategas"},"alaya.estimateGas()"),(0,r.kt)("p",null,"It executes a message call or transaction and returns the amount of the gas used."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.estimateGas(callObject)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callObject"),"\uff1aObject - Transaction object, whose from property is optional")),(0,r.kt)("p",null,"Return value"),(0,r.kt)("p",null,"Gas used in the simulated call."),(0,r.kt)("h4",{id:"other-api"},"Other API"),(0,r.kt)("h5",{id:"alayafilter"},"alaya.filter"),(0,r.kt)("p",null,"It generates a new filter. The type of the filter generated depends on the parameters."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.filter(params)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"latest"),". It creates a filter in the node for notification when a new block is generated. Remember to check whether the state has changed.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pending"),". It creates a filter in the node for notification when a pending transaction occurs. Remember to check whether the state has changed.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Dictionary data. It creates a filter for notification when the client receives a matching whisper message."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> alaya.filter('latest')\n<client_sdk_python.utils.filters.BlockFilter object at 0x0000020640DA1048>\n>>> alaya.filter('pending')\n<client_sdk_python.utils.filters.TransactionFilter object at 0x0000020640DA7C08>\n>>> alaya.filter({'fromBlock': 11529962,  'address': 'atp1ft2fuhh6q8pvpwe4jl3vqc2qhmhqs6ktl7e7g5'})\n<client_sdk_python.eth.PlatON object at 0x10c608220>\n")))),(0,r.kt)("h5",{id:"alayagetfilterchanges"},"alaya.getFilterChanges()"),(0,r.kt)("p",null,"It polls the specified filter and returns the newly generated log array since the last poll."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getFilterChanges(filter_id)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"filter_id"),": Filter_id of the specified filter.")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>>filt=alaya.filter('latest')\n>>>alaya.getFilterChanges(filt.filter_id)\n[HexBytes('0x54502fa45a69e787187b1033a892b047313818c48ce85bfe1b2a2bf2151ca383'), HexBytes('0x8c3ba2aeba07a2bdfda558f7aaeaadadffd19b4a4e1d940dae3c6844ee0e1102')]\n")),(0,r.kt)("h5",{id:"alayagetfilterlogs"},"alaya.getFilterLogs()"),(0,r.kt)("p",null,"It polls the specified filter and returns the corresponding log array."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getFilterLogs(filter_id)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"filter_id"),": filter_id of the specified filter.")),(0,r.kt)("h5",{id:"alayauninstallfilter"},"alaya.uninstallFilter()"),(0,r.kt)("p",null,"It uninstalls the specified filter and returns the bool value of success or failure."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getFilterLogs(filter_id)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"filter_id"),": filter_id of the specified filter.")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},">>> alaya.uninstallFilter(filt.filter_id)\nTrue\n")),(0,r.kt)("h5",{id:"alayagetlogs"},"alaya.getLogs()"),(0,r.kt)("p",null,"It returns all logs according to the specified options"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"alaya.getLogs(options)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"options"),": Object-Filter object, including the following fields:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'fromBlock - Number|String: The number of the earliest block ("latest" may be given to mean the most recent and "pending" currently mining, block). By default "latest".'),(0,r.kt)("li",{parentName:"ul"},'toBlock - Number|String: The number of the latest block ("latest" may be given to mean the most recent and "pending" currently mining, block). By default "latest".'),(0,r.kt)("li",{parentName:"ul"},"address - String|Array: An address or a list of addresses to only get logs from particular account(s)."),(0,r.kt)("li",{parentName:"ul"},"topics - Array: An array of values which must each appear in the log entries. The order is important, if you want to leave topics out use null, e.g. ","[null, '0x12...']",". You can also pass an array for each topic with options for that topic, e.g. [null, ","['option1', 'option2']","]")))),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"An AttributeDict object whose resolved value is an array of log objects."),(0,r.kt)("p",null,"The structure of the events in the array looks as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Address where this event originated."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data")," -String: This field contains unindexed log parameters"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"topics")," -Array: Up to four 32-byte-long subject string arrays can be stored. Subjects 1-3 include index parameters for events"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionIndex")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": Index position of the transaction in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionIndex"),"-Number: Index position of the transaction containing the event."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockHash 32 Bytes"),"-String: The hash value of the block containing the event, or ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," if it is pending."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockNumber"),"-Number: The block number containing the event, or  ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," if it is pending.")),(0,r.kt)("h5",{id:"functions"},"functions()"),(0,r.kt)("p",null,"The entry point for calling the contract function."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"myContract.functions.myMethod([param1[, param2[, ...]]]).transact(options)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"options"),"-Object: Options, including the following fields:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"from")," - String (optional): The address the call \u201ctransaction\u201d should be made from.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"gasPrice")," - String (optional): The gas price in VON to use for this call \u201ctransaction\u201d.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"gas")," - Number (optional): The maximum gas provided for this call \u201ctransaction\u201d (gas limit)."))))),(0,r.kt)("h5",{id:"call"},"call()"),(0,r.kt)("p",null,"It calls a contract and executes the method directly in the contract without sending any transactions. Therefore, the state of the contract will not be changed."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"myContract.functions.myMethod([param1[, param2[, ...]]]).call()\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"[param1[, param2","[, ...]","]]: Parameters input according to the data type defined in myMethod.")),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"The resolved value is the contract method, in the Mixed type. If it returns multiple values, the resolved value is an object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"tx_hash1 = payable.functions.setInt64(-9223372036854775808).transact(\n    {\n        'from':from_address,\n        'gas':1500000,\n    }\n)\nprint(alaya.waitForTransactionReceipt(tx_hash1))\nprint('get : {}'.format(\n    payable.functions.getInt64().call()\n))\n\n#Output\nget : -9223372036854775808\n")),(0,r.kt)("h5",{id:"events"},"events"),(0,r.kt)("p",null,"It subscribes to the specified contract event."),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"myContract.events.MyEvent([options])\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"options"),"-Object: Optional, options for deployment, including the following fields:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"filter"),"-Object: Optional, which filters events by index parameter. For example, {filter: {myNumber: ","[12,13]",'}} means all events whose "myNumber" is 12 or 13.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fromBlock"),"-Number: Optional, which only listens to events that occur in the block with the number specified by this option."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"topics"),"-Array: Optional, used to manually set topics for event filters. If the filter attribute and event signature have been set, then (topic","[0]",") will not be set automatically.")))),(0,r.kt)("p",null,"Return value:"),(0,r.kt)("p",null,"EventEmitter: The event emitter declares the following events:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'"data" returns Object: Triggered when a new event is received. The parameter is the event object'),(0,r.kt)("li",{parentName:"ul"},'"changed" returns Object: Triggered when the event is removed from the blockchain. The event object will be added with an additional property "removed: true"'),(0,r.kt)("li",{parentName:"ul"},'"error" returns Object: Triggered when an error occurs')),(0,r.kt)("p",null,"The structure of the returned event looks as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"event")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": The event name."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"signature")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String|Null"),": The event signature; null if it\u2019s an anonymous event."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Address where this event originated."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"returnValues")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Object"),": The return values from the event, e.g. {myVar: 1, myVar2: '0x234...'}."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"logIndex")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": The index position of the event in the block."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionIndex")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": The index position of the event in a transaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transactionHash 32 Bytes"),"  - ",(0,r.kt)("inlineCode",{parentName:"li"},"String")," Hash of the transaction where this event was created."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockHash 32 Bytes")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"String"),": Hash of the block where this event was created. null when it\u2019s still pending."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blockNumber")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"Number"),": The number of block where this log was created. null when it's still pending."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"raw.data")," -String: This field contains unindexed log parameters"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"raw.topics")," -Array: Up to four 32-byte long subject string arrays can be stored. Subjects 1-3 include index parameters for events")),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"greeter = alaya.contract(address=tx_receipt.contractAddress, abi=abi)\n\ntx_hash = greeter.functions.setVar(100).transact(\n    {\n        'from':from_address,\n        'gas':1500000,\n    }\n)\n\ntx_receipt = alaya.waitForTransactionReceipt(tx_hash)\nprint(tx_receipt)\n\ntopic_param = greeter.events.MyEvent().processReceipt(tx_receipt)\nprint(topic_param)\n\n#Output\uff1a\nAttributeDict({'blockHash': HexBytes('0x78fb61da83dae555c8a8a87fc3296f466afeb7f90e9a3b0ac5689e8b34435174'), 'blockNumber': 2014683, 'contractAddress': None, 'cumulativeGasUsed': 43148, 'from': 'atx1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl', 'gasUsed': 43148, 'logs': [AttributeDict({'address': 'atp1plhafce07ymacurudqdrewhtrrx4r2nxrju39h', 'topics': [HexBytes('0x6c2b4666ba8da5a95717621d879a77de725f3d816709b9cbe9f059b8f875e284'), HexBytes('0x0000000000000000000000000000000000000000000000000000000000000064')], 'data': '0x', 'blockNumber': 2014683, 'transactionHash': HexBytes('0xe36b5d2b679d5635ab6dd2b620caa50a476fa84bd93bf7b6c8de807f3a9da483'), 'transactionIndex': 0, 'blockHash': HexBytes('0x78fb61da83dae555c8a8a87fc3296f466afeb7f90e9a3b0ac5689e8b34435174'), 'logIndex': 0, 'removed': False})], 'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000020080000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000004000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000008000000000000000'), 'status': 1, 'to': 'atp1plhafce07ymacurudqdrewhtrrx4r2nxrju39h', 'transactionHash': HexBytes('0xe36b5d2b679d5635ab6dd2b620caa50a476fa84bd93bf7b6c8de807f3a9da483'), 'transactionIndex': 0})\n(AttributeDict({'args': AttributeDict({'_var': 100}), 'event': 'MyEvent', 'logIndex': 0, 'transactionIndex': 0, 'transactionHash': HexBytes('0xe36b5d2b679d5635ab6dd2b620caa50a476fa84bd93bf7b6c8de807f3a9da483'), 'address': 'atp1plhafce07ymacurudqdrewhtrrx4r2nxrju39h', 'blockHash': HexBytes('0x78fb61da83dae555c8a8a87fc3296f466afeb7f90e9a3b0ac5689e8b34435174'), 'blockNumber': 2014683}),)\n\n"))),(0,r.kt)("h4",{id:"get-hrp"},"Get hrp"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'w3 = Web3(HTTPProvider("http://47.241.91.2:6789"),chain_id = 201030)\nalaya = PlatON(w3)\n# client-sdk-python 1.0.0.2 Version not adapted.\nprint(alaya.getAddressHrp)\n')),(0,r.kt)("h3",{id:"contract"},"Contract"),(0,r.kt)("h4",{id:"about-contract"},"About contract"),(0,r.kt)("p",null,"The Alaya blockchain supports smart contracts (EVM) created using the solidity language and also WebAssembly (WASM) to execute smart contracts written by users. Among them, WASM is a binary instruction set designed for stack virtual machines. WASM is designed as a target for platform compilation of high-level languages like C/C++/Rust to solve the performance problem of JavaScript. WASM is a Web standard that is being promoted by W3C and is supported by browser vendors such as Google, Microsoft, and Mozilla.\nFor details on the introduction, creation, and compilation of EVM and WASM contracts, please refer to ",(0,r.kt)("a",{parentName:"p",href:"https://devdocs.alaya.network/alaya-devdocs/en/EVM_Smart_Contract/"},"Alaya EVM Smart Contract")," and ","[Alaya WASM Smart Contract]"," ](",(0,r.kt)("a",{parentName:"p",href:"https://devdocs.alaya.network/alaya-devdocs/en/WASM_Smart_Contract/"},"https://devdocs.alaya.network/alaya-devdocs/en/WASM_Smart_Contract/"),")."),(0,r.kt)("h4",{id:"contract-compilation"},"Contract Compilation"),(0,r.kt)("p",null,"The python sdk currently supports the bin and abi formed after the compilation of EVM and WASM contracts as contract data to interact with the Alaya blockchain."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"EVM contracts (created in solidity language) can be compiled, deployed, and called using ",(0,r.kt)("inlineCode",{parentName:"li"},"platon-truffle"),". For details, please refer to ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/AlayaNetwork/solidity"},"Solidity Compiler")," and ","[Platon-truffle]","(",(0,r.kt)("a",{parentName:"li",href:"https://platon-truffle.readthedocs.io/en/v0.13.1/getting-started/"},"https://platon-truffle.readthedocs.io/en/v0.13.1/getting-started/")," installation.html)."),(0,r.kt)("li",{parentName:"ul"},"WASM contracts (created in C/C++/Rust and other languages) can be compiled, deployed, and called using ",(0,r.kt)("inlineCode",{parentName:"li"},"PlatON-CDT")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"platon-truffle"),". For details, please refer to ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/AlayaNetwork/PlatON-CDT/tree/feature/WASM"},"PlatON-CDT Compiler"),".")),(0,r.kt)("h4",{id:"calling-evm-contracts-via-sdk"},"Calling EVM Contracts via SDK"),(0,r.kt)("h5",{id:"compile-evm-contracts-locally-using-platon-truffle"},"Compile EVM contracts locally using platon-truffle"),(0,r.kt)("p",null,"Obtain bin and abi. Take the Helloworld contract as an example. After compiling Helloworld.sol with ",(0,r.kt)("inlineCode",{parentName:"p"},"platon-truffle"),", get the abi and bytecode (bin) in the generated build/contracts/HelloWorld.json."),(0,r.kt)("h5",{id:"deploy-helloworld-contract-via-python-sdk"},"Deploy Helloworld contract via python SDK"),(0,r.kt)("p",null,"First, connect to the node through Web3. ",(0,r.kt)("inlineCode",{parentName:"p"},"from_address")," is the account address on the node, and bytecode and abi are the bin and abi after the EVM contract is compiled."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'  from hexbytes import HexBytes\n  from client_sdk_python import Web3, HTTPProvider\n  from client_sdk_python.eth import PlatON\n  from platon_keys.utils import bech32,address\n  from client_sdk_python.packages.eth_utils import to_checksum_address\n\n  true = True\n  false = False\n\n  w3 = Web3(HTTPProvider("http://47.241.91.2:6789"),chain_id = 201030)\n  alaya = PlatON(w3)\n  print(w3.isConnected())\n\n  from_address = "atx1yjjzvjph3tw4h2quw6mse25y492xy7fzwdtqja"\n\n  bytecode = \'608060405234801561001057600080fd5b50610c28806100206000396000f3fe608060405234801561001057600080fd5b50600436106101375760003560e01......\'\n\n  abi = [{"constant": False,"inputs": [{"internalType": "string","name": "_name","type": "string"}],"name": "setName","outputs": [{"internalType": "string","name": "","type": "string"}],"payable": False,"stateMutability": "nonpayable","type": "function"},{"constant": True,"inputs": [],"name": "getName","outputs": [{"internalType": "string","name": "","type": "string"}],"payable": False,"stateMutability": "view","type": "function"}]\n\n  #Output\n  True\n  atp1yjjzvjph3tw4h2quw6mse25y492xy7fzwdtqja\n'))),(0,r.kt)("p",null,"Then use the function ",(0,r.kt)("inlineCode",{parentName:"p"},"contract_deploy(bytecode, fromAddress)")," to deploy the EVM contract on the nodes of the Alaya blockchain by sending transactions, and the transaction hash ",(0,r.kt)("inlineCode",{parentName:"p"},"transactionHash")," is returned."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"tx_receipt")," is the deployment receipt obtained by ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.waitForTransactionReceipt")," after resolving ",(0,r.kt)("inlineCode",{parentName:"p"},"transactionHash")," (deployment is also a kind of transaction, and ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.waitForTransactionReceipt")," returns the transaction receipt)."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'def contract_deploy(bytecode, fromAddress):\n    bytecode = bytecode\n    transactionHash = alaya.sendTransaction(\n        {\n            "from": fromAddress,\n            "gas": 1000000,\n            "gasPrice": 1000000000,\n            "data": bytecode,\n        }\n    )\n    transactionHash = HexBytes(transactionHash).hex().lower()\n    return transactionHash\n\ntx = contract_deploy(bytecode, from_address)\nprint(tx)\ntx_receipt = alaya.waitForTransactionReceipt(tx)\nprint(tx_receipt)\ncontractAddress = tx_receipt.contractAddress\nprint(contractAddress)\n\n'))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"platon.sendTransaction (parameter)")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from"),": The address of the account that sent the transaction"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),": Data sent to the chain"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas"),": The amount of gas for the transaction"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gasPrice"),": The gas price, which should be reasonable")),(0,r.kt)("p",null,"If the deployment is successful, the output results are as follows"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"\n#Output\n0x143efc88f581c4356156519cde51064222ec5a42fcb4d83400a8b11893a95074\nAttributeDict({'blockHash': HexBytes('0xf73097d8e7b2cc385910a4af3a4dbc7588774bad3f2b6589052503b649af1525'), 'blockNumber': 305798, 'contractAddress': 'atx1ws7m2tqr55h8xs7e3jg5svlyu0lk9ktpx03cke', 'cumulativeGasUsed': 319449, 'from': 'atx1yjjzvjph3tw4h2quw6mse25y492xy7fzwdtqja', 'gasUsed': 319449, 'logs': [], 'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'), 'status': 1, 'to': None, 'transactionHash': HexBytes('0x143efc88f581c4356156519cde51064222ec5a42fcb4d83400a8b11893a95074'), 'transactionIndex': 0})\natp1ws7m2tqr55h8xs7e3jg5svlyu0lk9ktpx03cke\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The first line of data is the transaction result of alaya.sendTransaction in the function contract_deploy."),(0,r.kt)("li",{parentName:"ul"},"The second line of data is the transaction receipt obtained through alaya.waitForTransactionReceipt."),(0,r.kt)("li",{parentName:"ul"},"The third line is the contract address where the contract is deployed successfully.")),(0,r.kt)("h5",{id:"call-the-helloworld-contract-send-a-transaction"},"Call the Helloworld Contract (Send a Transaction)"),(0,r.kt)("p",null,"After the successful deployment of the previous contract, the transaction is sent."),(0,r.kt)("p",null,"First define a function ",(0,r.kt)("inlineCode",{parentName:"p"},"SendTxn(txn)"),"."),(0,r.kt)("p",null,"It involves:"),(0,r.kt)("p",null,"Signing a transaction via ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.account.signTransaction")," (signing with the private key)."),(0,r.kt)("p",null,"Sending a transaction via ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.sendRawTransaction"),"."),(0,r.kt)("p",null,"Getting a transaction receipt via ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.waitForTransactionReceipt"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'send_privatekey = "<your private key>"\ndef SendTxn(txn):\n    signed_txn = alaya.account.signTransaction(txn,private_key=send_privatekey)\n    res = alaya.sendRawTransaction(signed_txn.rawTransaction).hex()\n    txn_receipt = alaya.waitForTransactionReceipt(res)\n    print(res)\n    return txn_receipt\n')),(0,r.kt)("p",null,"Create a contract instance contract_instance. Since it is an EVM contract, the function contract is used. If it is a WASM contract, the function wasmcontract is used."),(0,r.kt)("p",null,"Call ifControl through functions, input parameter 20, and send transaction information through buildTransaction"),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"contract_instance = alaya.contract(address=contractAddress, abi=abi)\n\ntxn = contract_instance.functions.ifControl(20).buildTransaction(\n    {\n        'chainId':201030,\n        'nonce':alaya.getTransactionCount(from_address),\n        'gas':2000000,\n        'value':0,\n        'gasPrice':1000000000,\n    }\n)\n\nprint(SendTxn(txn))\n\nresult = contract_instance.functions.getIfControlResult().call()\nprint(result)\n"))),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"chainId"),": Chain id")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"nonce"),": Serial number")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"gas"),": Gas")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"value"),": Value (starting balance of the newly created contract account)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"gasPrice"),": Gas price"),(0,r.kt)("p",{parentName:"li"},"You need to write a reasonable value, call ",(0,r.kt)("inlineCode",{parentName:"p"},"ifControl"),", and successfully pass the parameter 20 to the chain. Then get the corresponding information and data on the chain through the corresponding ",(0,r.kt)("inlineCode",{parentName:"p"},"getIfControlResult"),"."))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The first line of data is the transaction result of ",(0,r.kt)("inlineCode",{parentName:"p"},"platon.sendRawTransaction")," in the function ",(0,r.kt)("inlineCode",{parentName:"p"},"SendTxn"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The second line of data is the transaction result of ",(0,r.kt)("inlineCode",{parentName:"p"},"ifControl.\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The third line of data is the transaction result of ",(0,r.kt)("inlineCode",{parentName:"p"},"getIfControlResult"),"."))),(0,r.kt)("h5",{id:"event-call-for-evm-contract"},"Event Call for EVM Contract"),(0,r.kt)("p",null,"The EVM contract can listen to and log the detailed information of related transactions through events. Take the evmevent contract as an example: it adds the event type MyEvent to the method setVar."),(0,r.kt)("p",null,"Greeter is the successfully deployed EVM contract."),(0,r.kt)("p",null,"First call setVar through functions, pass the parameters to the chain, and then call the event to return the detailed log of the transaction through greeter.events.MyEvent()."),(0,r.kt)("p",null,"The events method is the event api dedicated to the contract."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"greeter = alaya.contract(address=tx_receipt.contractAddress, abi=abi)\n\ntx_hash = greeter.functions.setVar(100).transact(\n    {\n        'from':from_address,\n        'gas':1500000,\n    }\n)\n\ntx_receipt = alaya.waitForTransactionReceipt(tx_hash)\nprint(tx_receipt)\n\ntopic_param = greeter.events.MyEvent().processReceipt(tx_receipt)\nprint(topic_param)\n"))),(0,r.kt)("p",null,"Output after successful operation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"AttributeDict({'blockHash': HexBytes('0x78fb61da83dae555c8a8a87fc3296f466afeb7f90e9a3b0ac5689e8b34435174'), 'blockNumber': 2014683, 'contractAddress': None, 'cumulativeGasUsed': 43148, 'from': 'atp1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl', 'gasUsed': 43148, 'logs': [AttributeDict({'address': 'atp1vc6phdxhdkmztpznv5ueduw6cae3swe40whlsn', 'topics': [HexBytes('0x6c2b4666ba8da5a95717621d879a77de725f3d816709b9cbe9f059b8f875e284'), HexBytes('0x0000000000000000000000000000000000000000000000000000000000000064')], 'data': '0x', 'blockNumber': 2014683, 'transactionHash': HexBytes('0xe36b5d2b679d5635ab6dd2b620caa50a476fa84bd93bf7b6c8de807f3a9da483'), 'transactionIndex': 0, 'blockHash': HexBytes('0x78fb61da83dae555c8a8a87fc3296f466afeb7f90e9a3b0ac5689e8b34435174'), 'logIndex': 0, 'removed': False})], 'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000020080000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000004000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000008000000000000000'), 'status': 1, 'to': 'atp1vc6phdxhdkmztpznv5ueduw6cae3swe40whlsn', 'transactionHash': HexBytes('0xe36b5d2b679d5635ab6dd2b620caa50a476fa84bd93bf7b6c8de807f3a9da483'), 'transactionIndex': 0})\n(AttributeDict({'args': AttributeDict({'_var': 100}), 'event': 'MyEvent', 'logIndex': 0, 'transactionIndex': 0, 'transactionHash': HexBytes('0xe36b5d2b679d5635ab6dd2b620caa50a476fa84bd93bf7b6c8de807f3a9da483'), 'address': 'atx1vc6phdxhdkmztpznv5ueduw6cae3swe40whlsn', 'blockHash': HexBytes('0x78fb61da83dae555c8a8a87fc3296f466afeb7f90e9a3b0ac5689e8b34435174'), 'blockNumber': 2014683}),)\n\n")),(0,r.kt)("p",null,"The first line is the transaction receipt returned after the function ",(0,r.kt)("inlineCode",{parentName:"p"},"setVar")," is successfully called."),(0,r.kt)("p",null,"The second line is the transaction log returned after the event ",(0,r.kt)("inlineCode",{parentName:"p"},"MyEvent()")," is called."),(0,r.kt)("p",null,"Among the values corresponding to'args':"),(0,r.kt)("p",null,"  '_var' is the only parameter value, and in the event of the EVM contract, the basic types of data are ",(0,r.kt)("inlineCode",{parentName:"p"},"uint"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"bool"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"address"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"bytex"),"."),(0,r.kt)("h4",{id:"sdk-call-for-wasm-contracts"},"SDK Call for WASM Contracts:"),(0,r.kt)("h5",{id:"compile-wasm-contracts-locally-using-platon-cdt"},"Compile WASM contracts locally using PlatON-CDT"),(0,r.kt)("p",null,"Take wasmcontract.cpp as an example. After installing PlatON-CDT on this machine, enter the code in PlatON-CDT/build/bin."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"platon-cpp wasmcontract.cpp\n")),(0,r.kt)("p",null,"After successful compilation, there are two files in wasmcontract/build/contracts."),(0,r.kt)("p",null,"wasmcontract.abi.json and wasmcontract.WASM, where wasmcontract.abi.json is abi data (in json format), and wasmcontract.WASM is bin data (in binary format)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"}," import binascii\n f = open('D:/wasmcontract.WASM','rb')\n contents=f.read()\n bytecode=binascii.b2a_hex(contents)\n")),(0,r.kt)("p",null,"Because what our chain recognizes is hexadecimal data, we need to convert the binary .WASM to hexadecimal bytecode using methods similar to ",(0,r.kt)("inlineCode",{parentName:"p"},"binascii.b2a_hex")," for the sake of identification on the chain."),(0,r.kt)("h5",{id:"deploy-helloworld-contract-wasm-type-through-python-sdk"},"Deploy Helloworld contract (WASM type) through python SDK"),(0,r.kt)("p",null,"After obtaining the bin and abi of the WASM contract, deploy on the chain through Web3."),(0,r.kt)("p",null,"In the code below, bytecode is the bin data of the contract, and cabi is the abi data of the contract."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from client_sdk_python import Web3, HTTPProvider\nfrom client_sdk_python.eth import PlatON\n\n```python\n\ntrue = True\nfalse = False\n\nw3 = Web3(HTTPProvider("http://47.241.91.2:6789"),chain_id = 201030)\nalaya = PlatON(w3)\nprint(w3.isConnected())\nfrom_address = "atp1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl"\n\nbytecode=\'0061736d01000000015c1060027f7f0060017f017f60027f7f017f60017f0060037f7f7f017f60037f7f7f0060047f7f7f7f0060000060047f7f7f......\'\ncabi = [{"constant": False,"inputs": [{"internalType": "string","name": "_name","type": "string"}],"name": "setName","outputs": [{"internalType": "string","name": "","type": "string"}],"payable": False,"stateMutability": "nonpayable","type": "function"},{"constant": True,"inputs": [],"name": "getName","outputs": [{"internalType": "string","name": "","type": "string"}],"payable": False,"stateMutability": "view","type": "function"}]\n\n'))),(0,r.kt)("p",null,"WASM contracts create contract instances through ",(0,r.kt)("inlineCode",{parentName:"p"},"alaya.wasmcontract"),"."),(0,r.kt)("p",null,"The .constructor() method is called on the instance to construct the contract, and the transaction is sent to the chain through transact."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"  # Instantiate and deploy contract\nPayable = alaya.wasmcontract(abi=cabi, bytecode=bytecode,vmtype=1)\n\ntx_hash = Payable.constructor().transact(\n      {\n          'from':from_address,\n          'gas':1500000,\n      }\n  )\n\n  # Wait for the transaction to be mined, and get the transaction receipt\n  tx_receipt = alaya.waitForTransactionReceipt(tx_hash)\n  print(tx_receipt)\n"))),(0,r.kt)("p",null,"Among them, ",(0,r.kt)("inlineCode",{parentName:"p"},"tx_receipt")," is the transaction receipt of the deployed contract."),(0,r.kt)("p",null,"After the deployment is successful, the output is as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"  #Output\nAttributeDict({'blockHash': HexBytes('0x7a193be2cf86aedcf844c0478c6f64d226affb55779bad1b2056c7e70e8158d6'), 'blockNumber': 2012981, 'contractAddress': 'atp15sh4rpuqr4fvzs4cyj9uea54r5tax7kljqqszk', 'cumulativeGasUsed': 1233168, 'from': 'atx1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl', 'gasUsed': 1233168, 'logs': [], 'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'), 'status': 1, 'to': None, 'transactionHash': HexBytes('0x717a82ea0ef116e271fb02dbb7d456fe9dd41a2dbd07cac81d079e375b5dade1'), 'transactionIndex': 0})\n\n")),(0,r.kt)("h5",{id:"send-transaction-to-helloworld-contract-wasm-contract"},"Send Transaction to Helloworld Contract (WASM Contract)"),(0,r.kt)("p",null,"After the contract is successfully deployed, call the method in the contract."),(0,r.kt)("p",null,"payable is an instance after the contract is successfully deployed."),(0,r.kt)("p",null,"By calling the function setBool, the parameter false is sent to the chain (send a transaction)."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"payable = alaya.wasmcontract(address=tx_receipt.contractAddress, abi=cabi,vmtype=1)\n\ntx_hash0 = payable.functions.setBool(false).transact(\n    {\n        'from':from_address,\n        'gas':1500000,\n    }\n)\nprint(alaya.waitForTransactionReceipt(tx_hash0))\nprint('get : {}'.format(\n    payable.functions.getBool().call()\n))\n"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"payable.functions.getBool().call()")," means that the corresponding information on the chain is obtained through the function getBool (according to the definition of this contract, the parameters uploaded by setBool are obtained)."),(0,r.kt)("p",null,"After successful operation, the results are as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"#Output\nAttributeDict({'blockHash': HexBytes('0x9bcadf4db5d74789901b2176cb7dad3191d2425b61f261966e932f6606d13041'), 'blockNumber': 2018575, 'contractAddress': None, 'cumulativeGasUsed': 426496, 'from': 'atx1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl', 'gasUsed': 426496, 'logs': [], 'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'), 'status': 1, 'to': 'atp1c5h59flven2hzyrylh2tsmn59r5ucms95n5ugc', 'transactionHash': HexBytes('0x4c724e7d1833ade363f51f611293682771318e3c86b533f5a78b580c812eb009'), 'transactionIndex': 0})\nget : False\n\n")),(0,r.kt)("h5",{id:"event-call-of-wasm-contracts"},"Event Call of WASM Contracts"),(0,r.kt)("p",null,"The events in the WASM contract are generally written in the function of the contract."),(0,r.kt)("p",null,"Taking the wasmcontract contract as an example, the method setUint32 contains the event setUint32Evt, and setUint32Evt can be used to listen to the transaction results of setUint32 and output logs."),(0,r.kt)("p",null,"Greeter is an example of a successfully deployed WASM contract."),(0,r.kt)("p",null,"tx_hash is a transaction instance of passing parameters via the function setUint32."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("mark",null,(0,r.kt)("b",null,(0,r.kt)("font",{size:"3"},"Example:")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"\ngreeter = alaya.wasmcontract(address=tx_receipt.contractAddress, abi=abi,vmtype=1)\ntx_hash = greeter.functions.setUint32(1000).transact(\n    {\n        'from': from_address,\n        'gas': 1500000,\n    }\n)\n\ntx_receipt = alaya.waitForTransactionReceipt(tx_hash)\nprint(tx_receipt)\n\ntopic_param = greeter.events.setUint32Evt().processReceipt(tx_receipt)\nprint(topic_param)\n\n"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"topic_param")," is the result of the event setUint32Evt call."),(0,r.kt)("p",null,"The output after successful operation is as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"\n(AttributeDict({'args': AttributeDict({'topic1': 'topic1', 'arg1': 'data1', 'arg2': 1000, 'arg3': 1000}), 'event': 'setUint32Evt', 'logIndex': 0, 'transactionIndex': 0, 'transactionHash': HexBytes('0xabac50c6a9d443d9f89065775f0f3d56ddeabd2f2a5e0e1f36d00db703b14d8b'), 'address': 'atp1sgsp74pce2vkgwqjd3rzmt55p70psmq7qvnqwn', 'blockHash': HexBytes('0x78f15fbacbc745dfd5b35b596d28b61ae2987b6ff9050dc39c716f383e505899'), 'blockNumber': 1477774}),)\n\n")),(0,r.kt)("p",null,"Among the values corresponding to'args':"),(0,r.kt)("p",null,"'topic1' is the topic value, and 'arg1','arg2', and'arg3' are the three parameter values defined in the event."),(0,r.kt)("h3",{id:"built-in-contracts"},"Built-in Contracts"),(0,r.kt)("h4",{id:"staking"},"staking"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from client_sdk_python import Web3, HTTPProvider\nfrom client_sdk_python.ppos import Ppos\nw3 = Web3(HTTPProvider("http://47.241.91.2:6789"),chain_id = 201030)\nppos = Ppos(w3)\n')),(0,r.kt)("h5",{id:"initiate-a-staking"},"Initiate a staking"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.createStaking(benifit_address, node_id, external_id, node_name, website, details, amount,program_version,program_version_sign, bls_pubkey, bls_proof, pri_key, reward_per, type=2, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"type"),": It indicates whether the free amount of the account or the locked-up amount of the account is used for staking. 0: free amount, 1: locked-up amount.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"benifit_address"),": It indicates the income account, which is used to receive block rewards and staking rewards.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_id"),": Id of the node being staked (also called node Id of the candidate).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"external_id"),": External ID (with a length limit, the Id that brings the node description for a third party).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_name"),": The name of the staked node (with a length limit, indicating the name of the node).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"website"),": It indicates the third-party homepage of the node (with a length limit, indicating the homepage of the node)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"details"),": It indicates the description of the node (with a length limit, indicating the description of the node)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"amount"),": Staking amount (unit:von, 1ATP = 10","*","*","18 von).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"program_version"),": The real version number of the PlatON process of the staked node, accessed through the management rpc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"program_version_sign"),": The real version signature of the program, which can be obtained through the governance rpc.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"bls_pubkey"),": Bls public key.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"bls_proof"),": The proof of bls, obtained through interface that provides the proof.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"reward_per"),": It indicates the the proportion of rewards for the delegation, BasePoint 1BP=0.01%.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')),(0,r.kt)("h5",{id:"modify-staking-information"},"Modify Staking Information"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.editCandidate(benifit_address, node_id, external_id, node_name, website, details, pri_key, reward_per, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"benifit_address"),": It indicates the income account, which is used to receive block rewards and staking rewards.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_id"),": Id of the node being staked (also called node Id of the candidate).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"external_id"),": External ID (with a length limit, the Id that brings the node description for a third party).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_name"),": The name of the staked node (with a length limit, indicating the name of the node).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"website"),": It indicates the third-party homepage of the node (with a length limit, indicating the homepage of the node)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"details"),": It indicates the description of the node (with a length limit, indicating the description of the node)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"reward_per"),": It indicates the the proportion of rewards for the delegation, BasePoint 1BP=0.01%. E.g.: If you pass 500, 5% will be the delegation reward\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'\ntype:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"increase-staking"},"Increase Staking"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.increaseStaking(node_id, amount, pri_key, type=2, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"type"),": It indicates whether the free amount of the account or the locked-up amount of the account is used for staking. 0: free amount, 1: locked-up amount.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_id"),": Id of the node being staked (also called node Id of the candidate).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"amount"),": von increased.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n cfg = {\n      "gas":100000000,\n      "gasPrice":2000000000000,\n      "nonce":1,\n  }\n')))),(0,r.kt)("h5",{id:"cancel-staking-all-cancellations-are-initiated-at-one-time-and-the-staking-is-credited-to-the-account-by-multiple-times"},"Cancel Staking (all cancellations are initiated at one time, and the staking is credited to the account by multiple times)"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.withdrewStaking(node_id, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_id"),": NodeId of the node staked. ",(0,r.kt)("strong",{parentName:"p"},"Copy the node ID in an explorer and remove the 0x prefix"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h4",{id:"delegate"},"delegate"),(0,r.kt)("h5",{id:"initiate-a-delegation"},"Initiate a Delegation"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.delegate(type, node_id, amount, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"type"),": It indicates whether the free amount of the account or the locked-up amount of the account is used for staking. 0: free amount, 1: locked-up amount.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_id"),": NodeId of the node staked. ",(0,r.kt)("strong",{parentName:"p"},"Copy the node ID in an explorer and remove the 0x prefix"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"amount"),": The delegation amount (based on the smallest unit, 1ATP = 10","*","*","18 von).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"decreasecancel-a-delegation"},"Decrease/Cancel a Delegation"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ppos.withdrewDelegate(staking_blocknum, node_id, amount, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"staking_blocknum"),": The only sign that represents a certain staking of a certain node")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"node_id"),": NodeId of the node staked. ",(0,r.kt)("strong",{parentName:"p"},"Copy the node ID in an explorer and remove the 0x prefix"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"amount"),": The delegation amount effectively decreased (based on the smallest unit, 1ATP = 10","*","*","18 von).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"withdraw-delegation-reward"},"Withdraw Delegation Reward"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.withdrawDelegateReward(pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h4",{id:"query"},"query"),(0,r.kt)("h5",{id:"query-the-validator-queue-of-the-current-epoch"},"Query the Validator Queue of the Current Epoch"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getVerifierList(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-validator-queue-of-the-current-round"},"Query the Validator Queue of the Current Round"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getValidatorList(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-all-real-time-candidate-lists"},"Query All Real-time Candidate Lists"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getCandidateList(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-nodeid-and-staking-id-of-the-node-delegated-by-the-current-account-address"},"Query NodeID and Staking ID of the Node Delegated by the Current Account Address"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getRelatedListByDelAddr(del_addr, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"del_addr"),": Client's account address."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-delegation-information-of-current-single-node"},"Query the Delegation Information of Current Single Node"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getDelegateInfo(staking_blocknum, del_address, node_id, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"staking_blocknum"),": The block height when the staking is initiated"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"del_addr"),": Client's account address."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node_id"),": Validator ID."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-information-of-the-current-node"},"Query the Information of the Current Node"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getCandidateInfo(node_id, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node_id"),": Validator ID."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-block-reward-of-the-current-epoch"},"Query the Block Reward of the Current Epoch"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getPackageReward(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-staking-reward-of-the-current-epoch"},"Query the Staking Reward of the Current Epoch"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getStakingReward(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-average-time-of-packaging-block"},"Query the Average Time of Packaging Block"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getAvgPackTime(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-unwithdrawn-delegation-reward-of-an-account-at-various-nodes"},"Query the Unwithdrawn Delegation Reward of an Account at Various Nodes"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getDelegateReward(address, node_ids=[])\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"address"),": The account address to be queried."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node_ids"),": A string array of node IDs to be queried. If it is null, all nodes delegated by the account will be queried.")),(0,r.kt)("h5",{id:"report-double-signing"},"Report Double Signing"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.reportDuplicateSign(type, data, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"type"),": Type of double signing, which has three options 1: prepareBlock, 2: prepareVote, and 3: viewChange.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"data"),": The json value of a single evidence. For the format, refers to ",(0,r.kt)("a",{parentName:"p",href:"#evidences_interface"},"RPC interface Evidences"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"query-whether-a-node-has-been-reported-to-have-double-signing"},"Query Whether a Node Has Been Reported to Have Double Signing"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.checkDuplicateSign(type, node_id, block_number, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),": Type of double signing, which has three options 1: prepareBlock, 2: prepareVote, and 3: viewChange."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node_id"),": The ID of the node to be queried."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"block_number"),": The block height of the repeated signature."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h4",{id:"lockup"},"Lockup"),(0,r.kt)("h5",{id:"create-a-lock-up-plan"},"Create a Lock-up Plan"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.createRestrictingPlan(account, plan, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"account"),": The account that receives the unlocked amount")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"plan"),": An is a list of RestrictingPlan (array), and the definition of RestrictingPlan is as follows:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"type RestrictingPlan struct {\nEpoch uint64\nAmount *big.Int\n}\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Epoch: The multiple of the epoch. The product of the number of blocks in each epoch indicates that the locked funds s are released at the height of the target block. Epoch* the number of blocks per epoch is at least greater than the maximum irreversible block height.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Amount: Indicates the amount to be released on the target block.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"get-lock-up-information"},"Get Lock-up Information"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ppos.getRestrictingInfo(account, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"account"),": The account that receives the unlocked amount"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h4",{id:"governance"},"Governance"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from client_sdk_python import Web3, HTTPProvider\nfrom client_sdk_python.pip import Pip\nw3 = Web3(HTTPProvider("http://47.241.91.2:6789"),chain_id = 201030)\npip = Pip(w3)\n')),(0,r.kt)("h5",{id:"text-proposal"},"Text Proposal"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.submitText(verifier, pip_id, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"verifier"),": The validator who submitted the proposal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pip_id"),": PIPID.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"upgrade-proposal"},"Upgrade Proposal"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.submitVersion(verifier, pip_id, new_version, end_voting_rounds, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"verifier"),": The validator who submitted the proposal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pip_id"),": PIPID.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"new_version"),": A new version.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"end_voting_rounds"),": The number of voting rounds.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Note: Specify the number of rounds for voting. The voting on the proposal will end in the 230th block of the last round. If the vote is passed, it will take effect after the round is completed. The value this parameter is an integer ranging from 0 <endVotingRounds <= 4840, which is approximately 2 weeks.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"parameter-proposal"},"Parameter Proposal"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.submitParam(verifier, pip_id, module, name, new_value, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"verifier"),": The validator who submitted the proposal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pip_id"),": PIPID.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"module"),": Parameter module.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"name"),": Parameter name.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"new_value"),": New parameter value.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"delete-a-proposal"},"Delete a Proposal"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.submitCancel(verifier, pip_id, end_voting_rounds, tobe_canceled_proposal_id, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"verifier"),": The validator who submitted the proposal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pip_id"),": PIPID.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"end_voting_rounds"),": The number of voting rounds. Please refer to the instructions on submitting the upgrade proposal. At the same time, the value of this parameter in this interface cannot be greater than the value in the corresponding upgrade proposal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"tobe_canceled_proposal_id"),": The upgrade proposal ID will be cancelled.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"vote"},"Vote"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.vote(verifier, proposal_id, option, program_version, version_sign, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"verifier"),": The validator who submitted the proposal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"proposal_id"),": Proposal ID.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"option"),": Voting options.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"program_version"),": Node code version, obtained through the rpc getProgramVersion interface.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"version_sign"),": The code version signature obtained through the rpc getProgramVersion interface.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("h5",{id:"version-statement"},"Version Statement"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"pip.declareVersion(active_node, program_version, version_sign, pri_key, transaction_cfg=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"active_node"),": The declared node can only be a validator/candidate")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"program_version"),": The declared version, obtained via the getProgramVersion interface of rpc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"version_sign"),": The version signature, obtained via the getProgramVersion interface of rpc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pri_key"),": Private key of the transaction.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transaction_cfg"),": Basic transaction configuration."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'type:\n    dict\nexample:\n    cfg = {\n         "gas":100000000,\n         "gasPrice":2000000000000,\n         "nonce":1,\n     }\n')))),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.getProposal(proposal_id, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"proposal_id"),": Proposal ID."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-proposal-results"},"Query Proposal Results"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.getTallyResult(proposal_id, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"proposal_id"),": Proposal ID."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-cumulative-number-of-validators"},"Query the Cumulative Number of Validators"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.getAccuVerifiersCount(proposal_id, block_hash, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"proposal_id"),":  Proposal ID."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"block_hash"),"\uff1aBlock hash."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-proposal-list"},"Query Proposal List"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.listProposal(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-effective-version-of-the-chain"},"Query the Effective Version of the Chain"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.getActiveVersion(from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-governance-parameter-value-at-the-current-block-height"},"Query the Governance Parameter Value at the Current Block Height"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.getGovernParamValue(module, name, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"module"),": Parameter module."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),": Parameter name."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")),(0,r.kt)("h5",{id:"query-the-governance-parameter-list"},"Query the Governance Parameter List"),(0,r.kt)("p",null,"Method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"pip.listGovernParam(self, module=None, from_address=None)\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"module"),": Parameter module."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_address"),": The from address that calls the rpc interface.")))}d.isMDXComponent=!0}}]);